\chapter{Categorie, funtori, trasformazioni naturali}\label{chap_cat_fun_nat}
\section{Categorie}\label{sec_categorie}

Prima di dare una definizione formale di categoria, può essere d'aiuto raccogliere alcuni esempi concreti per orientare chi legge.

La nozione di categoria, che introdurremo in \ref{def_categ}, riuscirà a unificare due strutture matematiche apparentemente molto diverse tra loro:
\index{Monoide}
\begin{definition}\label{prelim_def_monoide}
	Un \emph{monoide} consiste di un insieme \(M\) dotato di
	\begin{itemize}
		\item un elemento \(e\in M\) (spesso denotato anche: \(1_M\) o semplicemente \(1\)), chiamato \emph{elemento neutro}, \emph{unità} o \emph{identità} (si noti che da ciò segue, indirettamente ma immediatamente, che \(M\) è un insieme \emph{non vuoto}),
		\item Un'operazione binaria \(M\times M\to M\), detta \emph{prodotto} o \emph{composizione}, e indicata con \((m,n)\mapsto m\cdot n\) o con simili simboli infissi come \(\star, \centerdot,\bullet\) eccetera,
	\end{itemize}
	che soddisfano le seguenti proprietà:
	\begin{itemize}
		\item \emph{Identità}: per ogni \(m\in M\), valgono le uguaglianze
  \[m\cdot e = m = e\cdot m.\]
		\item \emph{Associatività}: per ogni \(m,n,p\in M\), vale l'uguaglianza
  \[(m\cdot n)\cdot p = m\cdot (n\cdot p)\]
	\end{itemize}
\end{definition}
\index{Poset}
\begin{definition}\label{prelim_def_preset}
	Un \emph{insieme preordinato} (o \emph{preordine} o \emph{preset}) consiste di un insieme \(P\) dotato di una relazione binaria \(\le\), solitamente indicata come un simbolo infisso \(x\le y\) per significare che \((x,y)\) è un elemento di \(\le\), che soddisfa le seguenti due proprietà:
	\begin{itemize}
		\item \emph{Riflessività}: per ogni \(x\in P\), si ha \(x\le x\);
		\item \emph{Transitività}: per ogni \(x,y,z\in P\), si ha che
		\[(x\le y)\;\&\;(y\le z) \quad\implies\quad x\le z\]
	\end{itemize}
	Quando la relazione \(\le\) soddisfa anche la proprietà \emph{antisimmetrica}, cioè è tale per cui
	\[(x\le y)\;\&\;(y\le x) \quad\implies\quad x = y\]
	l'insieme \(P\), o meglio la coppia \((P,\le)\) si dice un insieme \emph{parzialmente ordinato} o \emph{poset}. La relazione \(\le\) in un poset si chiama un \emph{ordine parziale}.
\end{definition}
Dimostreremo in \ref{mon_sonocat} e in \ref{cat_sonopos} rispettivamente che ogni monoide è una categoria, e ogni insieme preordinato (e a fortiori, ogni insieme parzialmente ordinato) è una categoria. (Gli enunciati in questione renderanno più precise queste ultime affermazioni.)
\index{Categoria!--- degli insiemi finiti}
\begin{handsExample}{fund}\label{protoex_finset}
	Un esempio naturale di categoria nasce considerando la classe \(\ctFin\) di tutti gli insiemi finiti \([n]\defeq \{1,\dots,n\}\) (con la convenzione che \([0]=\varnothing\) sia l'insieme vuoto), e le funzioni \(f : [n] \to [m]\) tra di loro. \`E evidente che non tutte tali funzioni sono componibili: una condizione necessaria --e sufficiente!-- affinché la composizione tra due funzioni \(f : [p] \to [q],g : [m] \to [n]\) tra insiemi finiti sia possibile è che il dominio dell'una coincida con il codominio dell'altra, ovvero che \(q=m\). Quando questo accade, è possibile `giustapporre' le due funzioni come
	\[\xymatrix{
		[p] \ar[r]^-f & [q] \ar[r]^-g & [r].
	}\]
	La composizione di funzioni \((f,g)\mapsto g\cmp f\) perciò è una operazione che ricorda quella di \ref{prelim_def_monoide} (per esempio, essa è associativa quando è definita) ma è appunto un'operazione \emph{parziale}, cioè non definita tra tutte le possibili coppie \((f,g)\) di funzioni tra insiemi finiti; quale che sia la struttura matematica che la classe degli insiemi finiti forma, perciò, essa non può essere un monoide. Un altro motivo per cui \(\ctFin\) non può essere un monoide è che l'identità per la composizione di funzioni non è unica come accade, invece, in ogni monoide: \emph{ogni} insieme finito \([n]\) ha una sua propria funzione identità \(\id_{[n]}\), e se \(f : [m]\to [n]\) con \(m\ne n\), si deve avere che \(f\cmp \id_{[m]}=f=\id_{[n]}\cmp f\) per funzioni identità formalmente \emph{distinte}, sebbene definite `alla stessa maniera' da
	\[
	\begin{tikzcd}[row sep=0]
		{[n]} \ar{r}{\id_{[n]}} & {[n]} \\
		x \ar[mapsto]{r} & x
	\end{tikzcd}
	\qquad\mbox{e}\qquad
	\begin{tikzcd}[row sep=0]
		{[m]} \ar{r}{\id_{[m]}} & {[m]} \\
		y \ar[mapsto]{r} & y .
	\end{tikzcd}
	\]
	% \(\lambda x.x : [n]\to [n]\) e \(\lambda y.y : [m]\to [m]\). % non credo i lettori conoscano la notazione lambda, forse dovremmo introdurla

	La classe \(\ctFin\) formerà una categoria, e per lo stesso motivo faranno altrettanto delle collezioni di oggetti matematici che esibiscono una struttura simile a quella di un monoide, ma sono più generali per motivi simili:
	\begin{itemize}
		\item \index{Categoria!---e di strutture algebriche} la classe \(\bbR\emdash\ctVect\) di tutti gli spazi vettoriali reali della forma \(\bbR^n\) per un \(n\) %\(n\ge 1\)
		naturale; non tutte le mappe lineari tra spazi vettoriali si possono comporre, e le applicazioni identità sono tutte distinte; e più in generale,
		\item la classe di tutte le strutture algebriche di un dato tipo (gli insiemi, senza limite alla loro taglia; i gruppi, con gli omomorfismi di gruppo; gli spazi vettoriali, anche di dimensione infinita; gli spazi topologici, con le funzioni continue; eccetera).
	\end{itemize}
\end{handsExample}
Una categoria sarà dunque, in prima approssimazione, una collezione di `oggetti' \(A,B,X,Y,\dots\), legati tra loro da delle relazioni o `funzioni astratte' \(f : X\to Y, g : A\to B\),\dots{} le quali potranno essere composte alla maniera delle funzioni. Questa intuizione è sufficiente per formulare la definizione, a cui deve però prima seguire una precisazione terminologica.
\begin{remark}
	\index{Classe}
	\index{Classe propria|see {Classe}}
	Abbiamo già utilizzato diverse volte la parola `classe': la definizione generale di categoria obbliga a farlo, dal momento che la collezione di tutte le strutture algebriche di un dato tipo è spesso `troppo grande per essere un insieme' (in un senso che formalizzeremo in dettaglio nell'Appendice \ref{fondamenti}); per il momento è sufficiente trattenere l'idea informale che una classe (o \emph{classe propria}) \(\ctC\) è una collezione di elementi che ha tutte le proprietà di un insieme, a parte quella di poter essere misurata da un numero cardinale.

	Più precisamente, gli insiemi sono quelle classi che compaiono come elementi di altre classi. Come conseguenza, sugli insiemi è possibile effettuare più operazioni che sulle classi. Operazioni che tipicamente non è possibile fare sulle classi sono: la classe quoziente di una relazione d'equivalenza su una classe data, e la classe di tutte le sottoclassi a una classe data.
	D'altra parte, se \(\ctA,\ctB\) sono classi, è lecito costruire la classe prodotto \(\ctA\times\ctB\), e considerare \emph{funzioni tra classi} \(F : \ctA\fun\ctB\), cioè sottoclassi \(F\) del prodotto \(\ctA\times\ctB\) che sono funzionali: per ogni elemento \(A\) della classe \(\ctA\), esiste un unico elemento \(B\in\ctB\) con \((A,B)\in F\), questo elemento si denota \(FA\), e a tutti gli effetti \(F\) si comporta come una funzione. Di nuovo, il linguaggio preciso (il linguaggio \textsf{NBG} della teoria degli insiemi di von Neumann, Bernays e G\"odel) che formalizza queste costruzioni verrà esposto nell'appendice \ref{fondamenti}. Consigliamo però a chi legge di finire prima questo capitolo: l'imprecisione iniziale non pregiudica né il rigore, né la comprensione degli argomenti che seguono.
\end{remark}
\index{Categoria}
\begin{definition}[Categoria]\label{def_categ}
	Una \emph{categoria} \(\ctC\) consiste dei seguenti dati:
	\begin{enumtag}{c}
		\item\label{c_1} una classe \(\ctC_0\) i cui elementi chiamiamo \emph{oggetti}, di solito indicati con lettere latine maiuscole: \(A\), \(B\), \(X\), \(Y\),\dots
		\item\label{c_2} una classe \(\ctC_1\) i cui elementi chiamiamo \emph{morfismi} o \emph{frecce}, di solito indicati con lettere latine minuscole: \(f,g,h\),\dots, \(u,v,w\)\dots
		\item\label{c_3} Ad ogni morfismo \(f\) corrispondono due oggetti \(\dom{f}\), \(\cod{f}\) chiamati \emph{dominio} e \emph{codominio}. Per denotare il fatto che \(f\) ha dominio \(X\in\ctC_0\) e codominio \(Y\in\ctC_0\), scriveremo \(f\colon X\to Y\), o in \emph{forma diagrammatica},
		\[\begin{tikzcd} X \ar[r, "f"] & Y. \end{tikzcd}\]
		\item\label{c_4} Ogni oggetto \(X\) ha un morfismo \(\id_X\colon X\to X\) chiamato \emph{identità}.
		\item\label{c_5} Per ogni coppia di morfismi \(f\colon X\to Y\) e \(g\colon Y\to Z\), cioè tali che \(\cod{f}=\dom{g}\), è dato un morfismo \(g\cmp f:X\to Z\) chiamato \emph{composizione di \(f\) e \(g\)}. Graficamente:
		\[
		\begin{tikzcd}
			X \ar{r}{f}
			\ar[rounded corners,out=-45, in=225]{rr}[swap]{g\cmp f}
			& Y \ar{r}{g} & Z \\
			&&
		\end{tikzcd}
		\]
		(La notazione diagrammatica implica che \(\dom{g\cmp f}=\dom{f}\) e \(\cod{g\cmp f}=\cod{g}\).)
	\end{enumtag}
	A questi dati, chiediamo di soddisfare le seguenti proprietà:
	\begin{enumtag}{p}
		\item \label{cp_1} \emph{Assioma di identità}: per ogni morfismo \(f:X\to Y\), valgono le uguaglianze
  \[f\cmp\id_X=f=\id_Y\cmp f.\]
		\item \label{cp_2} \emph{Assioma di associatività}: dati oggetti \(X,Y,Z,W\) e morfismi \(f:X\to Y\), \(g:Y\to Z\) e \(h:Z\to W\), vale l'identità
  \[h\cmp (g\cmp f) = (h\cmp g)\cmp f.\]
	\end{enumtag}
\end{definition}
\begin{notation}
	Dati due oggetti \(X\) e \(Y\), indichiamo con \(\Hom{\ctC}(X,Y)\) la classe di morfismi da \(X\) a \(Y\). Altre notazioni, come \(\varHom(X,Y)\) o \(\vvarHom{\ctC}(X,Y)\), sono ugualmente comuni, e motivate dal fatto che le frecce di una categoria astraggono la nozione di \emph{omomorfismo} tra insiemi strutturati (si veda \ref{ex_cat_monoidi} e più in generale l'esempio \ref{ex_cat_sigma_strutture}). Questa notazione renderà chiara quella in \ref{ex_hom_funtore} per i \emph{funtori hom}. \`E anche comune indicare la classe $\ctC_1$ dei morfismi di una categoria con $\hom(\ctC)$ o $\mathrm{ar}(\ctC)$.
	% TODO: mettere in una definizione sola "tutte" le categorie di strutture algebriche.
\end{notation}
\begin{remark}\label{cor_def_categ}
	Si osservi che dalla definizione appena data discendono alcuni corollari:
	\begin{itemize}
		\item Le classi \(\Hom{\ctC}(X,Y)\) al variare di \((X,Y)\in\ctC_0\times\ctC_0\) sono tutte disgiunte, perché la corrispondenza \(\ctC_1 \to \ctC_0\times\ctC_0\) che manda \(f\) nella coppia \((\dom{f},\cod{f})\) è una funzione (e allora la sua \emph{fibra} sopra \((X,Y)\) è proprio \(\Hom{\ctC}(X,Y)\), disgiunto da \(\Hom{\ctC}(X',Y')\));
		\item come conseguenza immediata, se \(X\ne X'\) sono oggetti diversi, le identità \(\id_X,\id_{X'}\) sono morfismi diversi: si può cioè pensare la corrispondenza \(X\mapsto \id_X : \ctC_0\to\ctC_1\) come una funzione \emph{iniettiva} tra classi;
		\item la composizione consta di una funzione \emph{parziale} (si noti la diversa freccia)
		\[\xymatrix{\_\cmp\_ : \ctC_1 \times \ctC_1 \ar@^{->}[r] & \ctC_1}\]
		il cui dominio è la sotto-classe \(\sum_{XYZ} \{ X \xrightarrow f Y \xrightarrow g Z \}\) di \(\ctC_1 \times \ctC_1\) dei morfismi \emph{contigui} o \emph{componibili}. Dato che i vari \(\Hom{\ctC}(X,Y)\) sono a due a due disgiunti, la composizione \(\_\cmp\_\) si `spezza' in una classe di funzioni
		\[\xymatrix{\_\cmp_{XZ}^Y\_ : \Hom{\ctC}(Y,Z)\times\Hom{\ctC}(X,Y) \ar[r] & \Hom{\ctC}(X,Z)}\]
		dove ciascuna funzione manda \(( X \xrightarrow f Y, Y \xrightarrow g Z )\) in \(g\cmp f\) (in effetti, gli indici che indicano il dominio della particolare funzione \(\_\cmp_{XZ}^Y\_\) vengono \emph{sempre} lasciati sottintesi, e si scrive solo \(\_\cmp\_\)).
	\end{itemize}
\end{remark}
\begin{remark}[A proposito dell'ordine di composizione]\label{sulla_compo}
    % \Todo{}
La forma diagrammatica di rappresentazione di un morfismo in \ref{c_3} pone un problema notazionale riguardo la composizione di morfismi in \ref{c_5}; in matematica è una convenzione \emph{quasi} universale applicare le funzioni a sinistra degli argomenti, cioè scrivere $g(f(x))$ per denotare che la prima funzione ad \emph{agire} su un elemento $x\in X$ è $f$, e la seconda è $g$. Ma $g$ è la prima funzione a essere \emph{letta} enunciando la composizione di $f$ con $g$ (che non ha senso se non come in \ref{c_5}, quando $X\ne Z$): come conseguenza, i diagrammi si leggono `al contrario' rispetto a come si disegnano, scrivendo per primo il morfismo che viene composto per ultimo.  Sorprendentemente, questa semplice inversione è sufficiente a confondere una minoranza di matematici, che vorrebbero applicare le funzioni a destra del loro argomento, scrivendo cioè $(xf)g$ per ciò che noi denotiamo $g(fx)$. Essendo il problema generato da una scelta del tutto soggettiva e legata al progresso storico (la scrittura in occidente procede da sinistra a destra, e leggiamo $\cos(z)$, `il coseno di $z$', e non brutture come $(x)\!\cos$ o $x^{\cos}$, `l'elemento $x$ su cui ha agito la funzione coseno') è impossibile stabilire chi ha ragione o torto: si può solo fare una scelta e mantenerla coerentemente. Tra le varie soluzioni possibili, la più elementare è rovesciare il verso delle frecce, cioè scrivere
\[
\begin{tikzcd}
	Z
	& Y \ar[l, "g"'] & X \ar[l, "f"']
\end{tikzcd}
\]
per la composizione che appare in \ref{c_5} (e fare altrettanto per diagrammi più complessi): ora la composizione di $g$ e di $f$ è effettivamente $g\cmp f$; però questo sposta semplicemente il problema, dato che ora le frecce scorrono in senso contrario al verso di lettura\dots
\end{remark}
\begin{definition}[Categoria piccola, categoria localmente piccola]
	\index{Categoria!--- piccola}
	\index{Categoria!--- loc. piccola}
	Quando la classe \(\ctC_1\) è un insieme, come conseguenza della seconda osservazione fatta, è un insieme anche \(\ctC_0\) (dato che una sottoclasse di una classe che è un insieme, è a sua volta un insieme): in tal caso chiamiamo la categoria \(\ctC\) \emph{piccola}; per contro %: l Una
 una categoria che non è piccola si dice \emph{grande}, \emph{larga} o simili.

	Invece, \(\ctC\) si dice \emph{localmente piccola} se dati ogni due oggetti \(X\) e \(Y\), la classe \(\Hom{\ctC}(X,Y)\) dei morfismi da \(X\) a \(Y\) è un insieme.
\end{definition}
 Le categorie \(\ctFin\) e \(\bbR\emdash\ctVect\) definite sopra sono piccole, perché abbiamo limitato enormemente la loro classe di oggetti; non abbiamo considerato \emph{tutti} gli insiemi finiti, ma solo quelli della forma \(\{1,\dots,n\}\) per $n\ge 0$; non tutti gli spazi vettoriali, ma solo quelli della forma $\bbR^n$ per $n\ge 0$. Come conseguenza, la classe $\ctFin_1$ dei morfismi di $\ctFin$ è un sottoinsieme di
 \(\bigcup_{n,m\ge 0}2^{n\times m}\)
 (fatto da quelle relazioni $R\subseteq n\times m$ che sono funzioni, si veda \ref{}), ed è quindi un insieme.

 La categoria di \emph{tutti} gli insiemi finiti non è piccola (perché c'è una classe propria anche solo di insiemi con un singolo elemento: ogni insieme $x$ vi compare come il singoletto $\{x\}$), ma è localmente piccola, perché fissati due insiemi \(X,Y\), la collezione delle funzioni \(f : X\to Y\) è contenuta (stessa idea di prima) in \(2^{X\times Y}\), e quest'ultimo è un insieme. La differenza tra le due situazioni è che questa volta l'unione \(\bigcup_{X,Y}2^{X\times Y}\) è indiciata su una classe propria, e quindi è una classe propria.
\begin{remark}
	Gli assiomi di categoria non impediscono di costruire `categorie' dove \(\ctC_0\) è un insieme (per esempio, finito) e dove alcuni o tutti \(\Hom{\ctC}(X,Y)\) sono classi proprie; queste costruzioni sono però relativamente innaturali, e non ne parleremo mai. In effetti, eviteremo di considerare anche le categorie grandi che non sono localmente piccole, di cui parleremo solo per mostrarne l'esistenza (ne risentirebbe irrimediabilmente il capitolo 4 del libro, e molti altri risultati). Perciò, da ora in poi adottiamo la convenzione che \emph{categoria}, senz'altro aggiungere, significhi sempre \emph{categoria localmente piccola}.
\end{remark}
Concludiamo con un lemma apparentemente banale, ma che sarà utile in seguito (precisamente, nella dimostrazione di \ref{cat_sonomon}).
\begin{lemma}\label{lem_end_monoide}
	Sia \(\ctC\) una categoria, \(A\in\ctC_0\) un suo oggetto; allora \(M=\Hom{\ctC}(A,A)\) è un monoide, con l'identità \(\id_A\) come elemento neutro e la composizione \(\cmp\) come prodotto.
	Indicheremo questo monoide come \(\End[\ctC]{A}\), o semplicemente come \(\End{A}\).
\end{lemma}
\begin{proof}
	La composizione è un'operazione associativa
	\[\begin{tikzcd}
		M\times M \ar[r, "\cmp"] & M
	\end{tikzcd}\]
	per \ref{cp_2}, e il fatto che \(f\cmp \id_A=f=\id_A\cmp f\) segue da \ref{cp_1}, in \ref{def_categ}.
\end{proof}
Nel resto della sezione raccogliamo alcuni esempi classici di categorie, e nella successiva inizieremo a `costruire categorie nuove dalle vecchie', cioè a definire il \emph{prodotto} \(\ctC\times\ctD\) (si veda \ref{def_cat_prodotto}) e la \emph{somma} \(\ctC+\ctD\) di due categorie date in \ref{def_cat_somma}, le categorie \emph{comma} \(\ctC/X\) e \emph{co-comma} \(X/\ctC\) su di un oggetto \(X\in\ctC_0\) in \ref{def_cat_cocomma} (anche dette il taglio di \(\ctC\) sopra \(X\) e sotto \(X\)), la categoria \emph{opposta} \(\ctC^\op\) di \(\ctC\) in \ref{def_cat_opp}, e molte altre.

La definizione di categoria data in \ref{def_categ} è estremamente generale, ed è quindi `quasi vuota' di intuizione.

C'è una tripartizione essenziale nella interpretazione della definizione, che chi legge dovrebbe apprezzare.
\begin{itemize}
	\item Le categorie sono `forme' per oggetti combinatori (dei \emph{grafi diretti}) dove lati contigui possono essere composti, rispetto a una regola di composizione che è associativa, quando definita, e ha degli `elementi identità', cioè un particolare laccio (un lato il cui dominio e codominio coincidono) per ogni vertice. In quanto tali, le categorie sono solo particolari strutture con operazioni che soddisfano proprietà. Le categorie (piccole) quindi sono esse stesse degli oggetti matematici che possiamo studiare alla stregua di ogni altro oggetto matematico (e raccogliere in una loro totalità: ma questo discorso sarà approfondito solo molto più tardi, si veda \ref{ex_cat_cat}). Questo punto di vista si apprezza particolarmente nella \autoref{ssec:categorie_strutture}.
	\item Le categorie sono, allo stesso tempo, strutture ideate per raccogliere una totalità di oggetti matematici di un dato tipo (`tutti' i gruppi, `tutti' gli spazi topologici, ecc.) in una classe \(\ctC\) (in \emph{due} classi: gli oggetti e i morfismi) e studiarne le proprietà globali: le categorie (larghe) quindi sono `universi del discorso matematico', in ciascuno dei quali è possibile fare matematica: questo punto di vista si apprezza nella \autoref{ssec:categorie_universi} e particolarmente in \ref{ex_cat_sigma_strutture} e in \ref{ex_cat_top}.
	\item D'altra parte, alcune strutture note ed importanti per altre ragioni, come ad esempio i monoidi e gli insiemi preordinati, ma anche gli insiemi su cui è fissata una relazione di equivalenza, sono \emph{essi stessi} esempi di categorie. Le categorie sono quindi una generalizzazione simultanea di queste, ed altre, strutture matematiche, unificate da una stessa definizione complessiva.
\end{itemize}
Si può imparare la teoria delle categorie in modo proficuo solo abbracciando \emph{tutti} questi punti di vista, e ciò anche perché un dato ambito della matematica si occupa o `vive' in una (o più) categorie. Per esempio, l'algebra lineare studia le categorie \(\bbF\emdash\ctVect\) di spazi vettoriali, eventualmente su diversi campi di base (come \(\bbQ,\bbR,\bbC\), o un campo finito). La topologia generale studia le categorie di \emph{spazi topologici} (e i morfismi funzioni continue), mentre la topologia differenziale si restringe alla categoria i cui oggetti sono \emph{varietà} (e i morfismi funzioni differenziabili), oppure studia particolari categorie di strutture ordinate (perché l'insieme degli aperti di uno spazio topologico \(X\) con una topologia \(\tau \subseteq 2^X\) forma, con le operazioni di unione e intersezione, una struttura algebrica detta \emph{algebra di Heyting}, si veda \cite{Esakia2019}).

D'altra parte l'analisi funzionale studia quegli spazi \emph{vettoriali} (di dimensione infinita) che sono dotati di una \emph{topologia} metrizzabile (e determinata da un filtro di intorni dello zero), ed eventualmente di un prodotto scalare; la teoria della rappresentazione studia certi omomorfismi in un gruppo di matrici, o le proprietà \emph{topologiche-differenziali} di questi gruppi di matrici (il gruppo ortogonale speciale, il gruppo dei quaternioni di norma 1, ecc.). Per comprendere queste strutture è spesso necessario spostarsi di categoria in categoria.

La seconda di queste osservazioni non è meno importante: porterà alla definizione di funtore in \ref{def_funtore} come \emph{omomorfismo tra categorie}, alla definizione di \emph{diagramma} in \ref{def_diagramma} come immagine di una categoria piccola in una categoria, non necessariamente piccola, e alla definizione di trasformazione naturale in \ref{sec_tnat}, vista come \emph{omomorfismo tra funtori}.
\section{Esempi di categorie nella pratica matematica}\label{sec_esempi_cats}
Iniziamo ora a dare degli esempi di categorie piccole partendo dall'esempio più semplice, anche quello più banale.
\subsection{Categorie come forme}\label{ssec:categorie_forme}
\index{Categoria!--- vuota}
\begin{example}\label{ex_cat_vuota}
	La \emph{categoria vuota} o \emph{categoria iniziale} \(\ctInit\) non ha oggetti né morfismi. Più formalmente, \(\ctC_0,\ctC_1\) sono le classi vuote, e non è necessario specificare altra struttura per soddisfare (vacuamente) tutti gli assiomi di categoria.
\end{example}
\index{Categoria!--- terminale}
\begin{example}\label{ex_cat_term}
	La \emph{categoria terminale} \(\ctTerm\) ha un solo oggetto \(\bullet\), e un unico morfismo \(\id_\bullet : \bullet\to\bullet\) che fa da identità. Chiaramente, non si può fare altro che porre \(\id_\bullet\cmp\id_\bullet=\id_\bullet\), e tutti gli assiomi di categoria sono soddisfatti.
\end{example}
\index{Categoria!--- discreta}
\`E sempre possibile dotare un insieme \(A\) della topologia discreta (o `massimale'), dove ogni sottoinsieme \(U\) di \(A\) è aperto, e della topologia indiscreta (o `minimale'), dove solo \(\varnothing\) e \(A\) sono aperti. Similmente, esistono due maniere, massimale e minimale, di considerare un insieme\footnote{Riguardo al problema se sia possibile dotare una classe propria della struttura di categoria discreta, la questione \emph{sembra} banale, ma in realtà tutt'altro che semplice da discutere: sebbene non ci sia alcun apparente problema ad assumere l'esistenza di classi proprie discrete, queste spesso vengono proibite \emph{ab imis} assumendo un assioma a parte in aggiunta ai soliti della teoria degli insiemi/classi, detto \emph{principio di Vop\v enka}: questo assioma afferma, precisamente, che non esistono sottoclassi proprie discrete nella classe propria di tutti gli insiemi.} \(A\) una categoria.
\begin{example}\label{ex_cat_discreta}
	Dato un insieme \(A\), la \emph{categoria discreta} su \(A\), denotata \(A^\delta\), ha per oggetti gli elementi \(a\in A\), un unico morfismo identità \(\id_a : a\to a\) per ogni \(a\), e nessun altro. La composizione è forzata a essere definita solamente tra identità, nel modo più ovvio possibile, e tutti gli assiomi di categoria sono ovviamente soddisfatti.
\end{example}
\begin{example}\label{ex_cat_codiscreta}
	Dato un insieme \(A\), la \emph{categoria codiscreta} su \(A\), denotata \(A^\chi\) ha per oggetti gli elementi \(a\in A\), per ogni coppia di oggetti \(a,a'\in A\) un unico morfismo \(u_{aa'}:a\to a'\), e la composizione è definita da \(u_{a'a''}\cmp u_{aa'}=u_{aa''}\) (in particolare, da questo segue che esiste un unico elemento \(\id_a=u_{aa}\in A^\chi(a,a)\)).
\end{example}
Alcune categorie che è spesso utile considerare si rappresentano mediante dei grafi:
\index{Categoria!--- freccia generica}
\begin{example}\label{ex_cat_freccia}
	La categoria \emph{freccia generica} ha due oggetti \(0,1\) e un unico morfismo non identità \(u : 0\to 1\) (che di solito non ha nome). La composizione è forzata a essere definita solamente tra le identità ed \(u\), nell'unico modo ovvio, e tutti gli assiomi di categoria sono banalmente soddisfatti.
\end{example}
\index{Categoria!--- catena generica}
\begin{example}\label{ex_cat_catena}
	Più in generale, la categoria \(\Delta[n]\) detta \emph{catena generica di lunghezza \(n+1\)} è definita come segue:
	\begin{itemize}
		\item gli oggetti di \(\Delta[n]\) sono gli elementi di \(\{0,\dots,n\}\) (ci sono quindi \(n+1\) oggetti, per ogni \(n\ge 1\));\footnote{A volte è utile adottare la convenzione per cui quando \(n=-1\), l'insieme \(\{0,\dots,n\}\) è vuoto, e quindi la categoria `catena di lunghezza \(0\)' è la categoria vuota \(\ctInit\) di \ref{ex_cat_vuota}.}
		\item C'è un unico morfismo \(i\to j\) in \(\Delta[n]\) se e solo se \(i\le j\), di modo che esista un unico morfismo \(i\to i\) (l'identità) per ogni \(i\in\{0,\dots,n\}\), e un unico morfismo \(i\to i+1\) per \(i\in\{0,\dots,n-1\}\); in particolare l'unico morfismo \(i\to j\) è ottenuto dalla composizione
		\[i\to i+1\to\dots\to j\]
	\end{itemize}
	Le categorie \(\Delta[n]\) per \(=0,1,2,3\) sono rappresentate in figura \ref{fig:le_delta}.
	\begin{figure}[h]
		\begin{center}
			\begin{tikzpicture}[
					x=5em, y=5em,
					wrap/.style={fill=black!5, rounded corners},
					edge/.style={-latex},
				]
				\begin{scope}[xshift=0em,yshift=0.433*5em]
					\node (0D0) at (0.0,0) {0};
				\end{scope}
				\begin{scope}[xshift=4em,yshift=0.433*5em]
					\node (1D0) at (0.0,0) {0};
					\node (1D1) at (1.0,0) {1};
					\draw[edge] (1D0) -- (1D1);
				\end{scope}
				\begin{scope}[xshift=13em]
					\node (2D0) at (0.0,0) {0};
					\node (2D1) at (1.0,0) {1};
					\node (2D2) at (0.5,0.866) {2};
					\draw[edge] (2D0) -- (2D1);
					\draw[edge] (2D0) -- (2D2);
					\draw[edge] (2D1) -- (2D2);
				\end{scope}
				\begin{scope}[xshift=22em]
					\node (3D0) at (0.0,0) {0};
					\node (3D1) at (1.0,0) {1};
					\node (3D2) at (0.5,0.866) {2};
					\node (3D3) at (0.5,0.3) {3};
					\draw[edge] (3D0) -- (3D1);
					\draw[edge] (3D0) -- (3D2);
					\draw[edge] (3D1) -- (3D2);
					\draw[edge] (3D0) -- (3D3);
					\draw[edge] (3D1) -- (3D3);
					\draw[edge] (3D2) -- (3D3);
				\end{scope}
				\begin{scope}[on background layer]
					\path node[wrap, fit=(0D0)] (W0) {};
					\path node[wrap, fit=(1D0)(1D1)] (W1) {};
					\path node[wrap, fit=(2D0)(2D1)(2D2)] (W2) {};
					\path node[wrap, fit=(3D0)(3D1)(3D2)(3D3)] (W3) {};
					\node [below=2.5em of W0] (L) {$\Delta[0]$};
					\node at (L -| W1) {$\Delta[1]$};
					\node at (L -| W2) {$\Delta[2]$};
					\node at (L -| W3) {$\Delta[3]$};
				\end{scope}
			\end{tikzpicture}
		\end{center}
		\caption{Le categorie \(\Delta[0], \dots,\Delta[3]\). Si noti che non abbiamo rappresentato le frecce identità dei vari oggetti, e che la struttura di categoria che risulta è completamente determinata dalla struttura di grafo diretto. Ovviamente, \(\Delta[0]\) è la categoria terminale di \ref{ex_cat_term}, \(\Delta[1]\) è la freccia generica di \ref{ex_cat_freccia}. La categoria \(\Delta[n]\) spesso si chiama un \(n\)-\emph{simplesso}. }
		\label{fig:le_delta}
	\end{figure}\todo{questo disegno al momento sembra rotto, non so perché}
\end{example}
\index{Categoria!--- isomorfismo generico}
\begin{example}\label{ex_cat_iso}
	La categoria \emph{isomorfismo generico} \(\ctIso\) ha due oggetti ed esattamente una freccia fra ciascuna coppia di essi:
	\[\xymatrix@C=7ex{0 \ar@<.7ex>[r]^u \ar@(dl,ul)[] & 1 \ar@<.7ex>[l]^{u^{-1}} \ar@(ur,dr)[]}\]
	I due endomorfismi su \(0\) ed \(1\) devono quindi essere le identità, ed entrambe le composizioni dei morfismi non identità \(u\) e \(u^{-1}\) sono forzate ad essere l'identità sull'oggetto corrispondente. \`E quindi la categoria con due oggetti ed un unico isomorfismo fra di essi.
\end{example}
\index{Categoria!--- doppia freccia generica}
\begin{example}\label{ex_cat_doppiafreccia}
	La categoria \emph{doppia freccia generica} ha due oggetti \(0,1\) ed esattamente due morfismi non identità e paralleli \(s,t : 0\to 1\)%
	%;anche in questo caso, tali morfismi di solito non hanno nome % ce l'hanno: s e t
	. La composizione è definita, ancora una volta, nell'unico modo ovvio, chiedendo che \(x\cmp \id_0=x=\id_1\cmp x\) per \(x\in\{s,t\}\).

	La doppia freccia è la `forma generica' di un grafo diretto (si veda \ref{ex_cat_libera}), dato che una coppia di funzioni \(s,t: X_1 \rightrightarrows X_0\) tra due insiemi consta precisamente di un digrafo che ha \(X_0\) per insieme dei vertici e \(X_1\) per insieme dei lati.
\end{example}
\index{Categoria!--- quadrato commutativo generico}
\begin{example}\label{ex_quadcuboncubo}
	La categoria \emph{quadrato commutativo generico} \(P[2]\) ha 4 oggetti
	\[\{(00),(10),(01),(11)\} \]
	e un morfismo \((ij)\to(kl)\) se e solo se \(i\le k\) e \(j\le l\); rappresentata graficamente, si tratta della categoria
	\[\begin{tikzcd}
		(00) \ar[r]\ar[d]\ar[dr]& (10)\ar[d] \\
		(01) \ar[r]& (11)
	\end{tikzcd}\]
	La composizione è forzata a essere definita cosicché la composizione \((00)\to (01)\to (11)\) sia uguale alla composizione \((00)\to (10)\to (11)\), e quindi la categoria \(P[2]\) rappresenta la forma generica di un \emph{quadrato commutativo}.
\end{example}
\begin{remark}\label{cos_diag_comm}
    \Todo{Che cos'è esattamente un diagramma commutativo?}
\end{remark}
\begin{remark}
	Si noti che \(P[2]\) può essere pensato come un insieme ordinato, e precisamente l'insieme dei sottoinsiemi di un insieme con due elementi \(\{a,b\}\); in tal senso \((ij)\) rappresenta la funzione caratteristica \(\chi_U : \{a,b\}\to \{0,1\}\) di un sottoinsieme \(U\subseteq \{a,b\}\), nel senso che ad esempio \((10)=\{a\}, (00)=\varnothing\), eccetera. Si osservi anche che \(P[2]\) è l'insieme parzialmente ordinato \(\{0\le 1\}\times \{0\le 1\}\), dotato dell'\emph{ordine prodotto} (si veda \ref{ord_sonocat} e \ref{cat_sonopos}).

	Quindi possiamo definire induttivamente
	\[P[0] = \Delta[0], \qquad P[n+1] = P[n]\times \Delta[1]\]
	o (equivalentemente, nel senso che questa seconda definizione dà per ogni \(n\ge 0\) un \(P'[n]\) isomorfo a \(P[n]\) come insieme ordinato) \(P'[n] = 2^{\{1,\dots,n\}}\), cosicché \(P[n]\) è il `cubo commutativo \(n\)-dimensionale generico': alcune \(P[n]\) per \(n=0,1,2,3\) sono raffigurate in \ref{fig_n_cubo}.
\begin{figure}[h]
	\begin{center}
    \begin{tikzpicture}[x=8em, y=8em,
        wrap/.style={fill=black!5, rounded corners},
        edge/.style={-latex},
        subset/.style={font=\small\ttfamily},
      ]
      \begin{scope}[xshift=0em,yshift=4em]
        \node[subset] (0D0) at (0.0,0) {0};
      \end{scope}
      \begin{scope}[xshift=2em,yshift=4em]
        \node[subset] (1D0) at (0.3,0) {0};
        \node[subset] (1D1) at (0.7,0) {1};
        \draw[edge] (1D0) -- (1D1);
      \end{scope}
      \begin{scope}[xshift=10em]
        \node[subset] (2D0) at (0.3,0.3) {00};
        \node[subset] (2D1) at (0.7,0.3) {01};
        \node[subset] (2D2) at (0.3,0.7) {10};
        \node[subset] (2D3) at (0.7,0.7) {11};
        \draw[edge] (2D0) -- (2D1);
        \draw[edge] (2D0) -- (2D2);
        \draw[edge] (2D2) -- (2D3);
        \draw[edge] (2D1) -- (2D3);
      \end{scope}
      \begin{scope}[xshift=22em]
        \node[subset] (3D0) at (0.3,0.3) {000};
        \node[subset] (3D1) at (0.7,0.3) {001};
        \node[subset] (3D2) at (0.3,0.7) {010};
        \node[subset] (3D3) at (0.7,0.7) {011};
        \node[subset] (3D4) at (0,0) {100};
        \node[subset] (3D5) at (1,0) {101};
        \node[subset] (3D6) at (0,1) {110};
        \node[subset] (3D7) at (1,1) {111};
        \draw[edge] (3D0) -- (3D1);
        \draw[edge] (3D0) -- (3D2);
        \draw[edge] (3D2) -- (3D3);
        \draw[edge] (3D1) -- (3D3);
        \draw[edge] (3D4) -- (3D5);
        \draw[edge] (3D4) -- (3D6);
        \draw[edge] (3D6) -- (3D7);
        \draw[edge] (3D5) -- (3D7);
        \draw[edge] (3D0) -- (3D4);
        \draw[edge] (3D1) -- (3D5);
        \draw[edge] (3D2) -- (3D6);
        \draw[edge] (3D3) -- (3D7);
      \end{scope}
      \begin{scope}[on background layer]
        \path node[wrap, fit=(0D0)] (W0) {};
        \path node[wrap, fit=(1D0)(1D1)] (W1) {};
        \path node[wrap, fit=(2D0)(2D1)(2D2)] (W2) {};
        \path node[wrap, fit=(3D4)(3D5)(3D6)(3D7)] (W3) {};
        \node [below=5em of W0] (L) {$P[0]$};
        \node at (L -| W1) {$P[1]$};
        \node at (L -| W2) {$P[2]$};
        \node at (L -| W3) {$P[3]$};
      \end{scope}
    \end{tikzpicture}
  \end{center}
	\caption{Le categorie \(P[n]\) per \(n=0,1,2,3\). La categoria \(P[n]\) si chiama un \(n\)-\emph{cubo}.}
	\label{fig_n_cubo}
\end{figure}
\end{remark}
\index{Categoria!--- spanna generica}
\index{Categoria!--- cospanna generica|see {spanna generica}}
\begin{example}[Spanne e cospanne generiche]\label{ex_spancospan}
	La categoria \emph{spanna generica}
	\(\Lambda^2_0\) ha tre oggetti \(0,1,2\) e due morfismi non identità. Si raffigura come segue:\footnote{La scelta del termine si può intendere motivata dal fatto che una spanna è: la distanza (misurata dai codomini delle due frecce verso $0,1$) tra punta del pollice e punta del mignolo di una mano aperta adulta; l'arcata di un ponte (il cui punto più alto è l'oggetto $0$); le due braccia di un giogo (in inglese antico \emph{ġespan} era un giogo, un collare o per estensione un bracciale); un arcolaio (le cui braccia sono proprio $1\leftarrow 0\to 2$; quest'ultima etimologia è dalla radice proto-indoeuropea \emph{*(s)penh$_1$-}, da cui derivano varie parole nel campo semantico di ciò che è capace di ruotare attorno a un asse).}
	\[\begin{tikzcd}
		1 & 0 \ar[r]\ar[l] & 2
	\end{tikzcd}\]
	La composizione è definita solamente quando almeno una delle due frecce è l'identità, ed è forzata da questo fatto.
	
	Dualmente, la categoria \emph{cospanna generica} \(\Lambda^2_2\) ha tre oggetti \(0,1,2\) ma i due morfismi non identità puntano verso \(2\) invece che uscire da \(0\):
	\[\begin{tikzcd}
		0\ar[r] & 2 & 1\ar[l]
	\end{tikzcd}\]
	Di nuovo, la composizione è definita solamente quando almeno una delle due frecce è l'identità.

	Si noti che \(\Lambda^2_2\) si ottiene da \(\Delta[2]\) `rimuovendo la freccia \(0\to 1\)', e analogamente \(\Lambda^2_0\) si ottiene rimuovendo la freccia \(1\to 2\).
	
	Più in generale, sia \(S\) un insieme; la categoria \emph{\(S\)-spanna generica} \(S^\lhd\) è definita come segue:
	\begin{itemize}
		\item gli oggetti di \(S^\lhd\) sono gli elementi di \(S^+ := S\cup \{-\infty\}\);
		\item esiste un unico morfismo \(f_s : -\infty\to s\), per ogni \(s\in S\).
	\end{itemize}
	La composizione è ancora una volta definita solamente quando almeno una delle due frecce è l'identità. Questo definisce una categoria in cui da un oggetto chiamato `\(-\infty\)' spiccano tante frecce \(f_s\) quanti sono gli elementi di \(S\).
	
	Dualmente, definiamo la categoria \emph{\(S\)-cospanna generica} \(S^\rhd\) come segue:
	\begin{itemize}
		\item gli oggetti di \(S^\rhd\) sono gli elementi di \(S^+ := S\cup \{+\infty\}\);
		\item esiste un unico morfismo \(f_s : s\to+\infty\), per ogni \(s\in S\).
	\end{itemize}
	La composizione è ancora una volta definita solamente quando almeno una delle due frecce è l'identità. Questo definisce una categoria in cui verso un oggetto chiamato `\(\infty\)' puntano tante frecce \(f_s\) quanti sono gli elementi di \(S\).

	Si noti che \(\Lambda^2_0=\{1,2\}^\lhd\) e \(\Lambda^2_2=\{0,1\}^\rhd\).
\end{example}
\index{Categoria!--- libera}
Questi ultimi esempi lasciano supporre che \emph{ogni} grafo \(\ctG\), fatto di un insieme di vertici (o `oggetti') \(V\) e di un insieme di lati (o `morfismi') \(E\) generi una categoria \(F\ctG\). \`E effettivamente così, e la seguente costruzione in forma di esempio formalizza questa idea.
\index{Grafo}
\begin{example}\label{ex_cat_libera}
	Un \emph{multidigrafo} consiste di una coppia di insiemi \(E,V\) dotati di due funzioni \(s,t : E\rightrightarrows V\) che associano ad ogni \emph{lato} \(e\in E\) una coppia ordinata di \emph{vertici} \(s(e),t(e)\in V\) detti il suo dominio o \emph{source} e il suo codominio o \emph{target}, si veda \ref{ex_cat_grafi}. Dato un multidigrafo \(\ctG\) (spesso chiamato semplicemente \emph{grafo diretto}) possiamo definire la \emph{categoria libera} \(F\ctG\) su \(\ctG\) come segue:
	\begin{itemize}
		\item gli oggetti di \(F\ctG\) sono esattamente gli elementi di \(V\);
		\item dati \(u,v\in V\), i morfismi da \(u\) a \(v\) sono i cammini nel grafo diretto che partono da \(u\) e arrivano in \(v\):
		\[\xymatrix{u \ar[r]^{e_1}& x_1 \ar[r]^{e_2}& x_2\ar[r]^{e_3}& \dots\ar[r]^{e_{n-1}}& x_{n-1}\ar[r]^{e_n}& v}.\]
		Più precisamente, per ogni \(n>0\), sia \(C_n\) l'insieme dei cammini di lunghezza \(n>0\)
		\[C_n=\{(e_1,\ldots,e_n)\in E^n \mid t(e_k)=s(e_{k+1}), k=1,\ldots,n-1\}\]
		e sia \(C_0=\{\emptyList_u \mid u\in V\}\) l'insieme dei cammini di lunghezza zero.
		L'insieme dei morfismi di \(F\ctG\) è
		\[\sum_{n\ge0}C_n\]
		Il dominio e codominio di una sequenza \((e_1,\ldots,e_n)\) di lunghezza  \(n>0\) sono rispettivamente \(s(e_1)\) e \(t(e_n)\).
		Il dominio e codominio di un cammino \(\emptyList_u\) di lunghezza zero sono entrambi il vertice \(u\) stesso.
%		fissati due vertici \(u,v\in V\), i morfismi \(u\to v\) sono l'insieme
%		\[\sum_{n\ge0} E(u,x_1)\times E(x_1,x_2)\times\dots\times E(x_n,v)\]
%		di tutte le sequenze ordinate e finite di lati
%		\[ [e_n;\dots;e_1] : u \xto{e_1} x_1 \xto{e_2} x_2\xto{e_3} \dots\xto{e_{n-1}} x_{n-1}\xto{e_n} v\]
%		con la convenzione di scrivere gli elementi della sequenza in ordine inverso\footnote{Questa convenzione segue quella che applica le funzioni `a sinistra', scrivendo $(f(g(x)) = (f\circ g)(x)$, si veda \ref{sulla_compo}.} ed intepretando il caso \(u=v,n=0\) come una sequenza fatta da un laccio `banale' \(\emptyList_u : u\to u\); in più, usiamo la notazione ovvia, \(E(x,y)\subseteq E\) per denotare i lati del grafo di dominio \(x\) e codominio \(y\).
	\end{itemize}
	La composizione di due sequenze \((e_1,\dots,e_n)\) da \(x_0\) a \(x_n\) e \((f_1,\dots,f_m)\) da \(x_n\) a \(x_{n+m}\) è data dalla loro \emph{concatenazione}, ovvero:
	\[(f_1,\dots,f_m)\cmp(e_1,\dots,e_n) = (e_1,\dots,e_n,f_1,\dots,f_m).\]
	Quando è definita, questa operazione è, evidentemente, associativa, e la sequenza vuota $\emptyList_u$ soddisfa l'assioma di identità \ref{cp_1} nella \ref{def_categ}.
 \begin{figure}
     %\centering
     \begin{center}
         \begin{tikzpicture}
 \coordinate (a0) at (0,0);
 \coordinate (a1) at (1,1);
 \coordinate (a2) at (2.5,.75);
 \coordinate (a3) at (3,0);
 \coordinate (a4) at (4,1);
 \coordinate (a5) at (5.75,1.5);
 \coordinate (a6) at (6,0);
 \coordinate (a7) at (8,.5);
 %
 \draw[red!20,line width=5mm, rounded corners, cap=round] (a0) -- (a1) -- (a2) -- (a3) -- (a4);
 \draw[blue!20,line width=5mm, rounded corners, cap=round] (a4) -- (a5) -- (a6) -- (a7);
 %
 \foreach \i in {0,...,7}
 \node (e\i) at (a\i) {$x_\i$};
 \foreach \i in {0,...,6}{
 \edef\ipp{\fpeval{\i + 1}}
 \draw[->] (e\i) -- (e\ipp);
 }
\end{tikzpicture}
     \end{center}
     \caption{Composizione di due morfismi $(e_1,e_2,e_3,e_4)$ e $(f_1,f_2,f_3)$ in $F\ctG$.}
     \label{fig:enter-label}
 \end{figure}
\end{example}
Dopo questa digressione veniamo a due esempi più elaborati, ma molto `concreti', di categorie dove gli oggetti sono numeri naturali:
\index{Categoria!--- dei circuiti}
\begin{handsExample}[La categoria dei circuiti digitali]{tech}\label{ex_cat_circuiti}
	La categoria \(\ctCirc\) ha
	\begin{itemize}
		\item per oggetti i numeri naturali \(0,1,2,\dots\);
		\item l'insieme dei morfismi \(\ctCirc(m,n)\) consiste dell'insieme delle funzioni \(\bbB^n\to \bbB^m\), dove \(\bbB=\{0,1\}\) è l'insieme dei \emph{Booleani}\footnote{L'insieme \(\bbB\) può essere interpretato come: l'insieme degli interi positivi modulo 2, l'insieme degli stati di un singolo bit di informazione; l'insieme \{sì, no\} delle risposte a una domanda; l'insieme \(\{-1,1\}\) dei \emph{segni} assunti dagli elementi dell'immagine di una funzione reale, l'insieme \{acceso, spento\} degli stati di un interruttore, eccetera.} e \(\bbB^0\defeq \{*\}, \bbB^{n+1}\defeq \bbB^n\times \bbB\) sono i prodotti cartesiani iterati di \(\bbB\) con sé stesso.
	\end{itemize}
	Si noti che ogni funzione Booleana \(f : \bbB^n\to\bbB^m\) risulta dal `prodotto' di \(m\) funzioni Booleane \emph{semplici} \(f_1,\dots,f_m : \bbB^n\to\bbB\), di modo che
	\[f(\tup xn,)=(f_1(\tup xn,),\dots,f_m(\tup xn,)).\]
	Tra le funzioni Booleane semplici ci sono certamente le proiezioni canoniche \(\pi_i : \bbB^n\to\bbB :(\tup xn,)\mapsto x_i\), con le quali è possibile caratterizzare le $f_i$ su menzionate: $f_i = \pi_i\cmp f$; è anche possibile definire la mappa diagonale \(\Delta_m:\bbB\to\bbB^m\) come
	\[\Delta_m : x\mapsto (x,\dots,x)\quad m\text{ volte}\]
	cioè mediante le $m$ funzioni semplici identità $x\mapsto x$.

	Sull'insieme dei Booleani è possibile definire le operazioni logiche elementari di disgiunzione, congiunzione e negazione logica, che è possibile rappresentare graficamente con i seguenti diagrammi o `porte' logiche (note a qualsiasi ingegnere elettronico)
	\[\begin{circuitikz}
		\node[font=\tiny, xshift=-3cm, or port, fill=gray!10] (4,0) (or) {\(\text{OR}\)};
		\node[font=\tiny, and port, fill=gray!10] (0,0) (and) {\!\!\(\text{AND}\)};
		\node[font=\tiny, xshift=2.5cm, not port, fill=gray!10] (0,0) (not) {\!\!\(\text{NOT}\)};
		% \node[below=.15cm of or ] (z1) {\(\_\lor\_ : \bbB^2\to\bbB\)};
		% \node[below=.15cm of and] (z3) {\(\_\land\_ : \bbB^2\to\bbB\)};
		% \node[below=.15cm of not] (z2) {\(\_\lnot : \bbB\to\bbB\)};
	\end{circuitikz}\]
	\`E possibile comporre in serie le porte logiche, componendo i morfismi che esse rappresentano, e giustapporle in parallelo, allo stesso modo in cui è possibile considerare circuiti elettrici in serie e in parallelo per costruire strutture complesse come:
	\[
	\begin{circuitikz}[fill=gray!10]
		\draw (0,3) node[american and port] (A) {};
		% \node at (A.bin 1) [ocirc, left]{} ;
		% \begin{scope}
			% \ctikzset{tripoles/american or port/height=1.6}
			\draw (A.out) -- ++(0.5,0) node[american or port,
			number inputs=2, anchor=in 1] (B) {};
			% \node at (B.bin 3) [ocirc, left]{} ;
			% \end{scope}
		\draw (0,1.5) node[american or port] (C) {};
		% \node at (C.bin 2) [ocirc, left]{} ;
		\draw (C.out) |- (B.in 2);
		\draw (B.out) -- ++(.5,0) node[american not port,anchor=in 1] (D) {};
	\end{circuitikz}
	\]
	che rappresenta la funzione Booleana semplice
	\[(x,y,z,w)\mapsto \lnot((x\land y)\lor(z\lor w)).\]
\end{handsExample}
Vale il seguente teorema:
\begin{theorem}\label{circ_thm}
	Ogni funzione Booleana semplice $f :\bbB^n\to\bbB$ è esprimibile come composizione in serie e in parallelo di: proiezioni, mappe diagonali, congiunzioni e negazioni logiche.  %\Todo{qualcosa che dovrebbe essere nel libro di Walters \cite{Walters1992}, da cui ho preso questo esempio}
\end{theorem}
In altre parole l'insieme $\{\text{AND},\text{OR}\}$ è \emph{funzionalmente completo} (o un \emph{insieme universale di porte logiche}). Per una dimostrazione, si veda \cite[Teorema 1.4]{Crama2011}. In termini categoriali, stiamo affermando che un certo insieme di morfismi genera, insieme alle $\pi_1,\dots,\pi_n$ e $\Delta_n$ per ogni $n\ge 0$, l'intera categoria mediante le operazioni di prodotto e composizione.

Il capitolo \ref{chap_limiti_colimiti} e in particolare la nozione di prodotto, \ref{}, renderanno chiaro il ruolo fondamentale delle mappe $\Delta_n,\pi_1,\dots,\pi_n$ in questa e molte altre costruzioni.
\index{Categoria!--- dei diagrammi di flusso}
\begin{example}[La categoria dei diagrammi di flusso]\label{ex_cat_flusso}
	La categoria \(\ctFlux\) è definita come segue:
	\begin{itemize}
		\item gli oggetti di \(\ctFlux\) sono i numeri naturali \(0,1,2,\dots\);
		\item l'insieme dei morfismi \(\ctFlux(n,m)\) consiste dell'insieme delle funzioni \(\bbR^n\to \bbR^m\), dove \(\bbR\) consta dell'usuale insieme dei numeri reali, e \(\bbR^n = \bbR\times\dots\times\bbR\) è il prodotto cartesiano iterato di \(\bbR\) con sé stesso.
	\end{itemize}
	\Todo{...}
\end{example}
\subsection{Categorie come universi}\label{ssec:categorie_universi}
Proseguiamo con degli esempi di categorie grandi, che giustificano l'intuizione per le categorie come `universi del discorso matematico', ossia come classi i cui elementi sono collegati da relazioni reciproche. L'esempio fondamentale per tutta la sezione è \ref{ex_cat_insiemi}, la categoria di insiemi e funzioni. Usando questa categoria $\ctSet$ come esempio paradigmatico, è possibile costruire
% \`E tuttavia importante notare che \emph{non tutte le categorie larghe astratte sono categorie di insiemi strutturati}.% Una approssimazione conveniente per una categoria larga `astratta' è quindi come un rimpiazzo per la categoria $\ctSet$ e per esempio può essere
\begin{itemize}
	\item categorie di strutture algebriche (gruppi, anelli, algebre su un campo di base\dots); esempi di queste categorie sono \ref{ex_cat_monoidi}, e in generale \ref{ex_cat_sigma_strutture};
	\item categorie di strutture topologiche/ordinate (spazi topologici, insiemi parzialmente ordinati); esempi di queste categorie sono \ref{po_wo_to}, \ref{ex_cat_top};
\end{itemize}
e insieme a queste, molte altre. Esiste una dicotomia forte tra queste due classi di categorie, che sarà possibile apprezzare una volta introdotti più strumenti.

\`E tuttavia estremamente importante notare che
\begin{quote}
	Non tutte le categorie larghe si possono vedere come categorie di insiemi strutturati. Ad esempio, la categoria di \ref{ex_cat_hotop} non ha la proprietà di essere \emph{concreta} (si veda \ref{ssec:categorie_strutture}).
\end{quote}
\index{Categoria!--- delle relazioni}
\begin{example}[Insiemi e relazioni]\label{ex_cat_rels}
	La categoria \(\ctRel\) ha
	\begin{itemize}
		\item per oggetti gli insiemi, denotati con le lettere \(A,B,C,\dots\);
		\item per morfismi da \(A\) verso \(B\) tutte le \emph{relazioni} \(R\subseteq A\times B\), ossia i sottoinsiemi del prodotto cartesiano \(A\times B\).
	\end{itemize}
	Una relazione \(R\subseteq A\times B\) e una relazione \(S\subseteq B\times C\) si compongono nella relazione \(S\cmp R\) definita da
	\[(a,c)\in S\cmp R\iff \exists (b\in B) : ((a,b)\in R)\land ((b,c)\in S).\]
	Con questa definizione, si può mostrare che \(T\cmp(S\cmp R)=(T\cmp S)\cmp R\) e che la relazione diagonale \(\{(a,a)\mid a\in A\}\subseteq A\times A\) (ovvero la relazione \(a\,\Delta\,a'\iff a=a'\)) funge da elemento identità per la composizione così definita.
\end{example}
Nell'esempio appena fatto, l'ordine in cui si scrivono i fattori di un prodotto cartesiano è importante, perché se \(R : A\to B\) è una relazione, vogliamo che \(A\) ne sia il dominio, e \(B\) il codominio. \`E però vero che gli insiemi \(A\times B\) e \(B\times A\) sono in biiezione canonica, e quindi si potrebbe pensare di definire una categoria \(\ctRel'\) con gli stessi oggetti di \(\ctRel\), ma con morfismi da \(A\) verso \(B\) le relazioni \(R\subseteq B\times A\). In effetti, questa è la categoria opposta \(\ctRel^\op\) di \(\ctRel\) (si veda \ref{def_cat_opp}), e tra \(\ctRel^\op\) e \(\ctRel\) esiste un isomorfismo (si veda \ref{??}). % aggiungere riferimento a dove faremo vedere questo isomorfismo.
\begin{remark}\label{klext_delle_relazioni}
	Ogni relazione \(R : A\to B\) induce una funzione \(R^* : 2^B\to 2^A\) nel modo che segue: un sottoinsieme \(U\subseteq B\) viene mandato in \(R^*U:=\{x\in A\mid \forall u\in U.(x,u)\in R\}\). In effetti, esiste una analoga funzione \(R_* : 2^A\to 2^B\), definita da \((V\subseteq A) \mapsto R_*V:= \{y\in B\mid \forall v\in V.(v,y)\in R\}\), e tra le due funzioni \(R^*, R_*\) sussiste la relazione
	\[V\subseteq R^*U \iff U\subseteq R_*V\label{aggiunti_in_disguise}\]
	dal momento che il lato sinistro è equivalente a \(\forall v\in V.\forall u\in U.(v,u)\in R\) e il lato destro a \(\forall u\in U.\forall v\in V.(v,u)\in R\). In \ref{rel_danno_aggiunti} questo sarà un esempio elementare di una nozione importante, quella di \emph{aggiunzione} tra due categorie, affrontata per esteso nel capitolo \ref{cap:aggiunti}.
\end{remark}
\index{Categoria!--- degli insiemi}
\index{Categoria!--- degli insiemi finiti|see {--- degli insiemi}}
\begin{example}[Insiemi e funzioni]\label{ex_cat_insiemi}
	La categoria \(\ctSet\) ha
	\begin{itemize}
		\item per oggetti gli insiemi, denotati con le lettere \(A,B,C\dots\);
		\item per morfismi da \(A\) verso \(B\) tutte le funzioni \(f : A\to B\), ossia tutte le relazioni \(F\subseteq A\times B\) con la proprietà che per ogni \(a\in A\) esiste un unico \(b\in B\) tale che \((a,b)\in F\) o, più formalmente, \(F\cap(\{a\}\times B)\) è un singoletto; l'elemento \(b\) in questione si denota \(f(a)\) o \(fa\) e l'insieme \(F = \{(a,fa)\mid a\in A\}\) è il \emph{grafico} o \emph{supporto} della funzione. Queste relazioni sono \emph{totali} (perché sono definite sull'intero dominio \(A\)) e \emph{a valore singolo}.
	\end{itemize}
	Due funzioni \(f : A\to B\), \(g : B\to C\) si compongono alla maniera delle relazioni (e la composizione è ancora una funzione, poiché l'intersezione \((G\cmp F)\cap (\{a\}\times C)\) consta del singoletto \(\{g(f(a))\}\)).

	La relazione diagonale è infine la (relazione sottostante alla) funzione identità.
\end{example}
Evidentemente, possiamo restringerci a considerare la categoria dei soli insiemi \emph{finiti} (così come la categoria \(\ctFRel\) delle relazioni tra insiemi finiti, che la contiene propriamente). Questo è il primo degli esempi motivanti fatti ad inizio capitolo, e in un senso evidente (che sarà precisato dalla definizione \ref{def_subcat}), \(\ctFRel\) è una \emph{sottocategoria} di \(\ctRel\) (e \(\ctFin\) è una sottocategoria di \(\ctSet\), che a sua volta è una sottocategoria di \(\ctRel\), sebbene in un modo non completamente banale).
\index{Categoria!--- delle matrici}
\begin{example}[Categoria delle matrici in \(\bbF\)]\label{ex_cat_matrici}
	Per ogni anello con divisione $\bbF$, posiamo definire la categoria \(\bbF\emdash\ctMat\) delle \emph{matrici a componenti in \(\bbF\)} come quella che ha
	\begin{itemize}
		\item per oggetti i numeri naturali \(0,1,2,\dots\);
		\item per morfismi \(n\to m\) le matrici con \(m\) righe ed \(n\) colonne a coefficienti in \(\bbF\), ossia:
		\[\bbF\emdash\ctMat(n,m) = \matrici mn\bbF = \text{Lin}_{\bbF}(\bbF^n,\bbF^m)\]
		dove \(\bbF^n:=\bbF \times\dots\times\bbF\) è il prodotto cartesiano iterato di \(\bbF\) con sé stesso $n$ volte (quindi $\bbF^0$ contiene il solo vettore nullo), e \(\text{Lin}_{\bbF}(\bbF^n,\bbF^m)\) è l'insieme delle funzioni \(\bbF\)-lineari \(\bbF^n\to\bbF^m\) (che scegliendo su dominio e codominio le basi canoniche, si identifica alle matrici a componenti in $\bbF$ di taglia $m\times n$).
	\end{itemize}
	La composizione è il prodotto di matrici: se \(A : n\to m\) e \(B : m\to p\) sono matrici di entrate \((A_{ij}\mid 1\le i\le m,1\le j\le n)\) e \((B_{rs}\mid 1\le r\le p,1\le s\le m)\), la loro composizione \(BA : n\to p\) è la matrice \(BA\in \matrici pn\bbF\) definita da \((BA)_{ij} = \sum_{k=1}^m B_{ik}A_{kj}\).

	Questa operazione di composizione, come ricorda chiunque abbia studiato l'algebra lineare, è associativa, e la matrice identità \(I_n\in \matrici nn\bbF\) ne è l'elemento identità.
\end{example}
\begin{remark}
    La categoria degli spazi vettoriali e mappe lineari, definita in \ref{}, e la categoria \(\bbF\emdash\ctMat\) ora definita, sono collegate in un senso preciso che sarà chiaro introducendo la nozione di \emph{scheletro} di una categoria in \ref{}: \(\bbF\emdash\ctMat\) si ottiene da $\bbF\emdash\ctVect$ scegliendo un solo oggetto per ogni dimensione (dato che ogni $\bbF$-spazio vettoriale $V$ di dimensione finita su $\bbF$ è isomorfo ad un oggetto di \(\bbF\emdash\ctMat\)).
\end{remark}
Questo appena fatto è il secondo degli esempi motivanti fatti ad inizio capitolo.
\index{Categoria!--- di strutture algebriche}
\begin{example}\label{ex_cat_monoidi}\index{Omomorfismo!---di monoidi}
	Dati due monoidi \(M\) e \(N\), un \emph{omomorfismo di monoidi} \(f:M\to N\) è una funzione \(f:M\to N\) tale che
	\begin{itemize}
		\item \(f(e) = e\), cioè mappa l'elemento neutro di \(M\) in quello di \(N\);
		\item \(f(m\cdot m')=f(m)\cdot f(m')\) per ogni \(m,m'\in M\), cioè rispetta la moltiplicazione.
	\end{itemize}
	In particolare, se \(M\) ed \(N\) sono gruppi, un omomorfismo di monoidi è esattamente un omomorfismo di gruppi.
	Come si può facilmente verificare, l'identità su un monoide è un omomorfismo, e la composizione di omomorfismi è un omomorfismo.
	\begin{itemize}
		\item I monoidi e gli omomorfismi di monoidi formano la categoria \(\ctMon\).
		\item I gruppi e gli omomorfismi di gruppo formano la categoria \(\ctGrp\).
	\end{itemize}
\end{example}
L'idea da trattenere dopo questi primi esempi è che tutte le categorie di insiemi con operazioni che soddisfano, eventualmente, delle equazioni, forma una categoria; sebbene a volte non sia una questione banale scegliere la `giusta' nozione di omomorfismo tra strutture, ci affidiamo alla competenza che gli studi anteriori hanno dato a chi legge nel capire che, anche quando non abbiamo definito precisamente oggetti e morfismi, ci riferiamo alle categorie di strutture algebriche con le loro scelte `ovvie' di omomorfismo come funzione che rispetta (tutta) la struttura algebrica. Un'utile intuizione a riguardo è che in qualsiasi circostanza dove una classe di strutture possieda una nozione di omomorfismo che preserva la specifica di quella struttura, e tale che
\begin{itemize}
	\item l'identità è un omomorfismo;
	\item la composizione di due omomorfismi è ancora un omomorfismo;
\end{itemize}
si riesce a definire la classe degli oggetti e dei morfismi di una categoria. %Gli esempi di strutture algebriche sono tutti di questo tipo, ovviamente; ne esistono altri, che non riguardano le operazioni algebriche: per esempio, la composizione di due mappe monotòne è monotòna, e la composizione di due mappe \emph{proprie} tra spazi di Hausdorff è ancora una mappa propria.

L'\emph{algebra universale} si occupa di rendere preciso il concetto di `insieme dotato di operazioni', codificando una struttura algebrica mediante una \emph{funzione di arietà}:\footnote{Le parole \emph{arietà}, così come \emph{nullario} e \emph{unario} e \(n\)-ario (ma non binario, ternario, quaternario, etc.) sono retroformazioni che il lessico matematico ha introdotto a partire dal suffisso latino \emph{-\={a}rius, -\=aria, -\=arium}, usato per formare aggettivi a partire da nomi o numerali. Una operazione `\(n\)-aria' accetta \(n\) argomenti a dominio.} innanzitutto, si ricordi che una operazione \(n\)-aria su un insieme \(X\) consta di una funzione \(X\times X\times\dots\times X \to X\) dove il prodotto cartesiano è fatto \(n\) volte.
\index{Categoria!---}
\begin{example}\label{ex_cat_sigma_strutture}
	Una \emph{segnatura algebrica} consiste di una coppia \((\Omega, a)\) dove \(\Omega\) è un insieme, e \(a : \Omega \to \bbN\) è una funzione detta \emph{funzione di arietà} che associa a ogni elemento \(\omega \in \Omega\) la sua arietà \(a(\omega)\ge 0\). Un \emph{modello} per una segnatura algebrica \((\Omega,a)\) consiste di un insieme \(X\) e di una funzione \(f_\bullet\) che associa a ogni \(\omega\in\Omega\) una operazione \(f_\omega : X^{a(\omega)} \to X\) di arietà \(a(\omega)\).

	Fissata una segnatura algebrica \((\Omega,a)\) possiamo definire la categoria \(\ctMod(\Omega,a)\) dei suoi modelli come segue:
	\begin{itemize}
		\item gli oggetti di \(\ctMod(\Omega,a)\) sono precisamente i modelli \((X,f_\bullet)\) di \((\Omega,a)\);
		\item fissati due modelli \((X,f_\bullet), (Y,g_\bullet)\) un \emph{omomorfismo} di modelli è una funzione \(h : X\to Y\) con la proprietà che per ogni \(\omega\in\Omega\) si abbia l'uguaglianza
		\[h(f_\omega(\tup x{a(\omega)},)) = g_\omega(\tup {hx}{a(\omega)},)\]
		o in termini diagrammatici, il seguente diagramma commuta.
		\[
		\begin{tikzcd}
			X^{a(\omega)} \ar{r}{h^{a(\omega)}} \ar[d, "f_\omega"'] & Y^{a(\omega)} \ar{d}{g_\omega} \\
			X \ar[r, "f"']& Y
		\end{tikzcd}
		\]
	\end{itemize}
\end{example}
\`E un esercizio tedioso nella manipolazione delle tuple ordinate, ora, dimostrare che gli assiomi di categoria sono tutti soddisfatti. Un esercizio analogamente tedioso è di trovare segnature algebriche opportune che esprimono le categorie dei gruppi, dei monoidi, degli anelli e degli spazi vettoriali ecc.\ come esempi particolari di categorie di modelli di una segnatura algebrica.\footnote{Tedioso, e a volte non proprio banale: ad esempio, come si descrivono le operazioni di moltiplicazione per scalare in uno spazio vettoriale usando la definizione di segnatura algebrica? Si noti anche che la richiesta che un omomorfismo di modelli rispetti \emph{tutti} gli elementi della segnatura a volte è ridondante: ogni omomorfismo di gruppi $f : G\to H$ manda l'identità del dominio nell'identità del codominio perché \(f(e_G)\) deve essere un elemento idempotente di $H$, e preserva gli inversi come corollario.}

\begin{example}[Categoria dei multidigrafi]\label{ex_cat_grafi}\index{Categoria!--- dei grafi}
	Questo esempio rende precise alcune osservazioni fatte in precedenza, \ref{ex_cat_doppiafreccia} e \ref{ex_cat_libera}. La categoria \(\ctdGph\) dei grafi è così definita:
	\begin{itemize}
		\item gli oggetti di \(\ctdGph\) sono i grafi, o più precisamente i \emph{multidigrafi}: un (multidi)grafo \(\ctG = (E,V,s,t)\) consiste di una coppia di insiemi \(E,V\) dotati di due funzioni \(s,t : E\rightrightarrows V\) che associano ad ogni \emph{lato} \(e\in E\) una coppia ordinata di \emph{vertici} \(s(e),t(e)\in V\) detti il suo dominio o \emph{source} e il suo codominio o \emph{target}.
		\item Un omomorfismo di (multidi)grafi \((f_E,f_V) : (E,V,s,t)=\ctG\to\ctG'= (E', V',s',t')\) consiste in una coppia di funzioni \(f_E, f_V\) tali che
		\begin{gather*}
			s'\cmp f_E = f_V\cmp s\\
			t'\cmp f_E = f_V\cmp t
		\end{gather*}
		o in termini diagrammatici, tali che i due quadrati seguenti siano commutativi,
		% https://q.uiver.app/#q=WzAsOCxbMCwwLCJFIl0sWzAsMSwiViJdLFsxLDAsIkUnIl0sWzEsMSwiViciXSxbMiwwLCJFIl0sWzMsMCwiRSciXSxbMiwxLCJWIl0sWzMsMSwiViciXSxbMCwyLCJmX0UiXSxbMiwzLCJzJyJdLFsxLDMsImZfViIsMl0sWzAsMSwicyIsMl0sWzQsNSwiZl9FIl0sWzYsNywiZl9WIl0sWzUsNywidCciXSxbNCw2LCJ0IiwyXV0=
		\[\begin{tikzcd}
			E & {E'} & E & {E'} \\
			V & {V'} & V & {V'}
			\arrow["{f_E}", from=1-1, to=1-2]
			\arrow["{s'}", from=1-2, to=2-2]
			\arrow["{f_V}"', from=2-1, to=2-2]
			\arrow["s"', from=1-1, to=2-1]
			\arrow["{f_E}", from=1-3, to=1-4]
			\arrow["{f_V}"', from=2-3, to=2-4]
			\arrow["{t'}", from=1-4, to=2-4]
			\arrow["t"', from=1-3, to=2-3]
		\end{tikzcd}\]
		cosicché \((f_E,f_V)\) commutano con le funzioni di source e target.
	\end{itemize}
	Si noti che questo significa che questo impone precisamente che per ogni \(e\in E\), \(f_E(e)\) sia un lato in \(E'\) di vertici \(f_V(se), f_V(te)\) rispettivamente.
\end{example}
Evidentemente, possiamo scrivere \(e : x\to y\) per denotare in maniera compatta il fatto che \(e \in E\) è un lato tale che \(se=x,te=y\); allora un omomorfismo di multidigrafi è tale che se \(e : x\to y\), allora \(f_Ee : f_Vx\to f_Vy\).
\begin{example}[Categoria dei grafi]\label{ex_cat_grafi_nondiretti}
	In maniera simile possiamo definire la categoria $\ctGph$ dei grafi non diretti; un grafo non diretto è un insieme $V$ di vertici, su cui sia definita una relazione $E\subseteq V\times V$, simmetrica e irriflessiva (cioè $\forall v\in V.(v,v)\notin E$).

	Un omomorfismo di grafi non diretti è una funzione tra i vertici $f_V : V\to V'$ compatibile con le relazioni $E,E'$: se $(u,v)\in E$, allora $(fu,fv)\in E'$.
\end{example}
\index{Categoria!--- di insiemi ordinati}
\index{Preordine}
\begin{example}\label{ex_cat_ordini}
	Si ricordi da \ref{prelim_def_preset} che un \emph{insieme preordinato} è un insieme \(P\) dotato di una relazione riflessiva e transitiva \(\le\) che si dice la \emph{(relazione d')ordine} su \(P\); una funzione \(f  : (P,\le)\to (Q,\preceq)\) si dice \emph{monotòna} o si dice che \(f\) \emph{preserva l'ordine} se vale
	\[\forall x,y(x\le y\Rightarrow fx\preceq fy).\]

	La categoria \(\ctPOrd\) ha per oggetti e morfismi gli insiemi preordinati e le funzioni monotòne. Chiaramente, l'identità \(\id_P : (P,\le)\to (P,\le)\) è una funzione monotòna, e la composizione di due funzioni monotòne resta monotòna.

	\`E tuttavia importante che l'ordine su \(P\) sia \emph{lo stesso} affinché l'identità sia monotòna: infatti, ogni insieme \(P\) può essere dotato dell'ordine \emph{banale} (dove \(x \mathrel{\le^\delta} y\) se e solo se \(x=y\)) e dell'ordine \emph{caotico} (dove \(x\mathrel{\le^\chi} y\) per ogni \(x,y\in P\)). Se \(P\) ha almeno due elementi, la funzione identità \((P,\le^\chi)\to (P,\le^\delta)\) non è, chiaramente, monotòna.
\end{example}
\index{Ordine parziale}
\begin{remark}[po, wo e to]\label{po_wo_to}
	Una sottoclasse importante di preordini si ottiene imponendo che \(\le\) sia una relazione antisimmetrica; in tal caso il preordine \((P,\le)\) si dice un \emph{insieme parzialmente ordinato} (in inglese, \emph{p}artially \emph{o}rdered \emph{set} o brevemente \emph{poset}). La categoria \(\ctPos\) ha per oggetti i poset e per morfismi le stesse funzioni monotòne di \ref{ex_cat_ordini}.

	Un'altra sottocategoria importante di \(\ctPOrd\) è quella degli insiemi \emph{totalmente ordinati} o \emph{toset}, dove tutti gli elementi sono confrontabili tra loro:
	\[\forall x,y\in P.((x\le y)\lor (y\le x));\]
	da ultimo, una ulteriore sottocategoria importante di \(\ctPOrd\) è quella degli insiemi \emph{bene ordinati} (in inglese, \emph{w}ell \emph{o}rdered sets, o brevemente \emph{wosets}), dove ogni sottoinsieme non vuoto ammette un elemento minimo. Se $(P,\le)$ è un woset, si dice anche che $P$ è un \emph{buon ordine} rispetto a $\le$.
\end{remark}
\index{Categoria!--- degli ordinali}
\begin{example}\label{ex_cat_ordinali}
	Ricordiamo che un insieme $X$ si dice \emph{transitivo} se una qualsiasi delle seguenti condizioni equivalenti è soddisfatta:
	\begin{itemize}
		\item \(x\in X\Rightarrow x\subseteq X\);
		\item \(X\subseteq 2^X\);
		\item \(\bigcup X\subseteq X\).
	\end{itemize}
	Un insieme $X$ si dice un \emph{ordinale} se è transitivo e se ogni sottoinsieme non vuoto \(S\subseteq X\) ammette un elemento \(\in\)-minimo, cioè se \(X\) è bene ordinato dalla relazione \(\in\).

	La categoria \(\ctOrd\) ha per oggetti gli ordinali e per morfismi \(X\to Y\) le funzioni monotòne.
\end{example}
L'importanza della categoria degli ordinali sarà più evidente quando in \ref{sec_funtori} introdurremo la definizione di funtore. Per il momento, ci limitiamo ad alcune osservazioni.
\begin{remark}
	Se \([n]=\{1,\dots,n\}\) è un insieme finito, l'ordinamento \(\{1<2<\dots<n\}\) lo rende un buon ordine nel senso di \ref{po_wo_to}, e quindi \(\Delta[n]\) è in maniera naturale un oggetto di \(\ctPos\), ma anche di \(\ctOrd\); insieme alle funzioni monotòne tra questi insiemi finiti, ciò identifica la sottocategoria di \(\ctOrd\) generata da tutte le catene generiche \(\Delta[n]\) di \ref{ex_cat_catena} con la sottocategoria \(\ctFOrd\) di tutti gli ordinali finiti.
\end{remark}
\begin{remark}
	Senza un assioma dedicato a tale scopo, non si possono generare ordinali più grandi di quelli finiti; al contrario, assumendo che esista almeno un insieme \emph{induttivo} \(N\) (cioè tale che, se \(x\in N\), allora \(x^+:=x\cup\{x\}\in N\)), possiamo `accedere' a ordinali più grandi, e da qui generarne di \emph{molto} grandi (abbastanza da far sì che la categoria \(\ctOrd\) abbia una classe propria di oggetti).

	Questa è una maniera un po' semplificata di introdurre l'ordinale \(\omega\) ottenuto come `limite' di tutti gli ordinali finiti \([n]\): rinviamo chi legge a un corso di logica elementare per approfondire la questione in modo più tecnico, e ci limitiamo a osservare che la dicotomia importante nella definizione di un numero ordinale è la seguente: un ordinale \(\alpha\in\ctOrd_0\) può essere di due tipi: un \emph{successore}, se esiste \(\beta\) tale che \(\alpha=\beta^+\), e un \emph{limite} se, invece, \(\alpha=\bigcup\alpha=\sup\{\gamma\mid \gamma < \alpha\}\).
\end{remark}
\begin{remark}
	L'importanza degli ordinali risiede nella possibilità di dare \emph{definizioni induttive} (per induzione, finita o transfinita) mediante essi: se \(\ctC\) è una classe, una funzione di classe \(H : \ctOrd_0\to\ctC\) si dice \emph{continua} se è univocamente determinata dalla specifica
	\begin{itemize}
		\item di un elemento \(H(0)\in\ctC\) detto base dell'induzione;
		\item di una maniera di calcolare \(H(x^+)\) in funzione di \(H(0), H(1),\dots,H(x)\); questo è il \emph{passo induttivo} della costruzione;
		\item di una maniera di calcolare il `passo limite' dell'induzione, \(H(\lambda)\), in termini di \(H(\gamma)\) per tutti i \(\gamma < \lambda\).
	\end{itemize}
	Una costruzione simile si apprezzerà una volta introdotta la definizione di funtore, dato che una maniera di formalizzare le successioni
	\[\begin{tikzcd}
		A_0 \ar[r] & A_1 \ar[r] & A_2 \ar[r] & \cdots \ar[r] & A_\lambda
	\end{tikzcd}\]
	\emph{eventualmente infinite} di morfismi contigui in una categoria \(\ctC\) sarà esattamente definendole come funtori \(\ctOrd_{\le\lambda}\funto \ctC\).
\end{remark}
\index{Categoria!--- di spazi topologici}
\begin{example}[Spazi topologici]\label{ex_cat_top}
	Ricordiamo che uno \emph{spazio topologico} è un insieme \(X\) dotato di una \emph{topologia}, cioè una collezione \(\tau_X\) di sottoinsiemi di \(X\), chiamati gli \emph{aperti}, contenente l'insieme vuoto e \(X\) stesso, e chiusa rispetto alle intersezioni finite e a tutte le unioni.
	Dati due spazi topologici \((X,\tau_X)\) e \((Y,\tau_Y)\), una funzione \(f:X\to Y\) è continua per le topologie \(\tau_X\) e \(\tau_Y\) se per ogni aperto \(V\in\tau_Y\), la sua preimmagine \(f^{-1}(V)\) è un aperto di \(\tau_X\).
	Gli spazi topologici e le funzioni continue tra loro formano la categoria \(\ctTop\).
\end{example}
\begin{handsExample}[Spazi topologici e classi di omotopia]{skip}\index{Categoria!--- dell'omotopia}\label{ex_cat_hotop}
	La categoria $\ctHoTop$ detta \emph{categoria dell'omotopia (di spazi topologici)} è così definita:
	\begin{itemize}
		\item gli oggetti di $\ctHoTop$ sono gli spazi topologici di \ref{ex_cat_top};
		\item una freccia tra due spazi topologici $X,Y$ è una classe di omotopia di mappe continue $X\to Y$, dove la relazione di omotopia in $\ctTop(X,Y)$ è definita così: due mappe continue $f,g : X\to Y$ sono omotope (l'accento è sulla prima \emph{o}) quando esiste una funzione continua $H : X \times [0,1] \to Y$ tale che $H(x,0) = f(x)$ e $H(x,1)=g(x)$ per ogni $x\in X$. Questo si denota con $f\simeq_H g$ o brevemente con $f\simeq g$ (quando è univoco, o ovvio, come costruire $H$ a partire dal contesto).
	\end{itemize}
	La composizione di classi di omotopia di mappe continue è definita grazie al fatto che l'omotopia tra mappe è una congruenza su ogni $\ctTop(X,Y)$ (cioè, se $f\simeq g$, allora $h\cmp f\cmp k\simeq h\cmp g\cmp k$): si veda anche \ref{fun_ex_omoto_omolo} più avanti.
\end{handsExample}
\begin{example}
	Un \emph{complesso di catene} $(A_\bullet, d_\bullet)$ di gruppi abeliani è una catena di omomorfismi tra gruppi abeliani della forma
	\[\begin{tikzcd}
		\dots \ar[r] & A_2 \ar[r, "d_2"] & A_1  \ar[r, "d_1"] & A_0 \ar[r, "d_0"] & A_{-1} \ar[r, "d_{-1}"] & A_{-1} \ar[r] & \dots
	\end{tikzcd}\]
	con la proprietà che $d_n\cmp d_{n+1}=0$ (o equivalentemente, l'immagine di $d_{n+1}$ sia contenuta in $\ker d_n$). Un omomorfismo tra complessi di catene $(A_\bullet,d_\bullet) \to (B_\bullet,d'_\bullet)$ consiste di una famiglia di omomorfismi $f_n : A_n \to B_n$ tali che ciascun quadrato in
	\[\begin{tikzcd}
		\dots \ar[r] & A_2 \ar[d,"f_2"]\ar[r, "d_2"] & A_1 \ar[d,"f_1"] \ar[r, "d_1"] & A_0 \ar[d,"f_0"]\ar[r, "d_0"] & A_{-1} \ar[d,"f_{-1}"]\ar[r, "d_{-1}"] & A_{-2} \ar[d, "f_{-2}"]\ar[r] & \dots\\
		\dots \ar[r] & B_2 \ar[r, "d_2'"] & B_1  \ar[r, "d_1'"] & B_0 \ar[r, "d_0'"] & B_{-1} \ar[r, "d_{-1}'"] & B_{-2} \ar[r] & \dots
	\end{tikzcd}\]
	sia commutativo.

	La categoria dei complessi di catene è una importante costruzione in topologia algebrica: ad ogni complesso di catene $(A_\bullet, d_\bullet)$ si possono associare vari gruppi abeliani detti gruppi di \emph{omologia}. La definizione di \emph{funtore} approfondirà la questione in \ref{}.
\end{example}
\index{Categoria!--- di funzioni parziali}
\begin{example}\label{ex_cat_pfun}\index{Funzione!--- parziale}
	Dati due insiemi \(X\) e \(Y\), una \emph{funzione parziale} è una relazione \(p\) tra \(X\) e \(Y\) che associa ad ogni elemento di \(X\) \emph{al più} un singolo elemento di \(Y\). In maniera equivalente, possiamo vedere \(p\) come una funzione da un sottoinsieme \(D_f\subseteq X\) a \(Y\), a volte chiamato il \emph{dominio} di \(p\). Se \(x\notin D_f\), si dice che \(p(x)\) \emph{non è definita} (\emph{n.d.}).
	Date due funzioni parziali \(f:X\to Y\) e \(g:Y\to Z\), la funzione parziale \(g\cmp f:X\to Z\) è definita come segue:
	\[
	(g\cmp f) (x) \coloneqq \begin{cases}
		n.d.    & x\notin D_f ;              \\
		n.d.    & x\in D_f, f(x)\notin D_g ; \\
		g(f(x)) & x\in D_f, f(x)\in D_g .
	\end{cases}
	\]
	La categoria degli insiemi e delle funzioni parziali è chiamata \(\pSet\).
\end{example}
\index{Categoria!--- di insiemi puntati}
\begin{example}\label{ex_cat_puntati}\index{Insieme!--- puntato}
	Un'\emph{insieme puntato} è una coppia \((X,x)\) dove \(X\) è un insieme e \(x\) è uno specifico elemento di \(X\).
	La \emph{categoria degli insiemi puntati} \(\ctSet_*\) ha
	\begin{itemize}
		\item come oggetti, gli insiemi puntati;
		\item come morfismi tra due insiemi puntati \((X,x)\) e \((Y,y)\), le funzioni \(f:X\to Y\) tali che \(f(x)=y\).
	\end{itemize}
\end{example}
\index{Categoria!--- di azioni di gruppo}
\begin{example}[Categoria dei $G$-insiemi]\label{ex_cat_g_insiemi}
	Dato un monoide \(G\) (di solito la definizine di azione su un insieme si vede per i gruppi), un'\emph{azione sinistra di \(G\) su un insieme \(X\)} è una funzione
	\[
	\begin{tikzcd}[row sep=0]
		G\times X \ar{r}{a_X} & X \\
		(g,x) \ar[mapsto]{r} & g\cdot x
	\end{tikzcd}
	\]
	con le seguenti proprietà:
	\begin{itemize}
		\item Per ogni \(x\in X\), l'azione dell'elemento neutro lascia \(x\) invariato:
		\[
		e\cdot x = x ;
		\]
		\item Per ogni \(x\in X\) e per ogni coppia di elementi \(g,h\in G\), l'azione del prodotto in \(G\) è la composizione delle azioni:
		\[
		(g\cdot h)\cdot x = g\cdot(h\cdot x) .
		\]
	\end{itemize}
	Un'\emph{azione destra} è una funzione \(X\times G\to X\) con proprietà analoghe.
	Un insieme dotato di una specifica azione di \(G\) viene chiamato un \emph{\(G\)-insieme}, o \emph{\(G\)-set}.

	Dati due \(G\)-insiemi \((X,a_X)\) e \((Y,a_Y)\) (per lo stesso gruppo o monoide \(G\)), una funzione \(f:X\to Y\) si dice \emph{equivariante} se per ogni \(x\in X\) e \(g\in G\),
	\[
	f(g\cdot x) = g\cdot f(x) ,
	\]
	ossia se il seguente diagramma commuta.
	\[
	\begin{tikzcd}
		G\times X \ar{r}{\id_G\times f} \ar[d, "a_X"'] & G\times Y \ar{d}{a_Y} \\
		X \ar[r, "f"'] & Y
	\end{tikzcd}
	\]
	Si noti che la composizione di funzioni equivarianti è anch'essa equivariante. I \(G\)-insiemi e le funzioni equivarianti tra loro formano la categoria \(G\emdash\ctSet\).
\end{example}
\begin{example}[$\mathrm{C}^*$-algebre complesse]\index{Categoria!--- delle $\mathrm{C}^*$-algebre}\index{$\mathrm{C}^*$-algebra}
	Una \emph{$\mathrm{C}^*$-algebra} consiste di uno spazio di Banach $A$ (cioè di uno spazio vettoriale topologico sul campo dei complessi, dotato di una norma $\norm{\_} : A \to \bbR_{\ge 0}$, e completo rispetto alla metrica indotta da $\norm{\_}$), che in più è dotato di
	\begin{itemize}
		\item una operazione di anello (possibilmente non unitario) $\_\cdot\_ : A \times A \to A$ che sia \emph{submoltiplicativa}, cioè tale che $\norm{x\cdot y} \le\norm x\norm y$ (questo assicura che la moltiplicazione sia una funzione continua);
		\item una involuzione $(\_)^* : A\to A$ che soddisfa la \emph{proprietà fondamentale}
		\[\norm{x^*\cdot x} = \norm{x}^2\]
		(questo assicura che $x\mapsto x^*$ sia un'isometria, cioè $\norm x = \norm{x^*}$).
	\end{itemize}
	Uno \emph{*-omomorfismo} tra $\mathrm{C}^*$-algebre consiste di un omomorfismo di anelli $f : A\to B$ con la proprietà che $f(a^*) = f(a)^*$.

	La categoria $\ctCsAlg$ ha
	\begin{itemize}
		\item per oggetti le $\mathrm{C}^*$-algebre;
		\item per morfismi, date due $\mathrm{C}^*$-algebre $A,B$, tutti gli *-omomorfismi $f : A \to B$.
	\end{itemize}
	Una $\mathrm{C}^*$-algebra può essere: \emph{unitale} se la sua struttura di anello ammette un'unità moltiplicativa, \emph{commutativa} se la moltiplicazione è commutativa.

	Uno *-omomorfismo che preserva l'unità è detto *-omomorfismo \emph{unitale}, e le $\mathrm{C}^*$-algebre unitali insieme agli *-omomorfismi unitali, formano anch'essi una categoria $\ctCsAlg_1$, che è sottocategoria (si veda \ref{def_subcat}) di $\ctCsAlg$.

	Discorso completamente analogo per le $\mathrm{C}^*$-algebre commutative, che con tutti gli *-omomorfismi formano una sottocategoria $\ctCsAlg_c$ di $\ctCsAlg$.
\end{example}
\begin{example}[Mappe stocastiche]\index{Categoria!--- delle mappe stocastiche}\index{Mappa stocastica}\index{Matrici!categoria delle --- stocastiche}\label{cat_stocazziche}
	La categoria $\cate{FStoch}$ delle \emph{mappe stocastiche tra insiemi finiti} ha
	\begin{itemize}
		\item per oggetti i numeri natural $0,1,2,\dots$;
		\item per morfismi $n\to m$ le matrici $A=(a_{ij}\mid i\in [m], j\in[n])$ con $m$ righe ed $n$ colonne a coefficienti reali, soggette alle restrizioni seguenti:
		\begin{itemize}
			\item ogni entrata $a_{ij}$ di $A : n\to m$ è un numero reale compreso tra $0$ e $1$ (inclusi);
			\item per ogni $i\in[m]$, la somma $\sum_{j=1}^n a_{ij}$ è uguale a 1.
		\end{itemize}
	\end{itemize}
	La composizione è data dalla composizione di matrici (dunque l'identità coincide con la matrice che ha tutti 1 in diagonale, e zero altrove), e tutti gli assiomi di categoria sono soddisfatti.

	Sebbene questa categoria somigli molto alla categoria delle matrici di \ref{ex_cat_matrici}, essa si comporta molto diversamente (per esempio: non è possibile sommare due matrici stocastiche per ottenerne una terza, né riscalare una matrice stocastica di un fattore $\lambda\in\bbR$; però è possibile considerare \emph{combinazioni convesse} di matrici stocastiche, ossia la somma di matrici $\alpha_1 A_1+\dots + \alpha_n A_n$ è una matrice stocastica quando lo sono tutte le $\tup An,$ e $\tup\alpha n+ = 1$).
\end{example}
\index{Categoria!--- di `stream'}
\begin{example}\label{example_streams}
	La categoria \(\cate{Stream}\) ha
	\begin{itemize}
		\item per oggetti gli insiemi \(A,B,C\dots\)
		\item per morfismi \(f : A\pto B\) le funzioni della forma
		\[\longmor{f : \sum_{n\ge1} A^n}{B}\]
		dove il dominio \(A^+=\sum_{n\ge1} A^n\) è l'insieme delle \emph{liste non vuote} di elementi di \(A\), cioè l'insieme \(A + (A\times A) + (A\times A\times A) + \dots\) i cui elementi sono sequenze ordinate della forma \((\tup an,)\) per \(n\ge 1\) e \(a_i\in A\) per ogni \(i=1,\dots,n\).\footnote{In termini più formali, \(A^+\) è il \emph{semigruppo libero} generato dall'insieme \(A\), un `semigruppo' essendo un insieme dotato di una operazione binaria associativa.}
	\end{itemize}
	L'intuizione dietro questa definizione è che un morfismo \(f \in \Hom{\cate{Stream}}(A,B)\) consiste di un `algoritmo' che data una lista non vuota di input \((\tup an,)\) calcola un output \(f(\tup an,)\in B\) (che chiaramente può dipendere anche da \(n\)), per ogni \(n\ge 1\).

	Le identità sono le funzioni \(\sum_{n=1} A^n\to A\) definite mandando \((\tup an,)\) in \(a_n\); la composizione è data, se \(f : A\pto B\) e \(g : B\pto C\) dalla regola \(g\cmp f : A\pto C\)
	\[(\tup an,)\longmapsto g\big(f(a_1),f(a_1,a_2),\dots f(\tup a{n-1},),f(\tup an,)\big).\]
	Ovvero, la composizione \(g\cmp f\) calcola l'output che la funzione \(g\) genera a partire dagli input \(f(a_1),f(a_1,a_2),\dots f(\tup a{n-1},),f(\tup an,)\).
\end{example}
\begin{example}[La categoria degli insiemi dimensionati]\label{example_dimensionati}
	La categoria \(\cate{dSet}\) degli \emph{insiemi con unità di misura} o `insiemi dimensionati' ha
	\begin{itemize}
		\item per oggetti le funzioni suriettive \(d : A\to D\) verso un insieme \(D\) che svolge il ruolo di insieme delle unità di misura con cui gli elementi di \(A\) sono etichettati; se, ad esempio \(D := \{\texttt{m},\texttt{s},\texttt{kg}\}\), gli elementi di \(d^{-1}(m)\) sono le `lunghezze' (cioè si misurano in metri), gli elementi di \(d^{-1}(s)\) sono i tempi, eccetera.
		\item dati due insiemi dimensionati \((d : A\to D)\) e \((d', B\to D')\), un morfismo tra di loro consiste di una coppia di funzioni \(u,v\) che fanno commutare il seguente quadrato:
		\[\begin{tikzcd}
			A\ar[r, "u"]\ar[d,"d"'] & B \ar[d, "d'"]\\
			D \ar[r, "v"']& D'
		\end{tikzcd}\]
	\end{itemize}
	Gli assiomi di categoria sono ovviamente soddisfatti: la coppia di identità $(\id_A,\id_D)$ è evidentemente l'identità dell'oggetto $(d : A\to D)$ per l'operazione di composizione di funzioni, componente per componente.
\end{example}
\begin{example}[La categoria degli pseudoinsiemi]\label{ex_cat_pseudoinsiemi}\index{Pseudoinsieme}\index{Categoria!--- degli pseudoinsiemi}\index{Categoria!$\cate{Bish}$|see {--- degli pseudoinsiemi}}\index{Categoria!--- degli insiemi di Bishop|see {--- degli pseudoinsiemi}}
	Uno \emph{pseudoinsieme}, o \emph{insieme di Bishop}, o \emph{prequoziente} consiste di un insieme \(S\) su cui è definita una relazione di equivalenza \(\sim_S\). La categoria \(\cate{Bish}\) degli insiemi di Bishop è definita come segue:
	\begin{itemize}
		\item gli oggetti sono gli pseudoinsiemi \((S,\sim)\);
		\item un omomorfismo di pseudoinsiemi \(f : (S,\sim) \to (T,\asymp)\) consiste di una funzione \(f : S\to T\) con la proprietà che se \(s\sim s'\) in \(S\) allora \(fs\asymp fs'\) in \(T\). Equivalentemente, gli omomorfismi di pseudoinsiemi sono le funzioni \(f : S\to T\) che `scendono al quoziente' definendo una funzione \(\hat f : S/_\sim \to T/_\asymp\) tra gli insiemi quoziente.
	\end{itemize}
	La composizione di omomorfismi di pseudoinsiemi è la composizione di funzioni; la funzione identità è l'identità di \((S,\sim)\) (e se \(\sim'\) è una relazione di equivalenza più fine di \(\sim\) sullo stesso insieme \(S\), la funzione identità \((S,\sim) \to (S,\sim')\) è un omomorfismo, ma non è un isomorfismo, nel senso di \ref{def_isomorfismo}).
\end{example}
\begin{terminology}[Sul nome `pseudoinsieme']
	La nomenclatura `insieme di Bishop' viene da \cite{Bishop1985}, dove quello che è chiamato qui pseudoinsieme consiste di un insieme per cui sia data una regola esplicita che costruisce i suoi elementi, e questi elementi possono essere uguagliati mediante una relazione \(\sim\), che astrae l'uguaglianza sintattica.\footnote{In Bishop la costruibilità dei suoi elementi è il punto centrale nella definizione di pseudoinsieme: elementi esibiti mediante procedure differenti sono però uguali ad ogni fine pratico, e vanno quindi identificati.}

	In questo senso va intesa la nomenclatura `pseudoinsieme': gli elementi di un insieme di Bishop non sono strettamente uguali ma equivalenti mediante \(\sim\); analogamente va inteso il termine `prequoziente': un insieme di Bishop consta della struttura `precedente al quoziente' \(S/_\sim\).
\end{terminology}
\subsection{Categorie come strutture}\label{ssec:categorie_strutture}
Fin qui, l'osservazione che le strutture matematiche di un dato tipo, con la definizione appropriata di omomorfismo, formino una categoria, è nient'altro che una banalità della prassi matematica. Una osservazione decisamente meno banale è che alcune delle strutture della pratica matematica sono \emph{esse stesse} delle categorie.

In più, l'esempio \ref{ex_cat_sigma_strutture} potrebbe far sospettare che gli oggetti di una categoria siano alla fine sempre insiemi dotati di strutture ulteriori (operazioni o relazioni, soggette a equazioni), e i morfismi funzioni che preservano queste operazioni e relazioni.

Invece, le categorie che hanno questa proprietà si dicono \emph{concrete}, ed esistono esempi di categorie non concrete (sebbene essi siano sorprendentemente ardui da definire); chi legge può consultare \cite{Freyd1973,Kuera1971} per maggiori informazioni.

Negli esempi \ref{ex_cat_vuota}--\ref{ex_cat_libera} gli oggetti si possono vedere, più che come insiemi strutturati, come \emph{vertici di un grafo}.

I seguenti esempi sono simili, e vanno a rinforzare l'idea che una maniera aggiuntiva e utile di pensare le categorie sia come a una classe di strutture matematiche che si ritrovano poi nella pratica matematica.%
\index{Relazione di equivalenza}
\begin{example}\label{ex_cat_rel_equiv}
	Un singolo pseudoinsieme come in \ref{ex_cat_pseudoinsiemi} si può vedere come una particolare categoria. Consideriamo un insieme \(X\) dotato di una relazione di equivalenza indicata con il simbolo \(\sim\).
	Definiamo la seguente categoria \(\susp(X,\sim)\):
	\begin{itemize}
		\item Gli oggetti di \(\susp(X,\sim)\) sono gli elementi di \(X\);
		\item Esiste un unico morfismo \(x\to y\) se e solo se \(x\sim y\) (e allora esiste anche un unico morfismo \(y\to x\) come conseguenza del fatto che \(\sim\) è simmetrica).
	\end{itemize}
	Per ogni oggetto \(x\), l'identità è l'unico morfismo \(x\to x\) dato dal fatto che la relazione è riflessiva (\(x\sim x\)).
	La composizione è data dalla transitività: se abbiamo morfismi \(x\to y\) e \(y\to z\) significa, in particolare, che \(x\sim y\) e \(y\sim z\). Per transitività, \(x\sim z\), e quindi c'è un unico morfismo \(x\to z\), che possiamo definire come composizione \(x\sim y\sim z\).

	Gli assiomi di identità e associatività sono automaticamente soddisfatti: per esempio, la composizione \((w\to x\to y)\to z\) e la composizione \(w\to (x\to y\to z)\) coincidono, constando dell'unico morfismo \(w\to z\) che esiste usando due volte la transitività di $\sim$.
\end{example}
Quelle della forma \(\susp(X,\sim)\) per qualche insieme \(X\) e relazione di equivalenza \(\sim\) sono un esempio elementare di categoria in cui gli oggetti non sono insiemi strutturati, ma non è quello più semplice possibile: la proprietà di simmetria di \(\sim\) non è essenziale per ottenere una categoria.

Consideriamo ora i seguenti esempi di categorie simili (che raccogliamo in dei teoremi, di cui diamo una dimostrazione completa, perché questi esempi sono pedagogicamente rilevanti).
\index{Categoria!--- da una relazione}
\begin{examples}\label{ord_sonocat}
	Ogni relazione d'ordine \((X,\le)\) forma una categoria, ancora una volta con un unico morfismo \(x\to y\) se e solo se \(x\le y\). Come nel caso delle relazioni di equivalenza, gli oggetti di \(\ctP(X,\le)\) sono gli elementi di \(X\), le identità sono date dalla proprietà riflessiva \(x\le x\) e la composizione dalla proprietà transitiva. Ciò è sufficiente a soddisfare tutti gli assiomi di categoria.

	Più in generale, un \emph{preordine} è una relazione riflessiva e transitiva, ma non necessariamente simmetrica o antisimmetrica. Ogni preordine si può vedere come una categoria alla stessa maniera di prima.
\end{examples}
\begin{remark}
	Due osservazioni sono a questo punto importanti:
	\begin{itemize}
		\item è facile fraintendere la definizione appena data, o perlomeno esserne confusi, perché la definizione di categoria data in \ref{def_categ} chiede che esista un \emph{insieme} di morfismi \(x\to y\) tra due oggetti \(x,y\) di \(\ctP(X,\le)\).

		Qual è quindi l'insieme di morfismi tra \(x\) e \(y\), in un insieme ordinato $(X,\le)$? Una risposta possibile è che, in questo caso, tra due morfismi esiste una \emph{proposizione}, precisamente quella che asserisce se \(x\le y\) o meno. Una maniera di pensare questa proposizione è come segue: diciamo che \(\ctP(X,\le)\) è un insieme con un singolo elemento (lo chiamiamo \([x\le y]\)) se e solo se \(x\le y\) `è vera', ed è l'insieme vuoto altrimenti. In questo modo, dobbiamo definire una regola di composizione tra l'elemento \([x\le y]\) e l'elemento \([y\le z]\): questo non può che essere l'elemento \([x\le z]\), e a questo punto lasciamo i dettagli (tediosi) da scrivere a chi legge.
		\item \`E fondamentale non rimanere confusi da un altro dettaglio: in base a \ref{ex_cat_ordini} esiste una categoria i cui oggetti sono gli insiemi ordinati \((X,\le)\) e i cui morfismi sono le funzioni monotòne. In base a \ref{ord_sonocat}, \emph{ogni} insieme ordinato \((X,\le)\) è \emph{esso stesso} una categoria i cui oggetti sono gli elementi di \(X\). Queste due asserzioni sono molto diverse tra loro; sarà la definizione \ref{ex_cat_cat} a rendere preciso in che senso \(\ctPOrd,\ctPos\) e altre sono `categorie di categorie'.
	\end{itemize}
\end{remark}
Occupiamoci ora di dimostrare che una categoria dove tra due oggetti esiste al più un morfismo è \emph{precisamente} un insieme (pre)ordinato. Indichiamo $\# A$ la cardinalità di un insieme $A$.
\begin{theorem}\label{cat_sonopos}
	Sia \(\ctC\) una categoria, con la proprietà che \(\#\Hom{\ctC}(X,Y) \le 1\) (cioè \(\Hom{\ctC}(X,Y)\) ha al più un elemento). Allora, la relazione
	\[X\le Y \iff \Hom{\ctC}(X,Y) \text{ non è vuoto}\]
	definisce una struttura di insieme preordinato su \(\ctC_0\).
\end{theorem}
\begin{proof}
	La relazione così definita è
	\begin{itemize}
		\item riflessiva, perché \(\Hom{\ctC}(X,X) = \{\id_X\}\);% contiene l'identità (e solo l'identità);
		\item transitiva, perché se \(\Hom{\ctC}(X,Y), \Hom{\ctC}(Y,Z)\) non sono vuoti, la composizione è definita come in \ref{cor_def_categ} e quindi esiste un elemento, necessariamente unico, in \(\Hom{\ctC}(X,Z)\).\qedhere
	\end{itemize}
\end{proof}
\index{Categoria!--- da un monoide}
L'altro esempio fondamentale di struttura matematica che è un caso particolare di categoria è: un monoide come in \ref{} è precisamente una categoria che ha un solo oggetto. Questi sono precisamente gli esempi iniziali con cui abbiamo motivato la definizione di categoria in \ref{def_categ}.
\begin{theorem}\label{mon_sonocat}
	Dato un monoide \((M,\cdot,1)\), definiamo la seguente categoria, che indichiamo con \(\susp M\).\footnote{A volte la categoria definita in questo modo si indica con \(\susp(M,\cdot,1)\), a volte (quando l'operazione su \(M\) è ovvia dal contesto) semplicemente con \(\susp M\).}
	\begin{itemize}
		\item La categoria \(\susp M\) ha un unico oggetto, che indichiamo con \(\bullet\);\footnote{La notazione è volta a suggerire che precisare questo elemento non sarà mai importante (una scelta canonica, ma che potrebbe causare confusione, è fissare \(\susp M_0 := \{M\}\), insieme che ovviamente \emph{non} è \(M\)).}
		\item La categoria \(\susp M\) ha un morfismo \(m:\bullet\to\bullet\) per ogni elemento \(m\in M\); l'unico hom-insieme che dobbiamo specificare, \(\Hom{\susp M}(\bullet,\bullet)\), è cioè uguale a \(M\), e in particolare, l'identità \(\id_\bullet\) è l'elemento neutro \(1\in M\);
		\item La composizione di morfismi
		\[\longmor{\Hom{\susp M}(\bullet,\bullet)\times \Hom{\susp M}(\bullet,\bullet)}{\Hom{\susp M}(\bullet,\bullet)}\]
		è data dal prodotto \(M\times M\to M\).
	\end{itemize}
\end{theorem}
Chi legge dovrebbe ora riflettere su questa frase finché essa non appare perfettamente evidente: nell'esempio appena fatto, gli assiomi di categoria sono \emph{precisamente} gli assiomi che definiscono un monoide.

Di converso, i monoidi sono esattamente tutte e sole le categorie che hanno un solo oggetto: è un corollario immediato di \ref{lem_end_monoide}.
\begin{theorem}\label{cat_sonomon}
	Data una categoria \(\ctC\) tale che \(\ctC_0\) abbia un singolo elemento \(\star\), l'insieme \(\ctC_1 = \Hom{\ctC}(\star,\star)\) è un monoide.% come conseguenza di \ref{lem_end_monoide}.
\end{theorem}
% \begin{example}\label{ex_cat_mon}
	% 	In un monoide, a differenza di una categoria generica, possiamo sempre comporre due morfismi \(m\) e \(n\): questo è garantito dal fatto che siccome c'è un solo oggetto, il dominio e il codominio di \(m\) ed \(n\) sono necessariamente uguali.
	%
	% 	Viceversa, data una categoria localmente piccola con un solo oggetto (indichiamolo ancora con questo simbolo, \(\bullet\)), l'insieme di morfismi \(\bullet\to\bullet\) ha una struttura di monoide con l'elemento neutro dato dall'identità, e il prodotto dato dalla composizione.
	%
	% 	L'unitalità e l'associatività del monoide e della categoria si corrispondono.
	% \end{example}
\begin{corollary}\label{cor_cat_mon}
	In particolare, un gruppo \((G,\cdot,1)\) si può ugualmente vedere come la categoria \(\susp G\) ad esso associata, che ha un solo oggetto e \(G\) come insieme di morfismi.
\end{corollary}
\begin{remark}
	Del resto, una categoria con un solo oggetto non `è' un monoide, ma lo definisce naturalmente; e un monoide non `è' la categoria \(\susp M\), ma la definisce naturalmente (e qualcosa di simile si può dire per gli insiemi ordinati in \ref{}).

    In altre parole, eliminare la distinzione tra \(M\) e \(\susp M\) non segue da una tautologia, ma è una \emph{identità informativa} (il termine è in `Senso e significato' di Frege, \cite{}) che non è \emph{strettamente} una identità, ma una \emph{identificazione} tra due concetti sintatticamente distinti: in maniera più vicina al gergo matematico, a patto che $\#\ctC_0 = 1$, le assegnazioni \(M\mapsto \susp M\) e \(\ctC\mapsto \ctC_1\) sono inverse una dell'altra, nel senso che
    \[(\susp M,\cdot,1)_1 = M\qquad\qquad\susp(\ctC_1,\circ,\id_\bullet) = \ctC.\]
    %\((\susp M,\cdot,1)_1 = M\) e che \(\susp(\ctC_1,\circ,\id_\bullet) = \ctC\).
	%Dato un oggetto \(X\) di una categoria, un morfismo da \(X\) a \(X\) si chiama anche \emph{endomorfismo}. In un monoide, tutti i morfismi sono endomorfismi.
\end{remark}
% \begin{remark}
	% 	Abbiamo visto che i gruppi sono gli oggetti della categoria \(\ctGrp\), ma anche che ogni gruppo si può a sua volta vedere come una categoria (con un solo oggetto). Entrambe le prospettive sono valide, e ce ne sono altre ancora.
	% 	Allo stesso modo, gli ordini parziali sono categorie, ma si possono anche vedere come oggetti della categoria \(\ctPos\), dove i morfismi sono le funzioni monotone.
	% 	Spesso, in teoria delle categorie, la stessa struttura matematica può apparire in modi diversi in contesti diversi, e questa varietà di prospettive è uno dei motivi per cui le categorie sono così versatili.
	% \end{remark}
\subsubsection*{Esercizi}
\begin{enumerate}
	% \color{red}
	% \item Un \emph{grafo diretto} (chiamato anche \emph{digrafo}) è un insieme \(V\), i cui elementi chiamiamo \emph{vertici}, e una relazione \(E\subseteq V\times V\), i cui elementi chiamiamo \emph{spigoli}. Diciamo che \(x\) è \emph{adiacente} a \(y\) se esiste uno spigolo \((x,y)\in E\). Un \emph{omomorfismo di grafi diretti} \(f:(V,E)\to (V',E')\) è una funzione \(f:V\to V'\) tale che se \(x\) è adiacente a \(y\), allora \(f(x)\) è adiacente a \(f(y)\). Dimostra che i grafi diretti e i loro omomorfismi formano una categoria.
	% \item Un \emph{multigrafo diretto} (chiamato anche \emph{multidigrafo}) è definito similmente a un grafo diretto, ma può avere diversi spigoli tra gli stessi due vertici. Un multidigrafo consiste di un insieme \(V\) (i \emph{vertici}), e un insieme \(E\) (gli \emph{spigoli}), con due funzioni \(d_-,d_+:E\to V\), che associano un ``dominio'' e un ``codominio'' ad ogni spigolo. Un \emph{omomorfismo di multigrafi diretti} \((V,E)\to (V',E')\) consiste di una funzione \(f_0:V\to V'\) tra i vertici, e una funzione \(f_1:E\to E'\) tra gli spigoli, compatibili con le mappe \(d_-,d_+\) nel seguente modo:
	%       \[
	% 	      d_-(f_1(e)) = f_0(d_-(e)) ,\qquad d_+(f_1(e)) = f_0(d_+(e)) .
	%       \]
	%       Dimostra che \(f_1:E\to E'\) associa a uno spigolo tra \(x\) e \(y\) uno spigolo tra \(f_0(x)\) e \(f_0(y)\).
	% \item Dimostra che i multigrafi diretti e i loro omomorfismi formano una categoria.
	%       \color{black}
	\item Una categoria piccola si può vedere come un multigrafo con identità e composizione: riscrivi la definizione di categoria (piccola) in termini di multigrafi.  In che modo questa costruzione generalizza la definizione di monoide (come insieme con identità e composizione)?
	\item Dimostrare che  se \((P,\le)\) è un insieme bene ordinato, ed \(f : P\to P\) è una funzione monotòna, allora \(a\le fa\) per ogni \(a\in P\) (cioè ogni endofunzione di un buon ordine è \emph{espansiva}); dimostrare che l'unica biiezione monotòna di un buon ordine è l'identità; più in generale, se esiste un isomorfismo d'ordine \(f : P\to Q\) tra due buon ordine, allora esso è unico.
	\item Dare una dimostrazione alternativa di \ref{circ_thm} secondo questa falsariga: definire una funzione di `misura' $\mu$ sull'insieme delle funzioni Booleane semplici, che manda $f : \bbB^n\to\bbB$ nella cardinalità dell'insieme $f^\leftarrow(0)$. Mostrare che $f$ è esprimibile come composizione di AND e NOT nei tre casi:
	\begin{itemize}
		\item $\mu(f)=0$ (in tal caso, $f$ è la funzione costantemente $1$);
		\item $\mu(f)=1$ (in tal caso, esiste un solo $(\tup xn,)\in \bbB^n$ tale che $f(\tup xn,)=1$; cosa significa questo quando $n=1$? Da questo, ragionare per induzione su $n$);
		\item se $\mu(f)\ge 2$, costruire $f_1,f_2:\bbB^n\to \bbB$ tali che $f(\tup xn,) = f_1(\tup xn,) \land f_2(\tup xn,)$.
	\end{itemize}
\end{enumerate}

\section{Operazioni tra categorie}\label{sec_operazioni}
Come con tutte le altre strutture algebriche, esistono modi per formare nuove categorie a partire da categorie date.

Di seguito diamo alcune di queste costruzioni, alcune delle quali (\ref{def_subcat}, \ref{def_cat_prodotto}, \ref{def_cat_somma}) sono tipiche dell'algebra universale, definendo le nozioni di sotto-struttura, struttura prodotto e struttura somma, e altre che invece sono specifiche della teoria delle categorie (\ref{def_cat_opp}, \ref{def_cat_slice}).

\index{Categoria!sotto---}
\begin{definition}\label{def_subcat}
	Data una categoria \(\ctC\), una \emph{sottocategoria} \(\ctS\) di \(\ctC\), che scriviamo \(\ctS\subseteq \ctC\), consiste di sottoclassi \(\ctS_0\subseteq\ctC_0\) e \(\ctS_1\subseteq\ctS_1\) tali che
	\begin{itemize}
		\item Per ogni morfismo \(f\) in \(\ctS_1\), il suo dominio e il suo codominio sono in \(\ctS_0\);
		\item Per ogni oggetto \(X\) in \(\ctS_0\), il suo morfismo identità è in \(\ctS_1\);
		\item Per ogni coppia di morfismi \(f,g\) in \(\ctS_1\) che si possono comporre in \(C\), la loro composizione \(g\cmp f\) è anch'essa in \(\ctS_1\).
	\end{itemize}
	In questo modo, \(\ctS\) è anch'essa una categoria, con identità e composizione indotte da \(\ctC\). (Si paragoni una sottocategoria a un sottogruppo.)

	Una sottocategoria \(\ctS\subseteq \ctC\) si dice
	\index{Categoria!sotto--- piena}\index{Sottocategoria!--- piena}
	\index{Categoria!sotto--- ampia}\index{Sottocategoria!--- ampia}
	\begin{itemize}
		\item \emph{piena} se per ogni coppia di oggetti \(X\) e \(Y\) di \(\ctS\), tutti i morfismi \(X\to Y\) di \(\ctC\) sono anch'essi in \(\ctS\);
		\item \emph{ampia} se tutti gli oggetti di \(\ctC\) sono in \(\ctS\).
	\end{itemize}
\end{definition}
\begin{example}
	Raccogliamo in un unico paragrafo diversi esempi di sottocategorie: la sottocategoria degli insiemi finiti di \ref{protoex_finset} è una sottocategoria (piena) della categoria \(\ctSet\) di \ref{ex_cat_insiemi}; la categoria dei gruppi abeliani è una sottocategoria piena della categoria di tutti i gruppi; la categoria degli insiemi totalmente ordinati è una sottocategoria di \(\ctPos\) definita in \ref{po_wo_to}.

	A volte le sottocategorie costruite su una sottoclasse di oggetti sono piene; altre volte, per motivi `tecnici' si restringe anche la classe dei morfismi ammissibili: per esempio
	\begin{itemize}
		\item le sottocategorie \(\cate{T}n\ctTop\) per \(n=0,1,2,3\) degli spazi che soddisfano gli assiomi di separazione \(Tn\) sono sottocategorie piene della categoria \(\ctTop\) di \ref{ex_cat_top}, una inclusa nell'altra,
		\[\ctTop\supseteq\cate{T}0\ctTop\supseteq\cate{T}1\ctTop\supseteq\cate{T}2\ctTop\supseteq\cate{T}3\ctTop\]
		\item la sottocategoria degli spazi T2 e compatti ha per morfismi le mappe \(f : X\to Y\) continue e \emph{proprie}, tali cioè che la controimmagine di un sottoinsieme compatto \(K\Subset Y\) mediante \(f\) sia un sottoinsieme compatto di \(X\).
	\end{itemize}
\end{example}
\begin{definition}\label{def_cat_prodotto}\index{Categoria!--- prodotto}
	Date due categorie \(\ctC\) e \(\ctD\), la \emph{categoria prodotto} \(\ctC\times\ctD\) ha
	\begin{itemize}
		\item Per oggetti, coppie \((C,D)\) dove \(C\) è un oggetto di \(\ctC\), e \(D\) è un oggetto di \(\ctD\);
		\item Per morfismi, ogni morfismo \((C,D)\to(C',D')\) è una coppia \((f,g)\) dove \(f:C\to C'\) è un morfismo di \(\ctC\) e \(g:D\to D'\) è un morfismo di \(\ctD\);
		\item L'identità di \((C,D)\) è data dal morfismo \((\id_C,\id_D)\);
		\item La composizione di morfismi è data dalla composizione delle ciascune componenti.
	\end{itemize}
\end{definition}
\begin{definition}\label{def_cat_somma}\index{Categoria!--- somma}
	Date due categorie \(\ctC\) e \(\ctD\), la \emph{categoria somma} \(\ctC+\ctD\) è definita come segue.
	\begin{itemize}
		\item Come classe di oggetti,  ha l'unione disgiunta di \(\ctC_0\) e \(\ctD_0\);
		\item Dati due oggetti \(C\) e \(C'\) presi da \(\ctC\), i morfismi tra loro corrispondono a quelli in \(\ctC\), lo stesso succede per gli oggetti presi da \(\ctD\);
		\item Non ci sono morfismi tra un oggetto preso da \(\ctC\) e uno preso da \(\ctD\) o viceversa;
		\item Le identità e le composizioni sono ancora una volta indotte da quelle di \(\ctC\) e \(\ctD\).
	\end{itemize}
\end{definition}
\begin{figure}[h]
  \begin{center}
    \begin{tikzpicture}[
        x=4em, y=4em,
        dot/.style={
            circle,
            fill=#1,
            draw=black,
            inner sep=0pt,
            outer sep=2pt,
            minimum size=4pt,
            draw=none,
          },
        wrap/.style={
            inner sep=0,
            fill=black!5,
            rounded corners,
            inner sep=1em,
          },
      ]

      \def\seedC{4}
      \def\seedD{11}

      \begin{scope}[yshift=5em,local bounding box=C]
        \GimmeBounds{\seedC}{4}
        \pgfmathsetseed{\seedC}
        \foreach \i in {1,...,4} {
            \pgfmathsetmacro{\x}{(rnd-\xmid)/(\xmax-\xmin)} % Center x
            \pgfmathsetmacro{\y}{(rnd-\ymid)/(\ymax-\ymin)} % Center y
            \path node[dot=black] (C\i) at (\x,\y) {};
          }
      \end{scope}

      \begin{scope}[yshift=-5em,local bounding box=D]
        \GimmeBounds{\seedD}{3}
        \pgfmathsetseed{\seedD}
        \foreach \i in {1,...,3} {
            \pgfmathsetmacro{\x}{(rnd-\xmid)/(\xmax-\xmin)}
            \pgfmathsetmacro{\y}{(rnd-\ymid)/(\ymax-\ymin)}
            \path node[dot=black] (D\i) at (\x,\y) {};
          }
      \end{scope}

      \begin{scope}[xshift=9em,local bounding box=CtD]
        \GimmeBounds{\seedC}{4}
        \pgfmathsetseed{\seedC}
        \foreach \i in {1,...,4} {
            \pgfmathsetmacro{\x}{(rnd-\xmid)/(\xmax-\xmin)}
            \pgfmathsetmacro{\y}{(rnd-\ymid)/(\ymax-\ymin)}
            \path node[dot=black] (C\i-Dt) at (\x,\y+.8) {};
          }

        \GimmeBounds{\seedD}{3}
        \pgfmathsetseed{\seedD}
        \foreach \i in {1,...,3} {
            \pgfmathsetmacro{\x}{(rnd-\xmid)/(\xmax-\xmin)}
            \pgfmathsetmacro{\y}{(rnd-\ymid)/(\ymax-\ymin)}
            \path node[dot=black] (Ct-D\i) at (\x,\y-.8) {};
          }
      \end{scope}

      \begin{scope}[xshift=22em,local bounding box=CxD]
        \GimmeBounds{\seedC}{4}
        \let\xminC\xmin\let\xmidC\xmid\let\xmaxC\xmax
        \let\yminC\ymin\let\ymidC\ymid\let\ymaxC\ymax
        \GimmeBounds{\seedD}{3}
        \let\xminD\xmin\let\xmidD\xmid\let\xmaxD\xmax
        \let\yminD\ymin\let\ymidD\ymid\let\ymaxD\ymax

        \pgfmathsetseed{\seedD}
        \foreach \j in {1,...,3} {
            \pgfmathsetmacro{\dx}{(rnd-\xmidD)/(\xmaxD-\xminD)}
            \pgfmathsetmacro{\dy}{(rnd-\ymidD)/(\ymaxD-\yminD)}
            \pgfmathsetseed{\seedC}
            \foreach \i in {1,...,4} {
                \pgfmathsetmacro{\cx}{(rnd-\xmidC)/(\xmaxC-\xminC)}
                \pgfmathsetmacro{\cy}{(rnd-\ymidC)/(\ymaxC-\yminC)}
                \path node[dot=black] (C\i-D\j) at (2.5*\dx+0.8*\cx,2.5*\dy+0.8*\cy) {};
              }
            \pgfmathsetseed{\seedD}
            \foreach \k in {1,...,\j} \pgfmathparse{rnd+rnd};
          }
      \end{scope}

      \def\morsC{1/2,2/4,1/3,3/4}
      \def\morsD{2/1,2/3}

      \foreach \s/\t in \morsC {
        \draw[-latex,draw=ibmMagenta] (C\s) -- (C\t);
        \draw[-latex,draw=ibmMagenta] (C\s-Dt) -- (C\t-Dt);
      }

      \foreach \s/\t in \morsD {
        \draw[-latex,draw=ibmBlue] (D\s) -- (D\t);
        \draw[-latex,draw=ibmBlue] (Ct-D\s) -- (Ct-D\t);
      }

      \foreach \oC/\mD in {1/{2/1},2/{2/3},3/{}} {
      \foreach \s/\t in \morsC {
        \foreach \j in \oC {
          \draw[black!5,ultra thick] (C\s-D\j) -- (C\t-D\j);
          \draw[-latex,draw=ibmMagenta] (C\s-D\j) -- (C\t-D\j);
        }
      }
      \foreach \s/\t in \mD {
        \foreach \i in {4,3,2,1} {
            \draw[black!5,ultra thick] (C\i-D\s) -- (C\i-D\t);
            \draw[-latex,draw=ibmBlue] (C\i-D\s) -- (C\i-D\t);
          }
      }
      }

      \begin{scope}[on background layer]
        \path node[wrap, fit=(C.south west)(C.north east)] {};
        \path node[wrap, fit=(D.south west)(D.north east)] {};
        \path node[wrap, fit=(CtD.south west)(CtD.north east)] {};
        \path node[wrap, fit=(CxD.south west)(CxD.north east)] {};
      \end{scope}

      \node [below=1.5em of C] {$\ctC$};
      \node [below=1.5em of D] {$\ctD$};
      \node [below=1.5em of CtD] {$\ctC+\ctD$};
      \node [below=1.5em of CxD] {$\ctC\times\ctD$};
    \end{tikzpicture}
    \caption{TODO}
    \label{fig_cat_somma_e_prodotto}
  \end{center}
\end{figure}

% \index{Categoria!--- comma} % per questa dobbiamo prima definire i funtori

\index{Categoria!--- opposta}
\begin{definition}\label{def_cat_opp}
	Data una categoria \(\ctC\), la \emph{categoria opposta} o \emph{duale} \(\ctC^\op\) ha
	\begin{itemize}
		\item come oggetti, gli stessi oggetti di \(\ctC\);
		\item come morfismi, un morfismo \(f^\op:Y\to X\) per ogni morfismo \(f:X\to Y\) di \(\ctC\);
		\item per ogni oggetto \(X\), l'identità è data da \((\id_X)^\op\);
		\item dati due morfismi \(f\) e \(g\) componibili in \(\ctC\), la composizione di \(f^\op\cmp g^\op\) è data da \((g\cmp f)^\op\). Si noti l'ordine inverso della composizione:
		% https://q.uiver.app/#q=WzAsOCxbMCwxLCJcXHRleHR7aW4gfVxcY3RDOiJdLFsxLDAsIlgiXSxbMSwxLCJZIl0sWzIsMSwiWiJdLFszLDEsIlxcdGV4dHtpbiB9XFxjdENeXFxvcDoiXSxbNCwwLCJYIl0sWzQsMSwiWSJdLFs1LDEsIloiXSxbMSwyLCJmIiwyXSxbMiwzLCJnIiwyXSxbNyw2LCJnXlxcb3AiXSxbNiw1LCJmXlxcb3AiXSxbMSwzLCJnXFxjbXAgZiJdLFs3LDUsImZeXFxvcFxcY21wIGdeXFxvcCA9IChnXFxjbXAgZileXFxvcCIsMl1d
		\[\begin{tikzcd}
			& X &&& X \\
			{\text{in }\ctC:} & Y & Z & {\text{in }\ctC^\op:} & Y & Z
			\arrow["f"', from=1-2, to=2-2]
			\arrow["g"', from=2-2, to=2-3]
			\arrow["{g^\op}", from=2-6, to=2-5]
			\arrow["{f^\op}", from=2-5, to=1-5]
			\arrow["{g\cmp f}", from=1-2, to=2-3]
			\arrow["{f^\op\cmp g^\op = (g\cmp f)^\op}"', from=2-6, to=1-5]
		\end{tikzcd}\]
		%   \[
		%       \begin{tikzcd}
			% 	      \text{in }\ctC: & X \ar{r}[swap]{f} \ar[bend left=20]{rr}{g\cmp f} & Y \ar{r}[swap]{g} & Z \\
			% 	      \text{in }\ctC^\op: &X & Y  \ar{l}[swap]{f^\op} & Z \ar{l}[swap]{g^\op} \ar[bend left=20]{ll}{f^\op\cmp g^\op=(g\cmp f)^\op}
			%       \end{tikzcd}
		%   \]
	\end{itemize}
\end{definition}
\begin{example}[Categorie e monoidi opposti]\label{mon_opposti_cat_opposte}
	Guardando un monoide \((M,\cdot,1)\) come una categoria \(\susp M\), la categoria opposta \((\susp M)^\op\) coincide col \emph{monoide opposto} \(M^\op\), dove l'ordine dell'operazione è stato rovesciato: in \(M^\op\), si ha l'operazione \(\cdot^\op\) definita da \(x\cdot^\op y \defeq y\cdot x\), e \(1^\op \defeq 1\). Evidentemente, \((M^\op)^\op = M\), e un monoide è commutativo se e solo se \(M^\op=M\).

	Come è noto da un qualsiasi corso di algebra astratta, in particolare, se \(M\) è un gruppo l'operazione di inversione \(g\mapsto g^{-1}\) è un omomorfismo \(G^\op\to G\), \emph{ma non} \(G\to G\).
\end{example}
\begin{example}
	Guardando un insieme ordinato \((P,\le)\) come una categoria al modo di \ref{ord_sonocat}, la categoria \((P,\le)^\op\) consta dello stesso insieme di elementi ordinati `a rovescio':
	\[x\le^\op y \, \text{in \(P^\op\)}\iff y\le x\, \text{in \(P\)}.\]
	Quando questo non dà luogo a confusione, l'ordine opposto di \(P\) si indica rovesciando il simbolo di minore, cioè con \(\ge\), in modo che \(x\ge y\)\dots{} se e solo se \(y\le x\)!
\end{example}
\begin{proposition}
	Il \emph{principio di dualità} in teoria delle categorie afferma che ogni asserto valido nel linguaggio della teoria ammette un enunciato duale a sua volta valido, che si ottiene invertendo i ruoli di dominio e codominio e (conseguentemente) l'ordine della composizione in una categoria.

	Per rendere preciso questo principio dobbiamo fare uso di alcune nozioni elementari di logica; svolgere davvero questo compito (cioè scrivere un linguaggio al primo ordine, dove esprimere veramente la teoria delle categorie) sarebbe fuorviante,\footnote{Chi legge consulti \cite{ETCC} per approfondimenti, se lo desidera.} quindi ci limitiamo a una esposizione semi-formale, definendo il \emph{linguaggio \(\mathsf{CT}\)} come quello che ha
	\begin{itemize}
		\item per costanti i simboli \(A,B,C,\dots : \ctC_0\) degli oggetti e i simboli \(f,g,h,\dots : \ctC_1\) dei morfismi (in particolare $A,B,C,\dots$ hanno \emph{sorte} $\ctC_0$ e $f,g,h,\dots$ sorte $\ctC_1$);
		\item le funzioni dominio e codominio \(d,c : \ctC_1\to\ctC_0:f\mapsto d(f),c(f)\);
		\item la funzione di costruzione dell'identità \(\id : \ctC_0\to \ctC_1 : A\mapsto \id[A]\);
		\item l'operazione di composizione \(\_\cmp\_ : \ctC_2 \to \ctC_1\) dove ricordiamo che
		\[\ctC_2 := \{(f,g) : \ctC_1\times\ctC_1\mid c(f) = d(g)\}\subseteq\ctC_1\times\ctC_1\]
	\end{itemize}
	tutto ciò soggetto alle equazioni
	\begin{center}
		\begin{tabular}{ccc}
			\(d(\id[A])=A\)       &  & \(c(\id[A])=A\)       \\\midrule
			\(f\cmp \id[df]=f\) &  & \(\id[cf]\cmp f=f\) \\\midrule
			\(d(g\cmp f)=df\)    &  & \(c(g\cmp f)=cg\)    \\\midrule
			\multicolumn{3}{c}{\(h\cmp (g\cmp f)=(h\cmp g)\cmp f\)}
		\end{tabular}
	\end{center}
	(che vanno interpretate `in contesto', cioè ad esempio \((g,f) \in \ctC_2\vdash d(g\cmp f)=d(f)\) eccetera).

	Il principio di dualità si enuncia come segue.
	Data una formula \(\Sigma\) nel linguaggio \(\mathsf{CT}\), possiamo costruire la formula duale per sostituzione, \(\Sigma^\op:=\Sigma[d/c,c/d,\cmp/\cmp^\op]\)\footnote{\`E chiaro cosa lo scambio di \(d,c\) significhi: prima si sostituisce \(d\) con un simbolo vergine \(\hat c\) e \(c\) con un simbolo vergine \(\hat d\), e poi si sosituisce \(\hat c\) con \(c\) e \(\hat d\) con \(d\):
		\[\Sigma \squig \Sigma[d/\hat c,c/\hat d]\squig \Sigma[\hat c/c,\hat d/d] =:\Sigma^\op\]
		ma questa pedanteria è eccessiva.} dove \(\_\cmp^\op\_\) è definita come \(u\cmp^\op v = v\cmp u\) (e questa è una buona definizione, dopo lo scambio \(d\leftrightarrows c\)).
	\begin{quote}%[Principio di dualità in una categoria]
		Se \(\Sigma\) è valido in \(\mathsf{CT}\) (in simboli, \(\mathsf{CT}\vDash \Sigma\)) allora \(\Sigma^\op\) è valido in \(\mathsf{CT}\) (\(\mathsf{CT}\vDash \Sigma^\op\)).
	\end{quote}
\end{proposition}
\begin{remark}
	Il principio di dualità è molto lontano dall'affermare che un asserto è vero in una categoria \(\ctC\) se e solo se esso è vero in \(\ctC^\op\); l'asserto va (formalizzato, cioè espresso come un enunciato nel linguaggio \(\mathsf{CT}\)) \emph{e dualizzato}, ed è solo dopo questa dualizzazione che esso vale (in \(\ctC^\op\), non necessariamente in \(\ctC\)!).

	Ad esempio: nell'insieme parzialmente ordinato dei numeri naturali ogni sottoinsieme $S\subseteq\bbN$ non vuoto ammette un minimo $\min S$. L'ordine parziale $(\bbN,\le)$ è una categoria, e il minimo di un insieme (non vuoto e) ordinato si descrive in termini della relazione d'ordine (cioè della classe dei suoi morfismi) come
	\[z = \min S \iff (z\in S)\land (\forall k\in S.z\le k)\]
	del resto, \(\bbN^\op = \{\dots\le 2 \le 1 \le 0\}\) non ha un \emph{minimo}, bensì un \emph{massimo}.
\end{remark}
Le categorie che si identificano alla propria opposta meritano quindi un nome specifico.
\begin{definition}
	Diciamo che una categoria \(\ctC\) è \emph{autoduale} se \(\ctC=\ctC^\op\).
\end{definition}
\begin{example}
	Chiaramente, la categoria vuota \(\ctInit\) è autoduale (ossia \(\ctInit^\op=\ctInit\)) e altrettanto è vero per la categoria terminale \(\ctTerm\) e per la categoria discreta \(A^\delta\) di \ref{ex_cat_discreta}.

	La categoria \(\Delta[n]\) di \ref{ex_cat_catena} si identifica alla sua opposta mediante la funzione \(j\mapsto n-j\), la quale inverte l'ordine, e risulta quindi in un anti-isomorfismo tra l'insieme ordinato \(\Delta[n]=(\{0,1,\dots,n\},\le)\) e l'insieme ordinato \(\Delta[n]^\op = (\{0,1,\dots,n\},\ge)\).

	La categoria codiscreta di \ref{ex_cat_codiscreta} si identifica alla sua opposta mediante la corrispondenza che è l'identità sugli oggetti, e che scambia tra loro il morfismo \(u_{aa'}\) (notazioni come in \ref{ex_cat_codiscreta}) e \(u_{a'a} = u_{aa'}^{-1}\).

	Le categorie `spanna generica' e `cospanna generica' sono opposte l'una dell'altra, e altrettanto è vero per le categorie \(S^\lhd\) e \(S^\rhd\):
	\[(\Lambda^2_0)^\op = \Lambda^2_2\qquad\qquad (S^\lhd)^\op = S^\rhd\]
\end{example}
\begin{definition}[Incubi e succube sopra un oggetto]\label{def_cat_slice}\index{Categoria!--- incubo}\index{Categoria!--- succuba|see {incubo}}\index{Categoria!--- sopra un oggetto}\index{Categoria!--- sotto un oggetto|see {sopra un oggetto}}
	Sia \(\ctC\) una categoria, e \(X\) un oggetto di \(\ctC\).
	La \emph{categoria incubo} sopra \(X\), denotata \(\ctC/X\), o semplicemente \emph{categoria sopra} \(X\) è definita come segue:%\todo{`Su' o `sopra'? In algebra cosa si dice di solito, \emph{modulo sull'anello} o \emph{modulo sopra l'anello}?} ha
	\begin{itemize}
		\item gli oggetti sono coppie \((A,p)\) dove \(A\) è un oggetto di \(\ctC\) e \(p : A\to X\) è un morfismo di \(\ctC\);
		\item i morfismi \((A,p)\to(B,q)\) sono morfismi \(f:A\to B\) di \(\ctC\) tali che \(q\cmp f=p\), ovvero tali che il seguente diagramma commuta.
		\[
		\begin{tikzcd}[column sep=small]
			A \ar{rr}{f} \ar{dr}[swap]{p} && B \ar{dl}{q} \\
			& X
		\end{tikzcd}
		\]
	\end{itemize}

	La \emph{categoria succuba sotto \(X\)}, denotata \(X/\ctC\), o semplicemente \emph{categoria sotto} \(X\) ha
	\begin{itemize}
		\item per oggetti, coppie \((A,p)\) dove \(A\) è un oggetto di \(\ctC\) e \(p:X\to A\) è un morfismo di \(\ctC\);
		\item per morfismi \((A,p)\to(B,q)\), frecce \(f:A\to B\) di \(\ctC\) tali che \(q=f\cmp p\), ovvero tali che il seguente diagramma commuta.
		\[
		\begin{tikzcd}[column sep=small]
			& X \ar{dl}[swap]{p} \ar{dr}{q}  \\
			A \ar{rr}[swap]{f} && B
		\end{tikzcd}
		\]
	\end{itemize}
  \begin{figure}
    \begin{center}
    \begin{tikzpicture}[
        x=6em, y=6em,
        dot/.style={
            circle,
            fill=#1,
            draw=black,
            inner sep=0pt,
            outer sep=2pt,
            minimum size=4pt,
            draw=none,
          },
        wrap/.style={
            inner sep=0,
            fill=black!5,
            rounded corners,
            inner sep=1em,
          },
      ]

      \def\seedC{37}
      \def\seedD{11}

      \begin{scope}[local bounding box=C]
        \path node[font=\Large] (0) at (0,0) {$\star$};

        \GimmeBounds{\seedC}{5}
        \pgfmathsetseed{\seedC}
        \foreach \i in {1,...,5} {
            \pgfmathsetmacro{\x}{(rnd-\xmid)/(\xmax-\xmin)}
            \pgfmathsetmacro{\y}{(rnd-\ymid)/(\ymax-\ymin)}
            \path node[dot=black] (+\i) at (2*\x,\y+1) {};
          }

        \GimmeBounds{\seedD}{6}
        \pgfmathsetseed{\seedD}
        \foreach \i in {1,...,4} {
            \pgfmathsetmacro{\x}{(rnd-\xmid)/(\xmax-\xmin)}
            \pgfmathsetmacro{\y}{(rnd-\ymid)/(\ymax-\ymin)}
            \path node[dot=black] (-\i) at (2*\x,\y-1) {};
          }
      \end{scope}

      \begin{scope}[xshift=18em, local bounding box=C/0]
        \GimmeBounds{\seedC}{5}
        \pgfmathsetseed{\seedC}
        \foreach \i/\l in {1/$f$,2/$g$,3/$h$,4/,5/$i$} {
            \pgfmathsetmacro{\x}{(rnd-\xmid)/(\xmax-\xmin)}
            \pgfmathsetmacro{\y}{(rnd-\ymid)/(\ymax-\ymin)}
            \ifnum\i=4\else
            \path node (+\i/0) at (2*\x,\y+1) {\l};
            \fi
          }
      \end{scope}

      \begin{scope}[xshift=18em, local bounding box=0/C]
        \GimmeBounds{\seedD}{6}
        \pgfmathsetseed{\seedD}
        \foreach \i/\l in {1/$p$,2/$q$,3/$r$,4/$s$} {
            \pgfmathsetmacro{\x}{(rnd-\xmid)/(\xmax-\xmin)}
            \pgfmathsetmacro{\y}{(rnd-\ymid)/(\ymax-\ymin)}
            \path node (0/-\i) at (2*\x,\y-1) {\l};
          }
      \end{scope}

      \foreach \s/\l in {1/$f$,2/$g$,3/$h$,5/$i$} {
        \draw[-latex,draw=ibmMagenta] (+\s) -- node[auto] {\l} (0);
      }
      \foreach \t/\l in {1/$p$,2/$q$,3/$r$,4/$s$} {
        \draw[-latex,draw=ibmBlue] (0) -- node[auto] {\l} (-\t);
      }

      \foreach \s/\t in {3/5,5/2} {
        \draw[-latex] (+\s) -- (+\t);
        \draw[-latex] (+\s/0) -- (+\t/0);
      }
      \foreach \s/\t in {1/2,2/3,3/4,2/4} {
        \draw[-latex] (-\s) -- (-\t);
        \draw[-latex] (0/-\s) -- (0/-\t);
      }

      \begin{scope}[on background layer]
        \path node[wrap, fit=(C.south west)(C.north east)] {};
        \path node[wrap, fit=(C/0.south west)(C/0.north east)] {};
        \path node[wrap, fit=(0/C.south west)(0/C.north east)] {};
      \end{scope}

      \node [below=1.5em of C] {$\ctC$};
      \node [below=1.5em of C/0] {$\ctC/\star$};
      \node [below=1.5em of 0/C] {$\star/\ctC$};
    \end{tikzpicture}
    \caption{TODO}
    \label{fig_cat_incubo_e_succuba}
    \end{center}
  \end{figure}
\end{definition}
Diverse costruzioni familiari della matematica di base si esprimono facilmente come categorie sopra o sotto oggetti fissati. Raccogliamo alcuni esempi (riempire i dettagli mancanti nelle definizioni è un utile esercizio per familiarizzare con le definizioni in \ref{def_cat_slice}).
\begin{example}\label{def_spazi_pun_succuba}\index{Categoria!--- degli spazi puntati}\index{Spazi topologici}
	La categoria degli insiemi puntati \(\ctSet_*\) costruita nell'Esempio \ref{ex_cat_puntati} si può vedere equivalentemente come la categoria succuba \(1/\ctSet\), dove \(1\) è un insieme con un solo elemento: ciò perché la scelta di una funzione $a_0 : 1\to A$ consiste esattamente della scelta di un elemento $a_0\in A$.

	In maniera simile, si possono costruire gli \emph{spazi topologici puntati}, formando la categoria \(\ctTop_*=1/\ctTop\), dove \(1\) è uno spazio topologico con un solo punto.
\end{example}
\begin{example}[Colorazioni di insiemi]\label{ex_set_colorati}\index{Categoria!--- degli insiemi colorati}
	Se \(\{\iter r\}\) denota un insieme con \(r\) elementi, una \emph{colorazione} di un insieme \(X\) consiste di una funzione \(c : X \to \{\iter r\}\) (di modo che gli elementi di \(X_i := c^{-1}(i)\) siano gli elementi `colorati' nel modo \(i\)); molti problemi di combinatoria enumerativa elementare riguardano colorazioni di insiemi finiti, e quindi essi possono essere enunciati attraverso la categoria incubo sopra \(\{\iter r\}\).
\end{example}
Un esempio più raffinato, sullo stesso spirito del precedente, è il seguente.
\begin{example}[Colorazioni di grafi]\label{ex_grph_colorati}\index{Categoria!--- dei grafi colorati}
	Una \emph{$n$-colorazione} di un grafo non diretto come in \ref{ex_cat_grafi_nondiretti} consiste della scelta di una colorazione $c : V \to \{1,\dots,n\}$, che assegna un colore ad ogni vertice $V$ di un grafo $\ctG=(E,V)$, in modo tale che due vertici collegati da un lato non siano dello stesso colore.

	Una $n$-colorazione per un grafo $\ctG$ corrisponde precisamente al dato di un omomorfismo di grafi $\ctG\to\ctK_n$ verso il \emph{grafo completo} su $n$ vertici:
	\begin{itemize}
		\item i vertici di $\ctK_n$ sono gli elementi di $\{1,\dots,n\}$;
		\item due vertici $i,j$ sono in relazione se e solo se $i\ne j$.
	\end{itemize}
	Da ciò segue che la categoria dei grafi $n$-colorati, i cui oggetti sono grafi con una $n$-colorazione, e i cui morfismi rispettano la colorazione, è precisamente la categoria incubo di $\ctGph$ sopra $\ctK_n$.
  \begin{figure}[h]
    \begin{center}
      \begin{tikzpicture}[
          x=2em, y=2em,
          dot/.style={
            circle,
            fill=#1,
            inner sep=0pt,
            minimum size=4pt,
            draw=none,
          },
          homo/.style={
            gray,
            dashed,
            ultra thin,
          },
          wrap/.style={
            fill=black!5,
            rounded corners,
            inner sep=1em,
          },
        ]

        \begin{scope}[xshift=0em]
          \path
            node[dot=ibmMagenta] (cNose)  at (+0.0,+0.0) {}
            node[dot=ibmBlue]    (rNose)  at (+0.3,+0.3) {}
            node[dot=ibmYellow]  (lNose)  at (-0.3,+0.3) {}
            node[dot=ibmBlue]    (rMouth) at (+1.1,-0.1) {}
            node[dot=ibmYellow]  (lMouth) at (-1.1,-0.1) {}
            node[dot=ibmBlue]    (rEye)   at (+1.1,+0.8) {}
            node[dot=ibmYellow]  (lEye)   at (-1.1,+0.8) {}
            node[dot=ibmBlue]    (rNeck)  at (+1.8,-0.4) {}
            node[dot=ibmYellow]  (lNeck)  at (-1.8,-0.4) {}
            node[dot=ibmMagenta] (rEar)   at (+1.8,+2.2) {}
            node[dot=ibmMagenta] (lEar)   at (-1.8,+2.2) {}
            node[dot=ibmBlue]    (rHead)  at (+1.3,+1.8) {}
            node[dot=ibmYellow]  (lHead)  at (-1.3,+1.8) {};
          \draw
            (lMouth) to[bend right]    (cNose)
            (cNose)  to[bend right]    (rMouth)
            (cNose)  to[bend right=10] (rNose)
            (rNose)  to[bend right=10] (lNose)
            (lNose)  to[bend right=10] (cNose)
            (lNeck)  to[bend left=20]  (lEar)
            (lEar)   to[bend left=10]  (lHead)
            (lHead)  to[bend left]     (rHead)
            (rHead)  to[bend left=10]  (rEar)
            (rEar)   to[bend left=20]  (rNeck);
        \end{scope}

        \begin{scope}[on background layer]
          \path node[wrap, fit=(lNeck)(rEar)] {};
        \end{scope}

        \begin{scope}[xshift=12em]
          \foreach \i/\c/\color in {0/G/ibmYellow,1/R/ibmMagenta,2/B/ibmBlue}
            \node[dot=\color] (p\c) at ($({120*\i-210+180}:1.5)+(0em,10em)$) {};
          \draw (pG) -- (pR) -- (pB) -- (pG);
          \path
            node[dot=black] (cNose)  at (+0.0,+0.0) {} edge[homo]               (pR)
            node[dot=black] (rNose)  at (+0.3,+0.3) {} edge[homo,bend left=20]  (pB)
            node[dot=black] (lNose)  at (-0.3,+0.3) {} edge[homo,bend right=20] (pG)
            node[dot=black] (rMouth) at (+1.1,-0.1) {} edge[homo,bend left=20]  (pB)
            node[dot=black] (lMouth) at (-1.1,-0.1) {} edge[homo,bend right=20] (pG)
            node[dot=black] (rEye)   at (+1.1,+0.8) {} edge[homo,bend left=20]  (pB)
            node[dot=black] (lEye)   at (-1.1,+0.8) {} edge[homo,bend right=20] (pG)
            node[dot=black] (rNeck)  at (+1.8,-0.4) {} edge[homo,bend left=20]  (pB)
            node[dot=black] (lNeck)  at (-1.8,-0.4) {} edge[homo,bend right=20] (pG)
            node[dot=black] (rEar)   at (+1.8,+2.2) {} edge[homo,bend right=30] (pR)
            node[dot=black] (lEar)   at (-1.8,+2.2) {} edge[homo,bend left=30]  (pR)
            node[dot=black] (rHead)  at (+1.3,+1.8) {} edge[homo,bend left=10]  (pB)
            node[dot=black] (lHead)  at (-1.3,+1.8) {} edge[homo,bend right=10] (pG);
          \draw
            (lMouth) to[bend right]    (cNose)
            (cNose)  to[bend right]    (rMouth)
            (cNose)  to[bend right=10] (rNose)
            (rNose)  to[bend right=10] (lNose)
            (lNose)  to[bend right=10] (cNose)
            (lNeck)  to[bend left=20]  (lEar)
            (lEar)   to[bend left=10]  (lHead)
            (lHead)  to[bend left]     (rHead)
            (rHead)  to[bend left=10]  (rEar)
            (rEar)   to[bend left=20]  (rNeck);
        \end{scope}

        \begin{scope}[on background layer]
          \path node[wrap, fit=(lNeck)(rEar)(pR)] {};
        \end{scope}
      \end{tikzpicture}
    \end{center}
    \caption{Una 3-colorazione di un grafo $\ctG$ a forma di gatto. I vertici di $\ctG$ sono etichettati da dei colori (gli elementi dell'insieme $C = \{\yellowDot,\redDot,\blueDot\}$), di modo che resti definito un omomorfismo $f : \ctG \to\ctK_G$ di grafi non diretti verso il grafo completo costruito sull'insieme $C$, che estende la colorazione $c : V\to C$. Questo significa: dato un vertice $v$, $c(v)=\redDot$ se e solo se $f(v)=\redDot$ (e lo stesso vale per gli altri colori).}
    \label{fig_n_colorazione_grafo}
  \end{figure}
\end{example}
\begin{example}[Intervalli]\label{ex_pos_slices}\index{Categoria!--- intervallo di un poset}
	Se \((\bbR,\le)\) denota l'insieme dei numeri reali linearmente ordinato nel modo usuale, ed \(x\in\bbR\) è un numero reale, la categoria \(\bbR/x\) è il semi-intervallo inferiormente illimitato \((-\infty,t]:=\{t\le x\}\), e analogamente \(x/\bbR\) è il semi-intervallo \([t,+\infty)\). Più in generale, in ogni insieme parzialmente ordinato \((P,\le)\) guardato come categoria, l'incubo \(P/x\) sopra \(x\in P\) consiste dell'intervallo \(\{t\le x\}\) dotato dell'ordine indotto da \(P\), e similmente accade per \(x/P\). (Se \(a,b\in\bbR\) con l'ordine usuale, e \(a\le b\), si noti anche che \((a/\bbR)/(a\le b)\) è esattamente l'intervallo limitato \([a,b]\).)
\end{example}
\begin{example}[Spazi incubi, fibrati, rivestimenti]\label{ex_fibrati_rivestimenti}\index{Categoria!--- dei rivestimenti}
	Dato uno spazio topologico \(X\), la categoria incubo \(\ctTop/X\) è quella degli spazi incubi sopra \(X\), o fibrati generalizzati. Tra questi, isoliamo
	\begin{itemize}
		\item i \emph{fibrati banali}, ossia le proiezioni \(A\times X \to X\) dove \(A\) è uno spazio topologico arbitrario detto \emph{fibra generica};
		\item i \emph{fibrati localmente banali}, ossia gli oggetti \(p : E\to X\) di \(\ctTop/X\) con la proprietà che esiste un ricoprimento aperto \(\{U_i\}\) di \(X\) tale che \(p|_i : p^{-1}U_i\to U_i\) sia un fibrato banale in \(\ctTop/U_i\). Equivalentemente, un fibrato è localmente banale se per ogni punto \(x\in X\) esiste un aperto \(U_x\) tale che \(p|_x : p^{-1}U_x\to U_x\) sia banale, cioè \(p^{-1}U_x\) è omeomorfo a \(U_x\times A_x\) per qualche \(A_x\in\ctTop_0\).
	\end{itemize}
	La sottocategoria \(\cate{Fib}/X\) dei fibrati sopra \(X\) è piena in \(\ctTop/X\). La sottocategoria dei \emph{rivestimenti} sopra \(X\), dove le fibre generiche sopra i punti \(x\in X\) sono spazi discreti, trova interessanti applicazioni in topologia algebrica.
\end{example}
\begin{example}[Spazi affini]\label{ex_affini}\index{Categoria!--- degli spazi affini}
	Consideriamo la categoria \(k\emdash\ctVect\) degli spazi vettoriali su un campo \(k\); a partire dall'incubo \(\ctVect/k\) definiamo la categoria \(\ctA\) come segue:
	\begin{itemize}
		\item gli oggetti sono mappe lineari \emph{suriettive} \(A : V\to k\);
		\item i morfismi sono gli stessi di \(\ctVect/k\).
	\end{itemize}
	Ogni oggetto di \(\ctA\) determina uno spazio affine (non vuoto) modellato su \(k\) ottenuto considerando lo spazio vettoriale \(A_0 = \ker A\) la cui somma di vettori agisce in maniera transitiva sull'insieme di punti \(A_1 := A^{-1}(1_k)\) (\(0_k,1_k\) sono rispettivamente l'elemento neutro additivo e quello moltiplicativo del campo \(k\)).
\end{example}
\begin{example}[Implicazioni in contesto]\label{ex_boole_cpc}\index{Categoria!--- del calcolo proposizionale}
	\`E noto dai corsi di logica elementare che l'insieme \(\ctB=\{\varphi,\psi,\dots\}\) delle formule ben formate del calcolo proposizionale (classico) forma un'algebra di Boole rispetto all'ordine
	\[\varphi\le\psi \overset{\text{def}}\iff \varphi \to \psi\]
	dove \(\_\to\_\) è l'implicazione logica. (A meno che non consideriamo le classi di equivalenza rispetto alla relazione
	\[\varphi\equiv\psi \overset{\text{def}}\iff (\varphi\le \psi) \; \& \; (\psi\le\varphi)\]
	questo insieme è solamente \emph{pre}ordinato.) Consideriamo la categoria \(\ctB/\varphi\); in base a \ref{ex_pos_slices} questa coincide con il segmento \(\{\alpha\le\varphi\}\), il quale in base alla definizione di \(\_\le\_\) si identifica all'insieme degli \(\alpha\) tali che \(\alpha\) implica \(\varphi\), dotato dell'ordine indotto.

	La categoria-ordine \(\ctB/\varphi\) modella la struttura della classe delle proposizioni \(\alpha,\beta,\dots\) dove \(\alpha \to \beta\) (in \(\ctB/\varphi\)) se e solo se \(\alpha \land \varphi \to \beta\) (in \(\ctB\)). In breve, $\varphi$ fa da \emph{contesto} in cui le proposizioni sono determinate.
\end{example}
\begin{definition}\label{def_cat_frecce}\index{Categoria!--- delle frecce}
	Data una categoria \(\ctC\), la \emph{categoria delle frecce} o \emph{dei morfismi} di \(\ctC\), denotata $\ctC^\to$, ha
	\begin{itemize}
		\item come oggetti, le frecce \(f:A\to B\) di \(\ctC\);
		\item come morfismi \(f\to f'\), coppie di frecce \(p:A\to A'\) e \(q:B\to B'\) che fanno commutare il seguente quadrato,
		\[
		\begin{tikzcd}
			A \ar{r}{f} \ar{d}{p} & B \ar{d}{q} \\
			A' \ar{r}{f'} & B'
		\end{tikzcd}
		\]
		ossia tali che \(q\cmp f=f'\cmp p\).
	\end{itemize}
\end{definition}

\begin{definition}[Categoria delle spanne e cospanne]\label{def_span_e_cospan}\index{Categoria!--- degli span}\index{Categoria!--- dei cospan|see {span}}
	Data una categoria \(\ctC\), la categoria \(\ctSpan(\ctC)\) delle \emph{spanne} (in inglese, \emph{span}) di \(\ctC\) ha
	\begin{itemize}
		\item Come oggetti, le \emph{spanne} di \(\ctC\), ovvero coppie di frecce \(f,g\) di \(\ctC\) con lo stesso dominio:
		\[
		\begin{tikzcd}[row sep=small]
			& A \ar{dl}[swap]{f} \ar{dr}{g} \\
			B && C
		\end{tikzcd}
		\]
		\item Come morfismi \((f,g)\to (f',g')\), triple di frecce \(p:A\to A'\), \(q:B\to B'\) e \(r:C\to C'\) che fanno commutare il seguente diagramma,
		\begin{equation}
		\begin{tikzcd}[row sep=small]
			& A \ar{dd}{p} \ar{dl}[swap]{f} \ar{dr}{g} \\
			B \ar{dd}{q} && C \ar{dd}{r} \\
			& A' \ar{dl}{f'} \ar{dr}[swap]{g'} \\
			B' && C'
		\end{tikzcd}
  \label{mor_spanne}
		\end{equation}
		ossia tali che \(q\cmp f=f'\cmp p\) e \(r\cmp g=g'\cmp p\).
	\end{itemize}

	La categoria \(\ctCospan(\ctC)\) delle \emph{cospanne} di \(\ctC\) ha
	\begin{itemize}
		\item Come oggetti, le \emph{cospanne} di \(\ctC\), ovvero coppie di frecce \(f,g\) di \(\ctC\) con lo stesso codominio:
		\[
		\begin{tikzcd}[row sep=small]
			A \ar{dr}{f} && B \ar{dl}[swap]{g} \\
			& C
		\end{tikzcd}
		\]
		\item Come morfismi \((f,g)\to (f',g')\), triple di frecce \(p:A\to A'\), \(q:B\to B'\) e \(r:C\to C'\) che fanno commutare il seguente diagramma,
		\[
		\begin{tikzcd}[row sep=small]
			A \ar{dd}{p} \ar{dr}{f} && B \ar{dd}{q} \ar{dl}[swap]{g} \\
			& C \ar{dd}{r} \\
			A' \ar{dr}[swap]{f'} && B' \ar{dl}{g'} \\
			& C'
		\end{tikzcd}
		\]
		ossia tali che \(r\cmp f=f'\cmp p\) e \(r\cmp g=g'\cmp q\).
	\end{itemize}
\end{definition}
Chi legge rifletta su questa domanda: la categoria \(\ctCospan(\ctC)\) è \(\ctSpan(\ctC)^\op\) oppure \(\ctSpan(\ctC^\op)^\op\)? C'è differenza tra le due?
\begin{definition}
	Date due categorie \(\ctC,\ctD\) il \emph{giunto} (in inglese, \emph{join}) di \(\ctC\) e \(\ctD\), denotato con \(\ctC\star\ctD\), è la categoria definita come segue:
	\begin{itemize}
		\item gli oggetti sono l'unione disgiunta di \(\ctC_0\) e \(\ctD_0\) (cioè gli stessi oggetti di \(\ctC+\ctD\) in \ref{def_cat_somma});
		\item i morfismi \(\Hom{(\ctC\star\ctD)}(X,Y)\) sono specificati per casi:
		      \begin{itemize}
			      \item se \(X,Y\in\ctC_0\), \(\Hom{(\ctC\star\ctD)}(X,Y)=\Hom{\ctC}(X,Y)\);
			      \item se \(X,Y\in\ctD_0\), \(\Hom{(\ctC\star\ctD)}(X,Y)=\Hom{\ctD}(X,Y)\);
			      \item se \(X\in\ctC_0\) e \(Y\in\ctD_0\), esiste un'unica freccia \(u_{XY} : X \squig Y\); questa unica freccia si chiama l'\emph{eteromorfismo} che connette \(X\) e \(Y\);
			      \item se \(X\in\ctD_0\) e \(Y\in\ctC_0\), \(\Hom{(\ctC\star\ctD)}(X,Y)\) è vuoto.
		      \end{itemize}
	\end{itemize}
	La composizione è definita come in \(\ctC\) (o come in \(\ctD\)) quando i morfismi sono entrambi in \(\ctC\) (o in \(\ctD\)); la composizione con un eteromorfismo è un eteromorfismo:
	\[\begin{tikzcd}[row sep=2pt]
		C \ar[r] & C' \ar[r,rightsquigarrow, "u_{C'D}"] & D \ar[r,phantom, "="] & C\ar[r,rightsquigarrow, "u_{CD}"] & D\\
		C \ar[r,rightsquigarrow, "u_{CD}"'] & D \ar[r] & D' \ar[r,phantom, "="]& C \ar[r,rightsquigarrow, "u_{CD'}"'] & D'
	\end{tikzcd}\]
  \begin{figure}[h]
    \begin{center}
      \begin{tikzpicture}[
          x=4em, y=4em,
          dot/.style={
            circle,
            fill=#1,
            draw=black,
            inner sep=0pt,
            outer sep=2pt,
            minimum size=4pt,
            draw=none,
          },
          squig/.style={
            -latex,
            decorate,
            decoration={
              snake,
              amplitude=0.5pt,
              segment length=4pt,
              post length=10pt,
            },
          },
          wrap/.style={
            fill=black!5,
            rounded corners,
            inner sep=1em,
          },
        ]

        \begin{scope}[xshift=0em]
          \pgfmathsetseed{14}
          \foreach \i in {1,...,2} {
            \pgfmathsetmacro{\x}{rnd*2}
            \pgfmathsetmacro{\y}{rnd*2}
            \path node[dot=black] (C\i) at (\x,\y) {};
          }
          \foreach \i in {3,...,9} {
            \pgfmathsetmacro{\x}{rnd*2}
            \pgfmathsetmacro{\y}{rnd*2}
            \path node[dot=lightgray] (C\i) at (\x,\y) {};
          }
        \end{scope}

        \begin{scope}[xshift=10em]
          \pgfmathsetseed{12}
          \foreach \i in {1,...,3} {
            \pgfmathsetmacro{\x}{rnd*2}
            \pgfmathsetmacro{\y}{rnd*2}
            \path node[dot=black] (D\i) at (\x,\y) {};
          }
          \foreach \i in {4,...,8} {
            \pgfmathsetmacro{\x}{rnd*2}
            \pgfmathsetmacro{\y}{rnd*2}
            \path node[dot=lightgray] (D\i) at (\x,\y) {};
          }
        \end{scope}

        \draw[-latex] (C1) -- (C2);

        \draw[-latex] (D1) -- (D2);
        \draw[-latex] (D2) -- (D3);
        \draw[-latex] (D1) -- (D3);

        \foreach \i in {1,2}
          \foreach \j in {1,2,3}
            \draw[squig] (C\i) -- (D\j);

        \begin{scope}[on background layer]
          \path node[wrap, fit=(C1)(C2)(C3)(C4)(C5)(C6)(C7)(C8)(C9)] (C) {};
          \path node[wrap, fit=(D1)(D2)(D3)(D4)(D5)(D6)(D7)(D8)] (D) {};
        \end{scope}

        \node [below=0.5em of C] {$\ctC$};
        \node [below=0.5em of D] {$\ctD$};
      \end{tikzpicture}
      \caption{Giunto di \(\ctC\) e \(\ctD\) con alcuni morfismi ed eteromorfismi in evidenza.}
      \label{fig_giunto}
    \end{center}
  \end{figure}
\end{definition}
Dalla definizione della composizione in \(\ctC\star\ctD\) si può mostrare per induzione che la composizione di una \(n\)-upla di morfismi di \(\ctC\star\ctD\) di cui almeno uno è un eteromorfismo, è un eteromorfismo (tra gli appropriati dominio e codominio). Questo dimostra la proprietà associativa (e la buona definizione) della composizione con eteromorfismi. %Si noti che nessun eteromorfismo può essere invertibile (perché?).

L'operazione di giunto tra due categorie è essenziale alla loro teoria `combinatoria', e al trattarle come strutture, dato che molte costruzioni elementari si descrivono in termini di giunti: ad esempio, se \(S=\{a,b\}\) è un insieme con due elementi, la spanna generica di \ref{ex_spancospan} è il giunto \(\ctTerm\star S^\delta\), e la cospanna generica è \(S^\delta\star\ctTerm\), e relazioni analoghe valgono anche per le \(S\)-spanne ed \(S\)-cospanne generiche.

Ci sono però altre applicazioni di questa costruzione: per esempio, se \(\susp G\) è un gruppo guardato come categoria alla maniera di \ref{}, Milnor \cite{milnor1,milnor2} ha studiato la successione \[\susp G, \susp G\star\susp G, \dots, \susp G \star\dots\star \susp G =:\susp G^{\star n}\] e il suo `limite' per dei problemi di topologia.
\subsubsection*{Esercizi}
\begin{enumerate}
	\item Sia $\ctC$ una categoria, $X\in\ctC_0$ un oggetto, $f : A\to X$ una freccia: dimostrare che il doppio incubo $(\ctC/X)/f$ è un incubo di $\ctC$ (su quale oggetto?). Questa `riduzione' di un incubo iterato resta vera per l'incubo della succuba $(A/\ctC)/f$, per $f/(\ctC/X)$, e per $f/(A/\ctC)$?
	\item Se $A,B$ sono due insiemi, la categoria delle amache $\hammock AB$ ha
	\begin{itemize}
		\item per oggetti, le catene della forma
		\[A \leftarrow X_1 \to \dots \leftarrow X_n \to B\]
		\item per morfismi tra due catene $A \leftarrow X_1 \to \dots \leftarrow X_n \to B$ e $A \leftarrow Y_1 \to \dots \leftarrow Y_n \to B$ i diagrammi della forma
		% https://q.uiver.app/#q=WzAsMTAsWzAsMSwiQSJdLFsxLDAsIlhfMSJdLFsxLDIsIllfMSJdLFsyLDAsIlhfMiJdLFszLDAsIlxcZG90cyJdLFs0LDAsIlhfbiJdLFsyLDIsIllfMiJdLFszLDIsIlxcZG90cyJdLFs0LDIsIllfbiJdLFs1LDEsIkIiXSxbMSwwXSxbMiwwXSxbMSwzXSxbNSw5XSxbOCw5XSxbNCwzXSxbNCw1LCIiLDIseyJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzIsNl0sWzcsNl0sWzcsOCwiIiwwLHsic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsxLDJdLFszLDZdLFs1LDhdXQ==
		\[\begin{tikzcd}
			& {X_1} & {X_2} & \dots & {X_n} \\
			A &&&&& B \\
			& {Y_1} & {Y_2} & \dots & {Y_n}
			\arrow[from=1-2, to=2-1]
			\arrow[from=3-2, to=2-1]
			\arrow[from=1-2, to=1-3]
			\arrow[from=1-5, to=2-6]
			\arrow[from=3-5, to=2-6]
			\arrow[from=1-4, to=1-3]
			\arrow[no head, from=1-4, to=1-5]
			\arrow[from=3-2, to=3-3]
			\arrow[from=3-4, to=3-3]
			\arrow[no head, from=3-4, to=3-5]
			\arrow[from=1-2, to=3-2]
			\arrow[from=1-3, to=3-3]
			\arrow[from=1-5, to=3-5]
		\end{tikzcd}\]
		dove ogni quadrato e i due triangoli sono commutativi. (La direzione della freccia verso $X_n$ dipende dalla parità di $n$.) Se $n\ne m$, non ci sono morfismi tra le due catene.
	\end{itemize}
	Verificare se gli assiomi di categoria sono soddisfatti, con le ovvie scelte di composizione e identità; determinare quante amache di `lunghezza' zero esistono tra $A$ e $B$ per diverse scelte di $A,B$ (se $A$ è vuoto e $B$ no, se $B$ è vuoto e $A$ no, eccetera). Studiare le proprietà della \emph{giunzione} di amache, definita mandando il diagramma
 \Todo{}
	\item Un \emph{segmento binario} $(n_0,n_1,t,H)$ consiste di una coppia di interi positivi $n_0 \le n_1$,con una funzione suriettiva e monotòna $t : [n_1] \to [n_0]$, e un sottoinsieme $H\subseteq [n_0]$. Un omomorfismo tra segmenti binari $(n_0,n_1,t,H) \to (n_0',n_1',t',H')$ consiste di una coppia $(f_0,f_1)$ dove
	\begin{itemize}
		\item $f_1 : [n_1] \to [n_1']$ è una funzione iniettiva e monotòna;
		\item $f_0 : [n_0] \to [n_0']$ è una funzione monotòna;
		\item il diagramma
		\[\begin{tikzcd}
			{[n_1]}\ar[r, "t"]\ar[d, hook, "{f_1}"'] & {[n_0]} \ar[d, "f_0"]\\
			{[n_1']} \ar[r, "{t'}"'] & {[n_0']}
		\end{tikzcd}\]
		è commutativo;
		\item $f_0^{-1}(H')\subseteq H$.
	\end{itemize}
	Mostrare che questo definisce una categoria $\cate{Seg}^{[{\circ}{\bullet}]}$ dei segmenti binari.\footnote{Un segmento binario è una rappresentazione discreta e semplificata di un cromosoma: la funzione $t$ determina una partizione di $[n_1]$ in $n_0$ sottoinsiemi $t^{-1}(1),t^{-1}(2),\dots t^{-1}(n_0)$ che si può rappresentare come
		\[[{\circ}{\circ}][{\circ}{\circ}{\circ}{\circ}][{\circ}]\]
		quando $n_0=3$ e $n_1=7$; il sottoinsieme $H\subseteq n_0$ determina poi le regioni del cromosoma $\chi$ che si vogliono usare nella replicazione, e il suo complementare $H^c$ quelle che sono silenziate (\emph{masking}). Se ad esempio $H\subseteq [3]$ è l'insieme $\{1,3\}$, possiamo colorare la partizione di sopra come
		\[[{\bullet}{\bullet}][{\circ}{\circ}{\circ}{\circ}][{\bullet}].\]
		Invitiamo chi legge a trovare quale possa essere una interpretazione per un omomorfismo di segmenti!}
	\item \'E possibile rappresentare le relazioni (si veda \ref{ex_cat_rels}) sia come spanne che come cospanne. La prima rappresentazione è molto semplice (l'esercizio consiste nel verificare quanto diciamo): una relazione $R\subseteq A\times B$ corrisponde a una spanna
	\[
	\begin{tikzcd}
		A & R \ar[r, "b"]\ar[l, "a"']& B
	\end{tikzcd}
	\]
	e una spanna dello stesso tipo corrisponde a una relazione non appena la funzione $R \to A\times B$ che manda $r\in R$ nella coppia $(a(r),b(r))$ è iniettiva; di converso, la cospanna $c(R)$ associata alla relazione $R$ è definita come la categoria che ha per oggetti la somma disgiunta di insiemi $A+B$, e dove esiste un morfismo $s\to t$ se e solo se $s\in A,t\in B$ e $(s,t)\in R$. Questa cospanna
	\[
	\begin{tikzcd}
		A \ar[r] & c(R) & \ar[l] B
	\end{tikzcd}
	\]
	si dice il \emph{grafico} di $R$: per quale motivo? Si disegni la cospanna $c(R)$ per semplici relazioni tra insiemi finiti; si descriva $c(R)$ per una relazione $R\subseteq X\times X$ che sia riflessiva, per una simmetrica, per una transitiva, su un insieme $X$.
	\item Determinare il giunto di due catene generiche \(\Delta[n] \star \Delta[m]\) come in \ref{ex_cat_catena} e di due cubi \(P[n] \star P[m]\) come in \ref{ex_quadcuboncubo}, e più in generale di due insiemi parzialmente ordinati \(P,Q\). Determinare il giunto di due categorie discrete (prenderle finite!) \(A^\delta \star B^\delta\) come in \ref{ex_cat_discreta} e di due categorie codiscrete \(A^\chi \star B^\chi\): il risultato è ancora codiscreto? Più in generale, determinare il giunto di due gruppoidi \(\ctG \star \ctG'\); il risultato è ancora un gruppoide? Determinare il giunto \(\susp(\bbN,+,0) \star \susp(\bbN,+,0)\) del monoide dei numeri naturali con la somma, e \(\susp(\bbN,\max,0) \star \susp(\bbN,\max,0)\) del monoide dove la moltiplicazione è data da \(n\land m \defeq \max\{n,m\}\). C'è una relazione tra \((\ctC\star\ctD)^\op\) e \(\ctD^\op\star\ctC^\op\) (uguali, oposte una dell'altra, nessuna relazione\dots)?
\end{enumerate}
\section{Isomorfismi}\label{sec_isomorfismi}\index{Isomorfismo}
La nozione di isomorfismo tra due strutture di un dato tipo è certamente nota a chi legge, grazie ai primi corsi di algebra astratta. Non viene però menzionato che fu in larga parte la definizione di categoria data da Eilenberg e Mac Lane in \cite{gtone} a precisare definitivamente la nozione moderna di `strutture isomorfe' fissandola nell'uso matematico nella forma odierna.

Quando due gruppi sono isomorfi, `tutte' le proprietà che si esprimono in termini degli assiomi di gruppo, e che sono godute dall'uno, sono godute anche dall'altro, e in forza di questo meta-principio una strategia molto efficace per mostrare che due dati gruppi \emph{non possono} essere isomorfi è cercare una proprietà che sia goduta solo da uno dei due (per esempio, l'essere abeliano: ci sono certamente almeno due gruppi di ordine 24 distinti, il gruppo \emph{ciclico} \(\bbZ/24\bbZ\) e il gruppo \emph{simmetrico} delle permutazioni di 4 lettere \(\{a,b,c,d\}\), perché il primo è abeliano, il secondo no, e --si dimostra-- se due gruppi sono isomorfi, uno è abeliano se e solo se lo è l'altro).

La nozione di isomorfismo in teoria delle categorie generalizza e precisa molte di queste idee.
\begin{definition}[Isomorfismo]\label{def_isomorfismo}\index{Isomorfismo}\index{Morfismo!isomorfismo}
	Dati due oggetti \(X\) e \(Y\) in una categoria \(\ctC\), un \emph{isomorfismo} tra \(X\) e \(Y\) consiste di una coppia di morfismi \(f:X\to Y\) e \(g:Y\to X\) in direzioni opposte, tali che \(g\cmp f=\id_X\) e \(f\cmp g=\id_Y\).

	Il morfismo \(f\) è chiamato l'\emph{inverso} \(g^{-1}\) di \(g\) (e specularmente, \(g\) è l'inverso \(f^{-1}\) di \(f\)).

	Se esiste un isomorfismo tra \(X\) e \(Y\) diciamo che i due oggetti sono \emph{isomorfi} (spesso tralasciando mediante quale coppia di morfismi, dato che è chiaro dal contesto) e scriviamo \(X\iso Y\).\footnote{Da un punto di vista costruttivo, \(X\iso Y\) consiste di una quadrupla \((f,g, i,j)\) dove \(f : X\to Y, g: Y\to X\) e \(i,\) sono rispettivamente due dimostrazioni, che \(f\cmp g= \id_Y\) e che \(g\cmp f=\id_X\), però non insisteremo mai su questo dettaglio. Spesso diremo che `\(f\) è un isomorfismo' sottintendendo l'esistenza di \(g\), e vice versa.}
\end{definition}
\`E utile, sebbene del tutto ovvio, rappresentare mediante dei diagrammi commutativi il fatto che \(X,Y\) siano oggetti isomorfi: %un'interpretazione grafica: intuitivamente, un isomorfismo è una situazione dove l'applicazione di \(f\) si può invertire o annullare tramite \(g\), e viceversa, e si può sempre passare da \(X\) a \(Y\) senza perdere informazioni.
\[
\begin{tikzcd}
	X\ar[d, "f"'] \ar[dr, equal, "\id_X"]& & Y \ar[dr, equal, "\id_Y"]\ar[d,"g"']\\
	Y \ar[r, "g"']& X & X \ar[r, "f"']& Y
\end{tikzcd}
\]
Normalmente si indica la coppia \((f,g)\) solo con \(f\) o con \(g\), lasciando l'inverso implicito (tale inverso, se esiste, è ovviamente unico, e ciò ci autorizza a usare il singolare nella definizione).
\begin{examples}
	Raccogliamo degli esempi di isomorfismi in varie categorie:%La definizione di isomorfismo comprende molte delle nozioni di ``struttura equivalente'' usate in matematica:
	\begin{enumtag}{ei}
		\item \`E evidente che in ogni categoria \(\ctC\), tutte le identità \(\id_X : X\to X\) sono isomorfismi che coincidono col loro inverso, e che la composizione di isomorfismi \(f_1\cmp f_2\) è un isomorfismo di inverso \(g_2\cmp g_1\), cioè \((f_1\cmp f_2)^{-1} = f_2^{-1}\cmp f_1^{-1}\).
		\item In \(\ctSet\), gli isomorfismi sono esattamente le biiezioni, o `corrispondenze biunivoche'. Per la definizione solitamente data di cardinalità, due insiemi sono isomorfi se e solo se hanno lo stesso numero cardinale, che quindi risulta essere una scelta privilegiata di un oggetto di $\ctSet$, rappresentante della classe di isomorfismo di un dato insieme.
		\item In \(\bbF\emdash\ctVect\), gli isomorfismi sono le biiezioni lineari. In particolare, due spazi vettoriali \(V,W\) di dimensione finita \(\dim V=n,\dim W=m\) sono isomorfi se e solo se \(n=m\). Similmente, in \(\bbF\emdash\ctMat\) gli isomorfismi sono elementi dell'unione \(\bigcup_{n\ge 0}\text{GL}(n,\bbF)\) di tutti i gruppi delle matrici a coefficienti in $\bbF$, di taglia $n$, invertibili.
		\item In \(\ctTop\), gli isomorfismi sono gli \emph{omeomorfismi}: funzioni continue con un'inversa insiemistica anch'essa continua. In generale, può non accadere che, se \(f : X\to Y\) è un omomorfismo biiettivo, la \emph{funzione} inversa \(g : Y\to X\) sia anch'essa un isomorfismo; per esempio, l'identità \(\id_X : (X,\delta)\to (X,\gamma)\) su un insieme con tre punti \(X=\{a,b,c\}\) è continua quando \(\delta\) è la topologia discreta e \(\gamma\) è la topologia banale, ma la sua inversa insiemistica \(\id_X : (X,\gamma)\to(X,\delta)\) \emph{non} è continua.
		\item In ogni categoria di strutture algebriche (si veda \ref{ex_cat_sigma_strutture}), gli isomorfismi sono gli \emph{isomorfismi di \(\Sigma\)-strutture}, cioè le funzioni \(f : A\to B\) che sono \(\Sigma\)-omomorfismi biiettivi: qui non può accadere quanto succede negli spazi topologici: se $f : A\to B$ è un omomorfismo biiettivo, la sua inversa insiemistica deve a sua volta essere un omomorfismo dato che (ad esempio, quando $\cdot$ è una operazione binaria specificata dalla segnatura $\Sigma$ in questione)
      \[f^{-1}(x\cdot y) = f^{-1}(fa\cdot fa') = f^{-1}(f(a\cdot a')) = a\cdot a' = f^{-1}(x)\cdot f^{-1}(y).\]
      Questa è una importante differenza tra categorie di tipo `algebrico' e categorie di tipo `topologico', su cui per ora non insistiamo.
	\end{enumtag}
\end{examples}
\begin{warning}
	Spesso una categoria viene chiamata con il nome dei suoi oggetti (\(\ctVect\), \(\ctGrp\), eccetera), ma per decidere se due oggetti sono isomorfi è essenziale sapere \emph{quali sono i morfismi} per sapere che struttura in particolare vogliamo preservare. Per esempio, tutte le potenze \(\bbR,\bbR^2,\bbR^3,\dots\) sono isomorfe come insiemi (hanno la stessa cardinalità \(2^{\aleph_0}\)); ma non come spazi vettoriali reali (hanno dimensioni diverse) né come varietà differenziabili (hanno dimensioni diverse; ma il teorema di invarianza della dimensione per varietà non è completamente ovvio). Questi oggetti sono isomorfi anche come gruppi abeliani (o come spazi vettoriali \emph{sui razionali}, il che è leggermente controintuitivo: infatti la dimostrazione dipende dall'assioma della scelta).

	Per cui, nelle categorie \(\ctSet\) e \(\bbQ\emdash\ctVect\), gli oggetti \(\bbR\) e \(\bbR^2\) sono isomorfi, ma non sono isomorfi se li intendiamo come oggetti della categoria \(\bbR\emdash\ctVect\).
\end{warning}
% Si noti che le condizioni \(g\cmp f = \id_X\) e \(f\cmp g=\id_Y\) servono entrambe, perché possono valere o non valere indipendentemente l'una dall'altra.
% \begin{example}
	%  Nella categoria \(\bbR\emdash\ctVect\), si consideri la mappa \(f:\bbR\to\bbR^2\) data dall'inclusione dell'asse \(X\), \(x\mapsto(x,0)\). Data la proiezione sull'asse \(X\) data da \(g:\bbR^2\to\bbR\), \((x,y)\mapsto x\), si ha che \(g\cmp f=\id_\bbR\). Però non è vero che \(f\cmp g = \id_{\bbR^2}\). (E infatti i due oggetti non sono isomorfi come spazi vettoriali.)
	% \end{example}

\begin{definition}[Gruppoide]\label{def_gruppoide}\index{Categoria!Gruppoide}
	Una categoria in cui tutti i morfismi sono isomorfismi si chiama \emph{gruppoide}.\footnote{In inglese \emph{groupoid}. Da notare che una vecchissima terminologia coniata dal matematico norvegese Øystein Ore chiama `gruppoidi' quelli che oggi sono detti \emph{magmi}, insiemi dotati di una operazione binaria --e nessun altro assioma. Noi non useremo mai la terminologia di Ore.}
\end{definition}
\begin{example}[\(\susp(X,\sim)\) come gruppoide]\label{exa_releq_groupoid}
	Abbiamo visto che un preordine (una relazione riflessiva e transitiva) si può vedere come una categoria. Questa categoria è un gruppoide se e solo se la relazione è anche simmetrica (cioè, è un'equivalenza). Se \(x\sim y\), abbiamo un unico morfismo \(x\to y\). Questo morfismo è invertibile se e solo se esiste un morfismo \(y\to x\), cioè, se anche \(y\sim x\). (Si noti che non ci sono altre condizioni da soddisfare per avere un inverso: per esempio, il morfismo composto \(x\to y\to x\) è necessariamente uguale a \(\id_x\) per unicità.)
\end{example}
\begin{remark}
	Il preordine caotico su un insieme \(X\) (dove \(x\mathrel{\le^\chi} y\) per ogni \(x,x'\in X\)) può essere visto come un esempio di \ref{exa_releq_groupoid} dove le relazione è la relazione \emph{totale} \(\forall x,x'\in X.x\sim x'\). C'è quindi una identificazione
	\[\susp(X,\sim) = (X,\le^\chi)\]
	per ogni insieme \(X\).
\end{remark}
\begin{example}[\(\susp(G,\cdot,1)\) come gruppoide]\label{exa_grp_groupoid}
	Abbiamo visto che ogni monoide \(M\) si può considerare una categoria con un solo oggetto. Questa categoria è un gruppoide se e solo se \(M\) è un gruppo. Infatti, un morfismo \(m\) ammette un inverso nel senso della teoria delle categorie se e solo se ammette un inverso nel senso della teoria dei gruppi: \(g\cdot g^{-1}=g^{-1}\cdot g = e\).
\end{example}
\begin{example}[Gruppoide d'azione]\label{action_groupoid}\index{Gruppoide!--- d'azione}
	A ogni gruppo \((G,\cdot,1)\) si può associare il suo \emph{gruppoide delle traslazioni} (o \emph{d'azione}), denotato \(\act G\):
	\begin{itemize}
		\item gli oggetti di \(\act G\) sono gli elementi di \(G\);
		\item le frecce di \(\act G\) sono a loro volta elementi di \(G\), determinati come segue: per ogni \(g,x\in G\) esiste un morfismo \(\langle g\rangle_x : x\to g\cdot x\).
	\end{itemize}
	Ovviamente \(\langle 1_G\rangle_x : x \to 1_G\cdot x=x\) ha il ruolo di identità \(\id_x\), e la composizione è definita da \(\langle h\rangle_{gx}\cmp \langle g\rangle_x = \langle h\cdot g\rangle_x\),
	\[\begin{tikzcd}
		x \ar[r] & g\cdot x \ar[r] & h\cdot (g\cdot x) = (h\cdot g)\cdot x
	\end{tikzcd}\]
	L'associatività dell'operazione di \(G\) rende \(\act G\) una categoria.
	\begin{figure}[h]
		\begin{center}
			\begin{tikzpicture}[
					x=4em, y=4em,
					dot/.style={
							circle,
							fill=#1,
							draw=black,
							inner sep=0pt,
							outer sep=4pt,
							minimum size=8pt,
							draw=none,
						},
					wrap/.style={
							shape=circle,
							inner sep=0,
						},
					fR/.style={fill=ibmMagenta},
					fG/.style={fill=ibmYellow},
					fB/.style={fill=ibmBlue},
					dR/.style={draw=ibmMagenta},
					dG/.style={draw=ibmYellow},
					dB/.style={draw=ibmBlue},
					dK/.style={draw=black},
				]

				\foreach \n/\a/\b/\c in {%
						0/R/G/B,
						1/B/R/G,
						2/G/B/R,
						3/B/G/R,
						4/G/R/B,
						5/R/B/G%
					} {
						\foreach \i/\col in {0/\a,1/\b,2/\c} {
								\node[dot,f\col,shift=(60*\n-30:2)] (T-\n-\i) at ({120*\i-30}:0.2) {};
							};
						\path node[wrap, fit=(T-\n-0)(T-\n-1)(T-\n-2)] (O\n) {};
					};

				\foreach \i/\j/\c in {
						0/1/K,
						1/2/K,
						2/0/K,
						%
						0/3/G,
						0/4/B,
						0/5/R,
						%
						1/3/B,
						1/4/R,
						1/5/G,
						%
						2/3/R,
						2/4/G,
						2/5/B,
						%
						4/3/K,
						3/5/K,
						5/4/K%
					} {
						\draw[draw=white] (O\i) -- (O\j);
						\draw[-latex,d\c] (O\i) -- (O\j);
					};
			\end{tikzpicture}
		\end{center}
		\caption{Il gruppoide d'azione del gruppo diedrale $D_3$ (il gruppo delle simmetrie di un triangolo); i morfismi neri sono rotazioni; gli altri sono riflessioni lungo un asse, e ciascuno è denotato col colore del suo unico punto fisso.}
		\label{fig_gruppoide_d_azione}
	\end{figure}
\end{example}
\begin{definition}
	Un \emph{automorfismo} è un endomorfismo (un morfismo da un oggetto a sé stesso) invertibile. In un gruppo \((G,\cdot)\) guardato come una categoria \(\susp(G,\cdot,1)\) tutti i morfismi \(g : \star\to\star\) sono automorfismi.
\end{definition}

\begin{example}\label{ex_cat_gruppoide_naturali}
	La categoria \(\cate{Bij}\) i cui oggetti sono gli insiemi e i cui morfismi sono biiezioni è un gruppoide. Quando si prendono solo gli insiemi finiti, la categoria \(\cate{FBij}\subset\cate{Bij}\) diventa molto interessante: consta della `unione disgiunta' (o più precisamente, la \emph{categoria somma}, Definizione \ref{def_cat_somma}) di tutti i gruppi simmetrici \(S_n\), ciascuno guardato come una categoria nel senso di \ref{mon_sonocat}:
	\[\cate{FBij}\cong \sum_{n=0}^\infty \susp(S_n,\cmp)\]
	dove la notazione è quella di \ref{mon_sonocat}.
\end{example}

L'esempio precedente si può vedere come una sottocategoria di \(\ctSet\).
Più in generale, in virtù del fatto che ogni identità \(\id_X\) è un isomorfismo, e del fatto che la composizione di isomorfismi è un isomorfismo, data una categoria \(\ctC\) possiamo sempre prendere la sottocategoria che contiene tutti gli oggetti e tutti i suoi isomorfismi.
\begin{definition}\label{def_cuore}\index{Cuore!--- di una categoria}\index{Categoria!Cuore di una ---}
	Il \emph{cuore} (in inglese, \emph{core}) di una categoria \(\ctC\) è il gruppoide ottenuto prendendo
	\begin{itemize}
		\item come oggetti gli oggetti di \(\ctC\),
		\item come morfismi \(X\to Y\) gli isomorfismi di \(\ctC\) da \(X\) a \(Y\).
	\end{itemize}
\end{definition}

Si vedano gli esercizi sul perché in questo modo si ottenga una categoria (con identità e composizione).
\begin{example}[Monoidi e gruppi liberi; gruppoidi liberi]\label{mongruppi_liberi}\index{Monoide!--- libero}\index{Monoide}\index{Categoria!--- libera}
	In \ref{ex_cat_libera} abbiamo introdotto le categorie libere su un grafo. Quando il grafo $\ctG=(\bullet,E)$ è composto di un unico vertice e ha $E$ come insieme dei lati, la categoria libera $F\ctG$ ha anch'essa un unico vertice, e in virtù di \ref{mon_sonocat} l'insieme $E^* := F\ctG(\bullet,\bullet)$ è un monoide rispetto alla congiunzione di lacci. L'insieme $E^*$ è il \emph{monoide libero} sull'insieme $E$, detto solitamente `alfabeto', dato che il generico elemento di $E^*$ è della forma
	\[[\tup en;]\qquad n\ge 0, \tup en,\in E\]
	o più brevemente $[\tup en{}]$, una `parola' scritta con le `lettere' $\tup en,$. La composizione è la giustapposizione di parole $[\tup en{}]\cmp[\tup {e'}n{}] = [\tup en{}\tup{e'}n{}]$, per cui l'identità è la parola vuota $\emptyList$ (quando $n=0$).

	Costruire i gruppi liberi (probabilmente noti a chi legge dall'algebra elementare) come gruppo\emph{idi} liberi con un solo oggetto è più complicato.

	Anzitutto

	\Todo{monoidi e gruppi liberi; categorie libere e gruppoidi liberi}
\end{example}
\begin{definition}[Categoria scheletrica]\label{def_cat_scheletrica}\index{Categoria!--- scheletrica}
	Una categoria \(\ctC\) si dice \emph{scheletrica} se vale la seguente proprietà:
	\[X\iso Y \, (\text{mediante } f,g) \,\Rightarrow\, (X=Y \,\&\, f=g=\id_X),\]
	cioè se gli unici isomorfismi che esistono tra due oggetti sono le identità (alcuni esempi di categorie che sono scheletriche: \ref{ex_cat_vuota}, \ref{ex_cat_term}, \ref{ex_cat_discreta}, \ref{ex_cat_doppiafreccia}, \ref{ex_cat_catena}, \ref{ex_cat_codiscreta}, \ref{ex_cat_ordinali}).
\end{definition}
Chiaramente esistono categorie che non sono scheletriche (per esempio perché esistono molte strutture algebriche con gruppi di automorfismi molto complicati), ma da ogni categoria se ne può ottenere una scheletrica in maniera canonica: per iniziare, si noti (o si dimostri, come semplice esercizio) che `essere isomorfi' è una relazione di equivalenza sulla classe degli oggetti \(\ctC_0\).
\begin{definition}\label{def_scheletro}\index{Categoria!scheletro di una ---}
	Data una categoria \(\ctC\), lo \emph{scheletro} di \(\ctC\) è la categoria scheletrica dove
	\begin{itemize}
		\item Gli oggetti sono le classi di isomorfismo $[X],[Y],\dots$ definite sulla base del fatto che `essere isomorfi' è una relazione di equivalenza sulla classe $\ctC_0$;
		\item esiste un morfismo \([X]\to[Y]\) per ogni morfismo \(X\to Y\) di \(\ctC\) (questo non dipende dalla scelta dei rappresentanti \(X\) e \(Y\), si veda il seguente Esercizio \ref{isounico});
		\item le identità e la composizione sono indotte da quelle di \(\ctC\).
	\end{itemize}
\end{definition}

\subsubsection*{Esercizi}
\begin{enumerate}
	\item Mostrare che la composizione nella categoria \(\cate{Stream}\) definita in \ref{example_streams} è effettivamente associativa, e l'assioma di identità è effettivamente valido. %Dato un morfismo \(f:X\to Y\) in una categoria \(\ctC\), dimostra che se un inverso per \(f\) esiste, allora è unico.
	\item Caratterizzare gli isomorfismi nelle seguenti categorie:
	\begin{itemize}
		\item la categoria dei modelli di una segnatura algebrica $(\Omega,a)$;
		\item la categoria degli ordinali di \ref{ex_cat_ordinali};
		\item la categoria dell'omotopia $\ctHoTop$ di \ref{ex_cat_hotop};
		\item la categoria delle mappe stocastiche di \ref{cat_stocazziche};
		\item la categoria libera su un grafo $\ctG$ (prenderlo finito!);
		\item la categoria dei $G$-insiemi di \ref{exa_azioni_funtori}.
	\end{itemize}
	Mostrare che in un incubo $\ctC/X$ la seguente condizione caratterizza gli isomorfismi: $t : T\to X$ è un isomorfismo in $\ctC$ se e solo se per ogni altro oggetto $f : E\to X$ esiste un unica freccia $h : E\to T$ tale che $t\cmp h=f$. La stessa dimostrazione vale anche in una categoria succuba $X/\ctC$?
	\item Dati due spazi metrici \((X,d)\) e \((Y,d')\), una funzione \(f:X\to Y\) si dice \emph{Lipschitz continua} se soddisfa la disuguaglianza
	\[
	d'(fx,fx')\le \alpha d(x,x')
	\]
	per ogni \(x,x'\in X\) e per qualche \(\alpha\in\bbR_{>0}\); in tal caso, l'inf di tutti questi \(\alpha\) si chiama la \emph{costante di Lipschitz} di \(f\); dimostrare che gli spazi metrici e le funzioni Lipschitz continua sono oggetti e morfismi di una categoria, chiamata \(\cate{MetLip}\); caratterizzare gli isomorfismi di \(\cate{MetLip}\). Fornire un esempio di due spazi metrici isomorfi in \(\ctTop\), ma non in \(\cate{MetLip}\).

	Ripetere tutte queste domande rispetto alla definizione, più generale, di funzioni \emph{H\"olderiane} tra spazi metrici, ricordando che una funzione \(f : (X,d)\to (Y,d')\) si dice \(K\emdash\alpha\)-H\"olderiana quando
	\[d'(fx,fx')\le Kd(x,x')^\alpha\]
	per \(K\in \bbR_{\ge 0}\) e \(\alpha\in \bbR_{>0}\).
	(La composizione di una funzione $K\emdash\alpha$-H\"olderiana e di una $H\emdash\beta$-H\"olderiana ne dà una $KH\emdash\alpha\beta$-H\"olderiana.)
	\item\label{isounico} In una categoria localmente piccola \(\ctC\), dati due oggetti isomorfi \(X\) e \(Y\), dimostrare che per ogni oggetto \(A\), gli insiemi \(\Hom{\ctC}(A,X)\) e \(\Hom{\ctC}(A,Y)\) sono in biiezione.
	\item Generalizzare \ref{action_groupoid} come segue: dato un monoide \((M,\cdot,1)\), e un insieme \(X\) con una azione di \(M\) nel senso di \ref{ex_cat_g_insiemi}, definire la \emph{categoria d'azione} \(M/\!\!/X\) come segue:
	\begin{itemize}
		\item gli oggetti sono gli elementi di \(X\);
		\item c'è un morfismo \(\langle m\rangle_x : x\to m\cdot x\), dove \(m\cdot x\) denota l'azione di \(m\in M\) su \(x\).
	\end{itemize}
	Mostrare esplicitamente gli assiomi di categoria (rendendo così precisa questa definizione informale). Recuperare \(\act G\)  come caso particolare di questa definizione; mostrare che, quando \(M\) è un monoide libero (su un insieme \(A\) di generatori) nel senso di \ref{mongruppi_liberi}, allora \(M/\!\!/X\) è una categoria libera nel senso di \ref{ex_cat_libera} (su un grafo \(G[A]\) determinato come\dots).
	% \item Costruisci un esempio in \(\ctTop\) di oggetti \(X\) e \(Y\) non isomorfi, e morfismi \(f:X\to Y\) e \(g:Y\to X\) tali che \(g\cmp f=\id_X\) (ma \(f\cmp g \ne \id_Y\)).
	% \item Dimostra che in ogni categoria, le identità sono isomorfismi, e che la composizione di isomorfismi è un isomorfismo.
\end{enumerate}

\section{Funtori e diagrammi}\label{sec_funtori}
Dato che i monoidi e i poset si possono guardare come categorie, è una buona domanda chiedere a che tipo di trasformazioni corrispondono gli omomorfismi di monoide di \ref{ex_cat_monoidi} e le funzioni monotone di \ref{ex_cat_ordini}. Questo porta alla definizione di \emph{funtore} tra categorie.
\begin{definition}[Funtore]\label{def_funtore}\index{Funtore}
	Date due categorie \(\ctC\) e \(\ctD\), un \emph{funtore} \(F:\ctC\fun\ctD\) consiste dei seguenti dati:
	\begin{enumtag}{f}
		\item \label{f_1} Una funzione tra classi \(F_0 : \ctC_0\to\ctD_0\) che assegna ad ogni oggetto \(X\) di \(\ctC\) un oggetto \(FX\) di \(\ctD\);
		\item \label{f_2} Una funzione tra classi \(F_1 : \ctC_1\to\ctD_1\) che assegna ad ogni morfismo \(X \xrightarrow{f} Y\) di \(\ctC\) un morfismo \(FX \xrightarrow{Ff} FY\) di \(\ctD\). Si noti che da ciò segue che \(F(\dom{f})=\dom{Ff}\) e \(F(\cod{f})=\cod{Ff}\), ovvero che i due quadrati
  \[bla\]
  di funzioni di classe sono commutativi.
	\end{enumtag}
	Le funzioni di classe soddisfano le seguenti proprietà:
	\begin{enumtag}{p}
		\item \label{p_1} \emph{Preservazione delle identità}: per ogni oggetto \(X\) di \(\ctC\), \(F(\id_X)=\id_{FX}\);
		\item \label{p_2} \emph{Preservazione delle composizioni}: per ogni coppia di morfismi componibili \(f\) e \(g\) di \(\ctC\), \(F(g\cmp f)=Fg\cmp Ff\).
	\end{enumtag}
\end{definition}
\begin{remark}\label{def_alternativa_funtore}
	Una maniera alternativa di dare la definizione di funtore, che spesso torna utile nella pratica, è la seguente: un funtore \(F : \ctC\fun\ctD\) consiste di una funzione tra classi \(F_0 : \ctC_0\to \ctD_0\) come sopra, e per ogni \(X,Y\in\ctC_0\), una funzione di insiemi
	\[\dmFun{F_{XY}}{\Hom{\ctC}(X,Y)}{\Hom{\ctD}(F_0X,F_0Y)}
 % \begin{tikzcd}
	% 	F_{XY} : \Hom{\ctC}(X,Y) & \Hom{\ctD}(F_0X,F_0Y)
	% \end{tikzcd}
	\]
	tale che \(F_{XX}(\id_X) = \id_{F_0X}\) e \(F_{XZ}(g\cmp f) = F_{YZ}(g)\cmp F_{XY}(f)\). Dalle relazioni \(F(\dom{f})=\dom{Ff}\) e \(F(\cod{f})=\cod{Ff}\) e dal fatto che $\ctC_1 = \bigcup_{XY}\Hom{\ctC}(X,Y)$ discende che $F_{XY}$ non è altro che $F_1|_{\Hom{\ctC}(X,Y)}$, e viceversa, la famiglia di funzioni $F_{XY}$ si `incolla' a un'unica funzione di classe
	\[\dmFun{\bigcup_{XY}F_{XY}}{\bigcup_{XY}\Hom{\ctC}(X,Y)}{\bigcup_{XY}\Hom{\ctD}(F_0X,F_0Y)}\]
	(e il codominio di questa funzione di classe è evidentemente una sottoclasse di $\ctD_1$). \`E una prassi quasi universale, però, omettere i pedici ad \(F_{XY}\) e scrivere la definizione nella forma di \ref{p_2}.
\end{remark}
\begin{example}\label{exa_monotone_funtori}\index{Funtore!mappa monotòna come ---}
	Dati due insiemi parzialmente ordinati \((X,\le)\) e \((Y,\le)\) guardati come categorie nel senso di \ref{ord_sonocat}, un funtore \((X,\le)\fun(Y,\le)\) è precisamente una funzione monotòna nel senso di \ref{ex_cat_ordini}.

	Innanzitutto, la funzione \(f:X\to Y\) definisce una corrispondenza sugli oggetti.

	Poi, l'unica freccia \([x\le x']\) in \(X\) determina una freccia \([f(x)\le f(x')]\) se e solo se \(f\) è monotòna.% (ancora, ce n'è una unica se s solo se \(f(x)\le f(x')\)). In altre parole, \(f\) ha la proprietà che se \(x\le x'\), allora \(f(x)\le f(x')\). Cioè, \emph{\(f\) è monotòna}.

	L'identità è preservata automaticamente: per ogni \(x\), la riflessività dell'ordine di \(Y\) dà un'unica freccia \([f(x)\le f(x)]\). Con un (innocuo) abuso di notazione, \(f(\id_{x})=\id_{f(x)}\) segue da $f([x\le x])=[fx\le fx]$.

	Allo stesso modo, anche le composizioni sono preservate automaticamente.
\end{example}

\begin{example}\label{exa_funtori_da_gruppi}\index{Funtore!omomorfismi di monoidi come ---}
	% Abbiamo visto in \ref{mon_sonocat} che i monoidi (e i gruppi) si possono vedere come particolari categorie, con un solo oggetto.
	Dati due monoidi \(M\) e \(N\) guardati come categorie nel senso di \ref{mon_sonocat}, un funtore \(\susp M\fun \susp N\) è precisamente un morfismo di monoidi nel senso di \ref{ex_cat_monoidi}.

	Innanzitutto, un funtore \(\susp M\fun \susp N\) deve mappare l'unico oggetto di \(\susp M\) in quello di \(\susp N\) nell'unico modo possibile, e questo vale per tutti i funtori il cui codominio è della forma \(\susp N\) per qualche monoide \(N\).

	Sulle frecce, il funtore deve assegnare ad ogni morfismo di \(\susp M\) (ossia, ogni elemento del monoide \(M\)) un morfismo di \(\susp N\) (elemento di \(N\)). In altre parole, abbiamo una funzione \(f:M\to N\).

	In questo caso, le condizioni \ref{def_funtore}.\ref{p_1} e \ref{def_funtore}.\ref{p_2} non sono automaticamente vere: la preservazione dell'identità ci dice che \(f(1_M)=1_N\), e la preservazione delle composizioni ci dice che per ogni \(m,m'\in M\) abbiamo \(f(m\cdot m')=f(m)\cdot f(m')\).
\end{example}
\begin{terminology}[A proposito del nome `funtore']
	\`E sorprendentemente difficile attribuire con precisione la creazione del termine `funtore' a un singolo individuo.

	Mac Lane scrive in \cite[??]{working-categories} che la parola è un prestito da Carnap, e precisamente dalla sua opera `La sintassi logica del linguaggio' \cite{carnappio}. Carnap scrive nel 1934, e fu proprio Mac Lane a recensire il libro in questione (e a distruggere completamente la sua tesi principale con un elementare controesempio preso dall'algebra astratta, che evidentemente Carnap ignorava).

	Nel suo testo \cite{kromer}, Ralf Kr\"omer osserva che la terminologia `corrispondenza funtoriale' è stata, da quel momento in poi, largamente utilizzata senza ulteriore discussione (fino al punto che in \cite{} la `teoria delle categorie' viene chiamata `linguaggio funtoriale'); del resto a Carnap non va nemmeno il merito di avere coniato per primo la parola.

	Haskell Curry \cite{Curry1961SomeLA} attribuisce più correttamente il termine a Tadeusz Kotarbiński, logico e filosofo polacco, che nel suo testo \emph{Elementy teorji poznania} (scritto cinque anni prima di \cite{carnappio}) introduce i funtori come `connettivi sentenziali' all'inizio del suo capitolo II. In \cite{Curry1961SomeLA} l'autore fa uso del concetto di funtore nel suo senso filosofico (più precisamente, in filosofia del linguaggio, dove un funtore è definito come un operatore che agisce sulle frasi di un dato linguaggio, per formarne altre, `preservando l'analisi logica', ossia le relazioni tra le parti della frase) per costruire il linguaggio giocattolo dei sami, teteli e tanteti.

	Il testo di Kotarbiński ha avuto diverse fortune editoriali: una sua edizione inglese a opera di Olgierd Wojtasiewicz è apparsa solo nel 1966 con una traduzione piuttosto goffa del titolo in \emph{Gnosiology} (sic), che contiene un'appendice scritta da Kazimierz Ajdukiewicz, altro famoso esponente della scuola polacca di logica. Ajdukiewicz usa in maniera sorprendentemente libera il termine `funtore' in frasi come [traduzione degli autori]
	\begin{quote}
		[\dots\unkern] se ciò di cui la matematica parla sono i correlati oggettivi di alcuni funtori che appaiono nei suoi teoremi, correlati che dal canto loro non accettano variabili libere, allora la matematica parla di numeri, perché, ad esempio nell'enunciato aritmetico `$3 + 2 = 5$' questi argomenti ultimi sono numeri, e null'altro.
	\end{quote}
	Kotarbiński dal canto suo attribuisce la creazione del termine `funtore' a Jan Łukasiewicz e Stanisław Leśniewski:
	\begin{quotation}
		{\L}ukasiewicz, in his system of the sentential calculus, places the functors directly before the functions to which they pertain. [\dots\unkern]

		other logical types can be formed by sentence-forming or term-forming functors of the various kinds (Leśniewski).
	\end{quotation}
	Ci sono poche evidenze storiche che questa attribuzione sia quella corretta, ma è quasi certo che ad aver coniato il termine per primo sia stato un esponente della scuola polacca di logica: Alan Rose parla in \cite{CM_1968__20__153_0} degli `implication and negation functors of Łukasiewicz' riferendosi ad ancora un altro testo, e qui iniziano a perdersi le tracce storiche. Leśniewski sembra essere quello che per primo utilizza il termine in maniera sistematica, e muore pochi anni dopo la pubblicazione di \cite{carnappio}, ma non sembra nemmeno lui essere il primo a utilizzare la parola.

    \`E ragionevole concludere che il termine sia nato come innovazione lessicale spontanea nella scuola polacca di logica e filosofia del linguaggio, nei primi decenni del ventesimo secolo, e che analogamente ad altri termini nati senza un autore preciso, si sia poi diffuso universalmente.
\end{terminology}
Dopo questa digressione, proponiamo due esercizi a chi legge.
\subsubsection*{Esercizi}
\begin{enumerate}
\item Se \(\ctC\) è una categoria con più di un oggetto, scrivere quali proprietà deve avere un funtore \(\ctC \fun \susp N\); farsi degli esempi con le categorie di \ref{sec_esempi_cats}, e con \(N=(\bbN,+,0)\) il monoide dei numeri naturali.
\item Dualmente, se \(\ctD\) è una categoria con più di un oggetto, scrivere quali proprietà deve avere un funtore \(\susp M \fun \ctD\); farsi degli esempi con le categorie di \ref{sec_esempi_cats}, e con \(M = (\bbN,+,0)\) il monoide dei numeri naturali.
\end{enumerate}
Questo secondo esercizio ha, come caso particolare, il seguente esempio quando \(\ctD=\ctSet\) è la categoria di insiemi e funzioni di \ref{ex_cat_insiemi}: ciò giustifica la definizione che segue.
\begin{example}\label{exa_azioni_funtori}\index{Funtore!azioni come ---}
	Dato un gruppo \(G\), un funtore \(\susp G\fun\ctSet\) è precisamente un \emph{\(G\)-insieme}, ovvero un insieme con un'azione di \(G\), nel senso di \ref{ex_cat_g_insiemi}.
	Il funtore mappa l'unico oggetto di \(\susp G\) in un insieme, chiamiamolo \(X\).
	Sulle frecce, un po' come nell'esempio sopra, il funtore assegna ad ogni elemento \(g\) di \(G\) una funzione \(X\to X\), che possiamo scrivere come \(x\mapsto g\cdot x\).
	La preservazione dell'identità e della composizione dicono precisamente che le funzioni \(x\mapsto g\cdot x\) per ogni \(g\) danno un'azione di \(G\) su \(X\).

\end{example}
In maniera simile, un funtore \(\susp G\fun\bbR\emdash\ctVect\) è una rappresentazione (lineare) di \(G\) su uno spazio vettoriale; le stesse costruzioni si possono fare con un monoide invece di un gruppo, e ciò giustifica la definizione seguente.
\begin{definition}[Rappresentazione di \(M\)]
	Sia \(\ctD\) una categoria, ed \((M,\cdot,1)\) un monoide; una \emph{rappresentazione} di \(M\) in \(\ctD\) consiste di un funtore \(\susp M \to \ctD\).
\end{definition}
La teoria classica delle equazioni differenziali ordinarie dà un esempio importante di rappresentazione di \(G\) in una categoria di spazi topologici, mediante i \emph{gruppi a un parametro} di diffeomorfismi,\footnote{Il nome `gruppo a un parametro' è un relitto ottocentesco dovuto al fatto che si preferiva pensare a un'azione del gruppo additivo \(\bbR\) su una varietà \(X\) come a una famiglia di diffeomorfismi \(\{\varphi_t : X\to X\}_t\) dipendenti --appunto-- da un parametro reale \(t\in\bbR\) (o \(t\in [a,b]\), o \(t\in [0,\infty)\)\dots). Chiaramente, \(\varphi_t = \varphi(t,-)\) per un'azione \(\varphi : \bbR\times X\to X\) mediante diffeomorfismi, cioè per un funtore \(\susp(\bbR,+,0)\to\cate{Mfd}\) verso una categoria di varietà differenziabili e mappe lisce. La lezione per chi legge è che qualsiasi corso introduttivo ai sistemi dinamici fa uso, più o meno nascostamente, più o meno ammettendolo, del concetto di funtore.} o dai campi vettoriali a loro associati.
\begin{example}\label{exa_derivata_funtore}\index{Funtore!differenziale come ---}
	Sia \(\ctEuc\) la categoria degli spazi reali Euclidei puntati, definita come segue:
	\begin{itemize}
		\item gli oggetti sono coppie \((n,x)\) con \(n\in\bbN\) e \(x\in\bbR^n\);
		\item i morfismi \((n,x)\to (m,y)\) sono funzioni differenziabili \(f:\bbR^n\to\bbR^m\) tali che \(f(x)=y\).
	\end{itemize}
	Possiamo costruire un funtore \(D:\ctEuc\to\bbR\emdash\ctMat\) nel seguente modo:
	\begin{itemize}
		\item sugli oggetti, mappa \((n,x)\) in \(n\);
		\item sui morfismi, assegna alla funzione \(f:(\bbR^n,x)\to (\bbR^m,y)\) il \emph{differenziale} di \(f\) in \(x\), cioè, la mappa lineare \(Df:\bbR^n\to\bbR^m\).
	\end{itemize}
	Questa costruzione è funtoriale perché
	\begin{itemize}
		\item il differenziale della funzione identità \(\id : (n,x) \to (n,x)\) è la matrice identità;
		\item il differenziale della composizione di due funzioni è il prodotto (tra matrici) dei differenziali.
	\end{itemize}
	(Se queste proprietà non fossero chiare, può essere di aiuto scriverle per esteso ricordando \ref{ex_cat_matrici}.)
\end{example}
%Ora raccogliamo in una singola definizione alcune classi di funtori particolari, che data la loro ubiquità meritano nomi specifici.
\begin{definition}[Funtore controvariante]\label{def_funtore_contro}\index{Funtore!--- covariante}\index{Funtore!--- controvariante}
	Definiamo un funtore \emph{controvariante} \(F : \ctC \fun\ctD\) come un funtore \(F : \ctC^\op\fun\ctD\); consta dei dati seguenti:
	\begin{enumtag}{fc}
		\item \label{fc_1} Una funzione tra classi \(F_0 : \ctC_0\to\ctD_0\) che assegna ad ogni oggetto \(X\) di \(\ctC\) un oggetto \(FX\) di \(\ctD\);
		\item \label{fc_2} Una funzione tra classi \(F_1 : \ctC_1\to\ctD_1\) che assegna ad ogni morfismo \(Y \xrightarrow{f} X\) di \(\ctC^\op\), cioè ad ogni morfismo \(X\xto f Y\) di \(\ctC\), un morfismo \(FX \xrightarrow{Ff} FY\) di \(\ctD\) (si noti che da ciò segue che \(F(\dom{f})=\cod{Ff}\) e \(F(\cod{f})=\dom{Ff}\)): in parole semplici, l'azione di $F_{XY}$su una freccia la rovescia,
		\[F(\xymatrix{Y \ar[r]^f & X}) = \xymatrix{FX \ar[r]^{Ff} & FY}\]
	\end{enumtag}
	La struttura in \ref{fc_1} ed \ref{fc_2} soddisfa le proprietà seguenti:
	\begin{enumtag}{pc}
		\item \label{pc_1} \emph{Preservazione delle identità}: per ogni oggetto \(X\) di \(\ctC\), \(F(\id_X)=\id_{FX}\);
		\item \label{pc_2} \emph{Rovesciamento delle composizioni}: per ogni coppia di morfismi componibili \(f\) e \(g\) di \(\ctC\), \(F(g\cmp f)=Ff\cmp Fg\).
	\end{enumtag}
	\index{Funtore!Prefascio}
\end{definition}
Ciò permette di introdurre una definizione molto importante e pervasiva in teoria delle categorie.
\begin{definition}\label{exa_funtori_da_poset}\index{Prefascio}\index{Funtore!Prefascio}
	Sia \((P,\le)\) un insieme preordinato nel senso di \ref{ex_cat_ordini}; un funtore controvariante
	\[\xymatrix{F : (P,\le)^\op \ar[r] & \ctSet}\]
	si dice un \emph{prefascio} (su $P$).\footnote{La parola è un calco strutturale dell'inglese \emph{presheaf}, che è a sua volta un calco dal francese \emph{prefaisceaux}; cf. \cite{Tennison1975,Bredon1997,Godement} e \cite[Cap. VII]{pedicchiofoundations} per una introduzione meno geometrica --ma storicamente molto istruttiva. Per indagare l'etimologia del termine e il suo impiego in matematica, chi legge può consultare l'ottima nota breve di Lovering, \cite{Lovering}.}

	Esplicitamente, un prefascio consiste di
	\begin{itemize}
		\item una corrispondenza sugli oggetti, che assegna a ogni elemento \(x\in P\) un insieme \(Fx\),
		\item una corrispondenza sui morfismi, che assegna a ogni \(x\le y\) una funzione \(Fy\to Fx\),
	\end{itemize}
	che soddisfano \ref{def_funtore}.\ref{p_1}, \ref{def_funtore}.\ref{p_2}.
\end{definition}
L'esempio che motiva la definizione è il seguente: se \(X\) è uno spazio topologico, \(P=\ctO X\) è l'insieme parzialmente ordinato dei suoi aperti, e un prefascio \(F\) su \(\ctO X\) (o più brevemente, su \(X\)) assegna a ogni aperto \(U\subseteq X\) un insieme \(FU\) e ad ogni inclusione \(U\subseteq V\) una funzione detta \emph{restrizione} \(r_{UV} : FV \to FU\), in modo tale che
% FW --r_VW--> FV ---r_UV--> FU
\[(U\subseteq V\subseteq W) \Rightarrow r_{UV}\cmp r_{VW} = r_{UW} \qquad\qquad r_{UU} = \id_{FU}\]
Si noti che, anche se si può pensare \(U\subseteq V\subseteq X\) come alle funzioni iniettive che includono \(U\) in \(V\) e \(U,V\) in \(X\), le restrizioni \(r_{UV}, r_{UX}, r_{VX}\) non hanno motivo di essere funzioni iniettive.

Consideriamo uno spazio topologico \(X\) e ad ogni aperto \(U\subseteq X\) associamo l'insieme delle funzioni continue \(U\to \bbR\). Questa associazione definisce un prefascio su $X$ che soddisfa in più anche le seguenti due proprietà: fissato un aperto \(U\subseteq X\) e un ricoprimento \(\{U_i\}\) di \(U\), vale che
\begin{itemize}
	\item per ogni coppia di elementi \(s,t \in FU\),
	\[(\forall i \in I.r_{U_iU}s = r_{U_iU} t) \,\Rightarrow\, s=t\]
	\item per ogni famiglia \(s_i \in FU_i\), tale che \(r_{U_{ij}U_i}s_i = r_{U_{ij}U_j}s_j\), esiste un (unico, in virtù della proprietà precedente) \(s\in FU\) tale che \(r_{U_iU}s=s_i\).
\end{itemize}
Una corrispondenza del genere si dice un \emph{fascio} sullo spazio \(X\).
\begin{definition}
	Un \emph{bifuntore} è un funtore il cui dominio sia una categoria prodotto; più precisamente, date tre categorie \(\ctA,\ctB,\ctC\) un bifuntore \(F : \ctA \times \ctB \fun \ctC\) assegna
	\begin{itemize}
		\item a ogni coppia \((A,B)\in \ctA_0\times\ctB_0\) di oggetti un oggetto \(F(A,B) \in\ctC_0\);
		\item a ogni coppia di morfismi \(f : A\to A', g : B\to B'\) un morfismo \(F(f,g) : F(A,B)\to F(A',B')\) in \(\ctC\).
	\end{itemize}
	Questi dati soddisfano poi \ref{p_1} e \ref{p_2} in \ref{def_funtore}.
\end{definition}
Si dimostri per facile esercizio che definire \(F(f,\id_B)\) e \(F(\id_A,g)\) è sufficiente a definire \(F(f,g)\) in maniera univoca, dato che il quadrato
\[
\begin{tikzcd}
	F(A,B) \ar[r, "{F(A,g)}"]\ar[d, "{F(f,B)}"'] & F(A,B') \ar[d, "{F(f,B')}"]\\
	F(A',B) \ar[r, "{F(A',g)}"'] & F(A',B')
\end{tikzcd}
\]
è commutativo.
\begin{example}\label{ex_hom_funtore}\index{Funtore!hom --- covariante}\index{Funtore!hom --- controvariante}
	L'esempio prototipico di \emph{funtore hom} controvariante, definito come segue. Sia \(\ctC\) una categoria, e \(X\) un suo oggetto. Definiamo un funtore \(\Hom{\ctC}(-,X) : \ctC^\op\fun\ctSet\) come segue:
	\begin{itemize}
		\item un oggetto \(Y\) viene mandato nell'insieme \(\Hom{\ctC}(Y,X)\) dei morfismi \(u : Y\to X\);
		\item un morfismo \(f : Y\to Y'\) viene mandato nella funzione
		\[\xymatrix{
			\Hom{\ctC}(Y',X) \ar[r] & \Hom{\ctC}(Y,X)
		}\]
		che manda \(u : Y'\to X\) in \(u\cmp f : Y\to Y' \to X\).
	\end{itemize}
	Le condizioni \ref{p_1}, \ref{p_2} si riducono agli assiomi di categoria: si può infatti
	\begin{itemize}
		\item verificare che \((u\cmp f)\cmp g = u\cmp (f\cmp g)\), perché la composizione è associativa;
		\item verificare che \(u\cmp \id_Y = u\), perché la composizione è unitale.
	\end{itemize}
	Dualmente, possiamo definire un funtore hom covariante \(\Hom{\ctC}(X,-)\), fissando un oggetto \(X\in\ctC_0\) e definendo la funzione sugli oggetti come \(\Hom{\ctC}(X,-)_0 : Y\mapsto \Hom{\ctC}(X,Y)\) e \(\Hom{\ctC}(X,f) : (u : X\to Y)\mapsto f\cmp u\) per \(f : Y\to Y'\).

	\index{Funtore!hom ---} In effetti, entrambi i funtori hom covarianti e controvarianti nascono fissando la componente (destra per il funtore hom controvariante, sinistra per il covariante) del \emph{bifuntore hom} di \(\ctC\),
	\[\xymatrix{\hom_\ctC : \ctC^\op\times\ctC \ar[r] & \ctSet}\]
	definito come segue:
	\begin{itemize}
		\item Sugli oggetti, \((X,Y)\mapsto \Hom{\ctC}(X,Y)\);
		\item sui morfismi, il morfismo \((u : X'\to X, v : Y\to Y')\) induce la funzione
		\[\xymatrix{\Hom{\ctC}(X,Y) \ar[r] & \Hom{\ctC}(X',Y')}\]
		che manda \(h : X\to Y\) in \(v\cmp h\cmp u\).
	\end{itemize}
	Con questa definizione, è evidente che se \(f : A\to B\) è un morfismo di \(\ctC\), \(\hom(f,X)\) agisce come \(\hom(f,\id_X)\) e \(\hom(Y,f)\) agisce come \(\hom(\id_Y,f)\).
\end{example}
\begin{remark}
	\Todo{La dicotomia tra covarianza e controvarianza viene dalla fisica che, purtroppo, definisce i due concetti in maniera opposta alla convenzione in teoria delle categorie.}
\end{remark}
\begin{remark}\index{Funtore!--- controvariante}
	Ogni funtore \(F : \ctC\fun\ctD\) definisce un funtore \(F^\op : \ctC^\op \fun\ctD^\op\) che coincide con \(F\) sugli oggetti, e che è definito sui morfismi mandando \(f^\op\in\ctC^\op\) in \(F(f)^\op\in\ctD^\op\). \`E semplice (e noioso) verificare le proprietà \ref{p_1}, \ref{p_2}.

	Dal momento che \((\ctC^\op)^\op = \ctC\), il dato di un funtore controvariante \(F : \ctC\fun\ctD\), cioè di un funtore \(F : \ctC^\op \fun\ctD\), è esattamente equivalente al dato di un funtore \(F^\op : \ctC \to \ctD^\op\). \`E a volte più conveniente considerare l'uno piuttosto che all'altro funtore, riferendosi alla sua controvarianza.
\end{remark}
\begin{example}\label{exa_funtori_liberi_forgetti}\index{Funtore!--- libero e dimenticante}
	Se \((\Omega,a)\) è una segnatura algebrica come in \ref{ex_cat_sigma_strutture}, esiste un funtore
	\[
	\begin{tikzcd}
		U : \ctMod(\Omega,a) \ar[r] & \ctSet
	\end{tikzcd}
	\]
	che manda ogni modello in \(\ctMod(\Omega,a)\) nel suo \emph{insieme soggiacente} \(X\).
	\Todo{Sui funtori liberi\dots}
\end{example}
\begin{definition}\label{compo_funtori}
	Dati due funtori \(F:\ctC\to\ctD\) e \(G:\ctD\to\ctE\), il \emph{funtore composto} \(G\cmp F:\ctC\to\ctE\) assegna
	\begin{itemize}
		\item Ad ogni oggetto \(X\) di \(\ctC\), l'oggetto \(GFX\) (ossia \(G(F(X))\)) di \(\ctE\);
		\item Ad ogni morfismo \(f:X\to Y\) di \(\ctC\), il morfismo \(GFf\) (ossia \(G(F(f))\)) di \(\ctE\).
	\end{itemize}
	Il fatto che questo dia un funtore (ovvero che preservi identità e composizione) segue dal fatto che \(F\) e \(G\) risultano componendo le funzioni di classe $G_0\cmp F_0$ e $G_1\cmp F_1$:
	\[
	G(F(\id_X)) = G(\id_{FX}) = \id_{GFX} ;
	\]
	\[
	G(F(g\cmp f)) = G(Ff\cmp Fg) = GFf\cmp GFg .
	\]
\end{definition}

\begin{definition}[Funtore identità]\label{def_funtore_id}\index{Funtore!identità}
	Data una categoria \(\ctC\), il \emph{funtore identità} su \(\ctC\) assegna ad ogni oggetto \(X\), \(X\) stesso, e ad ogni morfismo \(f\), \(f\) stesso.
	% (Può essere di aiuto verificare manualmente perché questo sia un funtore.)
\end{definition}

\begin{definition}[La categoria delle categorie]\label{ex_cat_cat}\index{Categoria!--- delle categorie}
	Come si può verificare, la composizione di funtori come definita sopra è associativa, e con il funtore identità definito sopra, soddisfa l'assioma di identità. Per questo le categorie e i funtori formano una categoria.

	Nel dare questa definizione è però importante essere precisi: la categoria delle categorie così definita non può essere un oggetto di sé stessa, o avremmo appena creato un paradosso molto fastidioso. Quella che chiamiamo `categoria delle categorie' è la categoria larga \(\ctCat\)  formata prendendo
	\begin{itemize}
		\item come oggetti tutte le categorie \emph{piccole};
		\item come morfismi i funtori tra due categorie piccole.
	\end{itemize}
\end{definition}
\begin{remark}[La categoria delle categorie esiste davvero?]
	La `categoria' \(\cate{CAT}\) di tutte le categorie localmente piccole è `illegittima' perché non è localmente piccola: infatti la classe dei funtori \(\ctC \fun\ctD\) tra due categorie larghe non è un insieme.\footnote{Usando la definizione, è possibile mostrare che c'è una classe propria di funzioni di classe \(F_0 : \ctC_0 \to \ctD_0\) e \(F_1 : \ctC_1 \to \ctD_1\) che soddisfano \ref{p_1},\ref{p_2}.} Questo può sembrare un puntiglio terminologico, ma è causa di diversi problemi (ad esempio: per \(\ctCAT\) non esistono i funtori hom di \ref{ex_hom_funtore}; quando avremo definito una trasformazione naturale in \ref{sec_tnat} vedremo che anche la categoria \([\ctCat,\ctSet]\) dei funtori da $\ctCat$ a $\ctSet$ è illegittima, e che questo è un problema --per esempio, per \(\ctCAT\) nessuno dei risultati del capitolo \ref{cap:yoneda} è valido).

	Per rimarcare la distinzione tra categorie legittime e illegittime, vari autori ricorrono a diverse terminologie: Mac Lane in \cite{working-categories} le chiama `metacategorie' e \cite{acc} le chiama `quasicategorie' (termine che, però, ha radicalmente cambiato significato nel corso degli ultimi quindici anni, riferendosi a strutture definibili in topologia algebrica, che somigliano a categorie ma dove gli assiomi \ref{cp_1}, \ref{cp_2} `valgono a meno di omotopia'). Raramente faremo riferimento a \(\ctCAT\), e mai parlando della sua struttura di `categoria'; avremo invece spesso bisogno di formare categorie del tipo $[\ctC,\ctSet]$ (o simili: $[\ctC,\ctAb]$, $[\ctC,\ctVect]$ eccetera, ma \emph{solo quando $\ctC$ è piccola} (in questo caso queste categorie sono tutte legittime).
\end{remark}
\section{Esempi di funtori nella pratica matematica}\label{sec_esempi_funtori}
\`E chiaro che non si può compilare una lista esaustiva di funtori importanti nella pratica matematica. Possiamo però concentrarci su alcuni funtori che è immediato costruire tra le categorie di §\ref{sec_esempi_cats}. In particolare, ed è uno dei motivi per cui \ref{def_funtore} è interessante, diverse operazioni che guardano una struttura come esempio di un'altra struttura si possono rendere precise mediante la nozione di funtore.
\begin{example}[Categorie discrete e codiscrete]\index{Categoria!--- discreta}\index{Categoria!--- codiscreta}\index{Funtore!--- categoria discreta}\index{Funtore!--- categoria codiscreta}
	Mandare un insieme \(A\) nella sua categoria discreta \(A^\delta\) di \ref{ex_cat_discreta} è un funtore \((-)^\delta : \ctSet \fun \ctCat\): ogni funzione \(f : A \to B\) induce un funtore, tautologico, \(f^\delta : A \to B\) che agisce come \(f\) sugli oggetti, ed è univocamente determinato dalla richiesta che \(f^\delta(\id_a) = \id_{fa}\), imposta da \ref{p_1}.

	Similmente, mandare un insieme \(A\) nella sua categoria codiscreta \(A^\chi\) è un funtore \(\ctSet \fun\ctCat\); qui è meno immediato che esista un funtore \(f^\chi : A^\chi\to B^\chi\), ma usando la caratterizzazione di un funtore in \ref{def_alternativa_funtore} è sufficiente trovare una famiglia di funzioni
	\[\begin{tikzcd}
		f^\chi_{aa'} : \Hom{A^\chi}(a,a') \ar[r] & \Hom{B^\chi}(fa, fa')
	\end{tikzcd}\]
	e l'unica freccia \(u_{aa'} : a\to a'\) deve per forza essere mandata nell'unica freccia \(v_{fa,fa'} : fa \to fa'\) in \(B^\chi\).
\end{example}
\begin{example}\index{Funtore!--- dominio}\index{Funtore!--- codominio}
	Se \(\ctC\) è una categoria e \(X\in\ctC_0\), esiste un funtore `dominio'
	\[\dmFun{d}{\ctC/X}{\ctC}\]
	che manda ogni oggetto \(f : A\to X\) di \(\ctC/X\) nel suo dominio \(A\).

	Similmente, esiste un funtore `codominio'
	\[\dmFun{c}{X/\ctC}{\ctC}\]
	che manda ogni oggetto \(f : X\to A\) nel suo codominio \(A\).
\end{example}
\begin{example}\index{Funtore!--- categoria associata a monoide}
	La corrispondenza che assegna a un monoide \((M,\cdot,1)\) la categoria con un solo oggetto \(\susp(M,\cdot,1)\) come in \ref{mon_sonocat} è la parte sugli oggetti di un funtore
	\[\dmFun{\susp}{\ctMon}{\ctCat}\]
	tra le categorie di \ref{ex_cat_monoidi} e di \ref{ex_cat_cat}; abbiamo in effetti già dimostrato in \ref{exa_funtori_da_gruppi} che i funtori tra categorie della forma \(\susp M\) sono tutti e soli gli omomorfismi di monoidi (e la composizione di omomorfismi \(M\to N\to R\) e di funtori \(\susp M \fun\susp N \fun\susp R\) coincidono), quindi la sottocategoria di \(\ctCat\) identificata come l'immagine di \(\susp\) è piena, e si identifica alla categoria dei monoidi. (Questa ultima osservazione sarà chiara quando avremo introdotto la nozione di \emph{funtore pienamente fedele} in \ref{}.)
\end{example}
\begin{example}[Le componenti connesse di un (multidi)grafo]\index{Funtore!--- componenti connesse di un grafo}\index{\(\pi_0\)|see {componenti connesse}}\index{Componenti connesse!--- di un grafo}
	Se \(\ctG=(E,V)\) è un multidigrafo come in \ref{ex_cat_grafi}, possiamo costruire l'insieme delle sue \emph{componenti connesse} considerando la relazione \(x\asymp y\) sull'insieme dei suoi vertici, definita da \(x\asymp y\) se \(x=y\), o esiste un lato \(e : x \to y\), o esiste un lato \(e' : y\to x\). Due vertici \(x,y\in V\) appartengono alla stessa componente connessa se esiste una successione finita di vertici \(\tup vn,\) tale che
	\[x \asymp v_1 \asymp v_2 \asymp\dots\asymp v_n\asymp y.\]
	(Si tratta in poche parole della chiusura transitiva \(\asymp^*\) di \(\asymp\), che quindi diventa una relazione di equivalenza su \(V\).)

	Definiamo \(\pi_0\ctG\) come l'insieme quoziente \(V/_{\asymp^*}\) delle componenti connesse di \(\ctG\). Questa assegnazione è la funzione sugli oggetti di un funtore
	\[\dmFun{\pi_0}{\ctdGph}{\ctSet}\]
	che su un omomorfismo di multidigrafi \(f : \ctG \to\ctH\) è definita mandando la componente connessa di \(v\in V_\ctG\) nella componente connessa di \(f_V(v)\in V_\ctH\) (è immediato verificare dal fatto che \(f_E(e : x\to y)=f_Ee : f_Vx\to f_Vy\) che questa è una buona definizione, cioè che \(f_V\) scende al quoziente).
\end{example}
\begin{example}[La categoria libera associata a un grafo]\index{Funtore!--- categoria libera}
	Se \(\ctG\) è un multidigrafo come in \ref{ex_cat_grafi}, la costruzione della categoria libera \(F\ctG\) di \ref{ex_cat_libera} definisce la funzione sugli oggetti di un funtore
	\[\dmFun F\ctdGph\ctCat\]
	Un omomorfismo di grafi \((f_E,f_V) : \ctG \to \ctH\) infatti è il dato sufficiente per definire un funtore \(F(f_E,f_V) : F\ctG \fun F\ctH\) sugli oggetti (con \(f_V\)) e sui morfismi generatori (con \(f_E\)), mandando la successione di lati contigui \([\tup en;]\) in \(F\ctG\) in \([\tup {{f_E}e}n;]\) in \(F\ctH\) (se \(n=0\) questo significa che \(F(f_E,f_V)\emptyList = \emptyList\)).
\end{example}
\begin{example}[Realizzare \(\bbF\emdash\ctMat\) in \(\bbF\emdash\ctVect\)]\index{Funtore!--- matrici reali}
	\Todo{}
\end{example}
\begin{example}[Successioni simmetriche, specie combinatorie]\index{Funtore!--- specie combinatoria}\index{Specie combinatoria}\index{Successione simmetrica|see {Specie combinatoria}}
	Si ricordi la definizione della categoria \(\cate{Bij}\) in \ref{ex_cat_gruppoide_naturali}; un funtore
	\[\dmFun{f}{\cate{Bij}}{\ctSet}\]
	consta dei seguenti dati:
	\begin{itemize}
		\item una collezione di insiemi \(f(n)=X_n\) indicizzata dai numeri naturali \(n\ge 1\);
		\item una rappresentazione \(S_n \times X_n\to X_n\), ossia un'azione (sinistra) del gruppo simmetrico \(S_n\) degli automorfismi dell'insieme \(\{\iter n\}\).
	\end{itemize}
	Il funtore \(f\) si dice una \emph{specie combinatoria} e la famiglia \(f(n)=X_n\) è una \emph{successione simmetrica}. Questo tipo di funtori, molto ricchi di struttura e di proprietà interessanti, trovano applicazioni in combinatoria enumerativa \cite{bergeron1998combinatorial}, teoria delle rappresentazioni \cite{aguiar2010monoidal}, geometria e topologia \cite{Fresse2009} (quando invece che insiemi gli \(X_n\) sono spazi vettoriali), logica e informatica teorica \cite{Gambino2017,Hasegawa2002}. Denotando con \(\# S\) la cardinalità di un insieme, ad ogni specie combinatoria \(f : \cate{Bij} \fun\ctSet\) tale che ogni \(f(n)\) sia finito possiamo associare la serie formale \(F(t)\in\mathbb{N}\llbracket t\rrbracket\) definita come \(F(t) \defeq \sum_{n\ge 1} \frac{\# X_n}{n!}t^n\). Questa si chiama la \emph{funzione generatrice} della specie combinatoria \(F\), e le sue proprietà algebriche o analitiche (qualora \(F(t)\) converga) sono in corrispondenza diretta con le proprietà del funtore \(f\).
\end{example}
\begin{example}[Moduli sinistri; moduli destri; bimoduli]\index{Moduli su un anello!--- come funtori}\index{Modulo}
	Se \(\ctAb\) è la categoria dei gruppi abeliani e loro omomorfismi, ed \((R,+,\cdot,0,1)\) è un anello unitario, una rappresentazione del monoide \((R,\cdot,1)\) in \(\ctAb\), ossia un funtore
	\[\dmFun{M}{\susp(R,\cdot,1)}{\ctAb}\]
	consiste di un gruppo abeliano \(M\) su cui è definita un'azione \(a\) del monoide \((R,\cdot,1)\) mediante mappe bilineari. L'azione \(a : R\times M\to M\) soddisfa cioè le proprietà
	\begin{itemize}
		\item \(a(1,m)=m\) per ogni \(m\in M\);
		\item \(a(s\cdot r,m)=a(s,a(r,m))\) per ogni \(r,s\in R\), \(m\in M\);
		\item \(a(r+s,m) = a(r,m) + a(s,m)\) per ogni \(r,s\in R\), \(m\in M\);
		\item \(a(r,m+n) = a(r,m) + a(r,n)\) per ogni \(r\in R\), \(m,n\in M\).
	\end{itemize}
	Denotando \(a(r,m)\) con un simbolo infisso \(r.m\), questi assiomi sono esattamente quelli che caratterizzano \(M\) come un \emph{\(R\)-modulo (sinistro)}.

	Similmente, un modulo destro è un funtore \emph{controvariante} \(R\fun\ctAb\), cioè un funtore \(R^\op\fun\ctAb\) dove \(R^\op\) è l'\emph{anello opposto} (cf. \ref{mon_opposti_cat_opposte}) dotato della moltiplicazione \(x\cdot^\op y \defeq y\cdot x\), e un \(R,S\)-\emph{bimodulo} è un funtore
	\[\dmFun{{}_RM_S}{S^\op\times R}{\ctAb.}\]
\end{example}
\begin{example}[Spazio delle orbite di un \(G\)-insieme]\index{Funtore!--- orbite di un \(G\)-insieme}
	Ogni volta che sia data una rappresentazione di un gruppo \(G\) come in \ref{exa_azioni_funtori} (cioè un \(G\)-insieme come in \ref{ex_cat_g_insiemi}) possiamo considerare lo \emph{spazio delle orbite} \(X/G\) definito come l'insieme delle classi di equivalenza della forma
	\[[x]_G \defeq \{g\cdot x\mid g\in G\}\]
	(ciascuno dei \([x]_G\) si chiama l'\emph{orbita} di \(x\) rispetto all'azione di \(G\)).

	Mostriamo che esiste un funtore
	\[\dmFun{-/G}{G\emdash\ctSet}{\ctSet}\]
	che manda il \(G\)-insieme \(X\) nell'insieme \(X/G\). Affinché questo sia vero, una funzione equivariante \(f : X\to Y\) deve indurre una funzione ben definita tra gli spazi delle orbite \(X/G\) e \(Y/G\), in modo che gli assiomi \ref{p_1} e \ref{p_2} siano soddisfatti. \`E facile verificare che \(f/G : X/G \to Y/G : [x]_G\mapsto [f(x)]_G\) ha tutte queste proprietà. (In particolare, se chiamiamo \(\pi_X : X\to X/G\) la funzione \(x\mapsto [x]_G\) che manda ogni elemento nella sua orbita, \(f/G\) è l'unica funzione tale che \(f/G(\pi_X(x)) = \pi_Y(f(x))\).)
\end{example}
\begin{example}\index{Funtore!--- gruppo delle unità}
	% \Todo{Gruppo delle unità di un anello}
	Assegnare a un anello unitario $(R,+,0\cdot,1)$ il gruppo $(R^\times,\cdot,1)$ dei suoi elementi invertibili è un funtore
	\[\dmFun{(-)^\times}\ctRing{\ctGrp.}\]
	Infatti ogni omomorfismo di anelli $f : R\to S$ induce un omomorfismo di gruppi $f^\times : R^\times \to S^\times$, dato che se $u\in R$ è invertibile, tale è anche $f(u)$ (e $f(u)^{-1}=f(u^{-1})$).
\end{example}
\begin{example}\index{Funtore!--- di abelianizzazione}
	Dato un gruppo $G$, il sottogruppo $[G,G]$ generato dai commutatori $[x,y] \defeq xyx^{-1}y^{-1}$ è il sottogruppo normale più piccolo tale che $G/N$ sia abeliano; il quoziente $G^\aa \defeq G/[G,G]$ si chiama \emph{abelianizzato} di $G$ e l'assegnazione $G\mapsto G^\aa$ definisce un funtore
	\[\dmFun{(-)^\aa}\ctGrp\ctAb\]
	di abelianizzazione. Un omomorfismo di gruppi $f : G \to H$ infatti scende al quoziente ad un omomorfismo $f^\aa : G^\aa \to H^\aa$ tale che
	\[
	\begin{tikzcd}
		G\ar[r, "f"]\ar[d, "\pi"'] & H \ar[d, "\pi"]\\
		G^\aa \ar[r, "f^\aa"']& H^\aa
	\end{tikzcd}
	\]
	sia commutativo (questo è evidente, dato che $f[x,y]=[fx,fy]$). L'omomorfismo $f^\aa$ è l'unico con questa proprietà, e ciò mostra che $(g\cmp f)^\aa = g^\aa\cmp f^\aa$ e $(\id_G)^\aa=\id_{G^\aa}$.
\end{example}
\begin{example}\index{Funtore!--- campo dei quozienti}
	Se $R$ è un dominio di integrità, il suo \emph{campo dei quozienti} $Q(R)$ è l'anello definito come segue:
	\begin{itemize}
		\item i suoi elementi sono classi di equivalenza $\frac pq$ di coppie $(p,q) \in R\times R$ dove $q\ne 0$ rispetto alla relazione che identifica $(p,q), (p',q')$ quando $pq'=qp'$;
		\item la somma e il prodotto sono definiti da
		\[\frac pq + \frac st = \frac{pt+qs}{qt} \qquad\qquad \frac pq\cdot\frac st = \frac{ps}{qt}\]
	\end{itemize}
	Con queste scelte, $Q(R)$ diventa un campo (cioè, ogni elemento diverso dalla classe di equivalenza di $(0,1)$ è invertibile).

	La corrispondenza $R\mapsto Q(R)$ è la funzione sugli oggetti di un funtore
	\[\dmFun Q\ctDInt\ctFld\]
	(il dominio è la categoria degli anelli integri, il codominio è la sottocategoria -piena- di $\ctcRing$ i cui oggetti sono i campi). Infatti, ogni omomorfismo di anelli $f : R \to S$ che siano domini di integrità induce un omomorfismo di anelli $Q(f) : Q(R) \to Q(S)$ definito da $f(\frac pq) = \frac{fp}{fq}$.
\end{example}
\begin{example}[I gruppi lineari come funtori]\label{ex_fun_GLn}\index{Funtore!--- gruppo generale lineare}\index{GL|see {Gruppo generale lineare}}\index{Gruppo generale lineare}
	Se $n\ge 1$ è un numero intero, mandare un anello commutativo $R$ nel gruppo delle matrici invertibili $n\times n$ a coefficienti in $R$ è la funzione sugli oggetti di un funtore
	\[\dmFun{\GL_n}\ctcRing\ctGrp\]
	Per vederlo, basta definire un omomorfismo di gruppi $\GL_n(f) : \GL_n(R)\to \GL_n(S)$ dato un omomorfismo di anelli $f : R\to S$; ragioniamo nel caso $n=2$ per comodità, e il caso generale è completamente analogo: la corrispondenza
	\[\GL_2(f) : A=\left(\begin{smallmatrix}
		a	&	b \\
		c	&	d
	\end{smallmatrix}\right)
	\mapsto
	\left(\begin{smallmatrix}
		fa	&	fb \\
		fc	&	fd
	\end{smallmatrix}\right)
	\]
	è tale che $\det(\GL(f)A)=\det\left(\begin{smallmatrix}
		fa	&	fb \\
		fc	&	fd
	\end{smallmatrix}\right) = f(\det A)$, cosicché $\GL_2(f)$ è ben definita verso $\GL_2(S)$; evidentemente ciascun $\GL_2(f)$ è un omomorfismo di gruppi, e $f\mapsto\GL_2(g\cmp f) = \GL_2(g)\cmp\GL_2(f)$, e $\GL_2(\id_R) = \id_{\GL_2(R)}$.
\end{example}
\begin{example}\index{Funtore!--- nucleo e conucleo}\index{ker|see {nucleo}}\index{coker|see {conucleo}}
	% \Todo{Nucleo e conucleo di un omomorfismo}
	Data una applicazione lineare $f : V\to W$ tra $k$-spazi vettoriali, il suo \emph{nucleo} consiste del sottospazio $\ker f\le V$ di tutti i vettori $v\in V$ tali che $f(v)=0$. Questa assegnazione è un funtore
	\[\dmFun{\ker}{\ctVect^\to}\ctVect\]
	dove $\ctVect^\to$ è la categoria delle frecce di \ref{def_cat_frecce}. Infatti, a ogni quadrato commutativo
	\[\begin{tikzcd}
		V \ar[r, "f"]\ar[d, "p"']& W\ar[d, "q"] \\
		V' \ar[r, "{f'}"'] & W'
	\end{tikzcd}\]
	corrisponde una mappa lineare $\ker f \to \ker f'$ (la restrizione di $p$ a $\ker f$, dato che se $fv=0$ anche $f'(pv)=q(fv)=q(0)=0$).

	Dualmente, il \emph{conucleo} di $f : V\to W$ è lo spazio vettoriale quoziente $W/fV$, e l'assegnazione $f\mapsto \coker f$ è un funtore
	\[\dmFun{\coker}{\ctVect^\to}\ctVect\]
	perché un quadrato commutativo come sopra implica che $q$ scende al quoziente in modo che composizione e identità siano rispettate: se $F = fV$ è l'immagine di $f$ in $W$ ed $F'$ quella di $f'$ in $W'$, la classe laterale $w + F$ viene mandata in $qw+F'$; questa è una buona definizione, perché $q(fv) \in F'$ per ogni $v\in V$.
\end{example}
\begin{example}\index{Funtore!--- di compattificazione}
	Se $(X,\tau)$ è uno spazio topologico come in \ref{ex_cat_top}, la sua \emph{compattificazione ad un punto}, o compattificazione di Alexandroff, è lo spazio topologico $(X_\infty,\bar\tau)$ dove $X_\infty \defeq X + \{\infty\}$ è l'unione disgiunta di $X$ e di un `punto all'infinito' $\infty$, e $\bar\tau$ è la topologia che contiene tutti gli aperti di $\tau$ ma anche gli insiemi della forma $K^c \cup \{\infty\}$, dove $K\Subset X$ è un sottoinsieme chiuso e compatto di $X$ e $K^c = X\smallsetminus K$ è il suo complementare. Si osservi che
	\begin{itemize}
		\item $X_\infty$ è compatto e contiene $X$ come un sottospazio denso;
		\item $X\mapsto  X_\infty$ è un funtore
		\[\dmFun{(-)_\infty}\ctTop\ctTop\]
		(la cui immagine però è la sottocategoria degli spazi compatti), che induce, per ogni mappa propria $f : X\to Y$, una mappa propria tra le loro compattificazioni
		\[\begin{tikzcd}
			f_\infty : X_\infty \ar[r] & Y_\infty
		\end{tikzcd}\]
		che manda $x\mapsto fx$ e $\infty_X$ in $\infty_Y$. La continuità sugli aperti della topologia di $Y$ è ovvia, e va verificata solo sugli aperti di $Y_\infty$ della forma $V=K^c\cup\{\infty_Y\}$ con $K$ compatto e chiuso in $Y$; del resto, ora, $f^{-1}V = (f^{-1}K)^c \cup \{\infty_X\}$ che è un intorno aperto di $\infty_X$ (essendo $f$ propria, $f^{-1}K$ è compatto).
	\end{itemize}
\end{example}
\begin{example}\label{fun_ex_omoto_omolo}\index{Funtore!--- omotopia}\index{Funtore!--- omologia}
	Ad ogni spazio topologico puntato $(X,x_0)$ si può associare l'insieme delle classi di omotopia di mappe $(S^1, \copmap[r] 10)\to (X, x_0)$ che preservano il punto base; tale insieme è un gruppo, e dato che la relazione di omotopia è una \emph{congruenza} rispetto alla composizione (ossia che, se $f\cong g$ allora ogni volta che ciò ha senso si ha $h\cmp f\cmp k\cong h\cmp g\cmp k$), è anche un funtore
	\[\dmFun{\pi_1}\ctTop\ctGrp\]
	e in effetti, dato che mappe omotope $f\cong g : X\to Y$ inducono lo stesso omomorfismo $f_* = g_* : \pi_1(X,x_0) \to \pi_1(Y,y_0)$, un funtore
	\[\dmFun{\pi_1}\ctHoTop\ctGrp\]
	dove $\ctHoTop$ è la categoria dell'omotopia di \ref{ex_cat_hotop}.

	Similmente (per chi avesse già familiarità con queste definizioni), i gruppi di omotopia superiore $\pi_n(X,x_0) \defeq [(S^n,\copmap[r] 1{\mathbf{0}}), (X,x_0)]$ definiscono dei funtori\footnote{Pensando $S^n\subseteq\bbR^{n+1}$, come il sottospazio $\{x\in\bbR^{n+1}\mid \|x\|^2=1\}$ il suo punto base è $\copmap[r]1{\mathbf 0}=(1,0,\dots,0)$.}
	\[\dmFun{\pi_n}\ctHoTop\ctAb\]
	e altrettanto fanno i funtori di omologia (a coefficienti interi)
	\[\dmFun{H_n(-,\bbZ)}\ctHoTop\ctAb\]
	per $n\ge 0$, e di coomologia (a coefficienti interi)
	\[\dmFun{H^n(-,\bbZ)}{\ctHoTop^\op}{\ctAb.}\]
\end{example}
% \begin{example}
% 	\Todo{Lo spettro di una C*-algebra commutativa}
% \end{example}
% \begin{example}
% 	\Todo{La C*-algebra di uno spazio localmente compatto}
% \end{example}
\begin{example}\index{Funtore!--- quoziente di uno pseudoinsieme}
	% \Todo{Il quoziente indotto da un prequoziente}
	Sia $(X,\sim)$ un prequoziente come in \ref{ex_cat_pseudoinsiemi}; l'assegnazione del quoziente $X/_\sim$ definisce un funtore
	\[\dmFun q{\cate{Bish}}{\ctSet}\]
	poiché ogni omomorfismo di pseudoinsiemi $f : (X,\sim_X)\to (Y,\sim_Y)$ soddisfa esattamente la proprietà necessaria a indurre un'unica funzione $qf : X/_{\sim_X}\to Y/_{\sim_Y}$, che manda la classe di equivalenza $[x]_X$ nella classe di equivalenza $[fx]_Y$ (si dimostrino per esercizio le identità funtoriali: $q(\id_{(X,\sim)})=\id_{X/_\sim}$ e $q(g\cmp f)=qg\cmp qf$).
\end{example}
\begin{example}\index{Funtore!--- proiezioni da un prodotto}
	\index{Funtore!--- inclusioni in una somma}
	Le costruzioni in \ref{def_cat_prodotto}, \ref{def_cat_somma} permettono di definire diversi funtori interessanti:
	\begin{itemize}
		\item Dal prodotto $\ctC\times\ctD$ si possono definire le \emph{proiezioni}
		% https://q.uiver.app/#q=WzAsMyxbMSwwLCJcXGN0Q1xcdGltZXNcXGN0RCJdLFswLDAsIlxcY3RDIl0sWzIsMCwiXFxjdEQiXSxbMCwyLCJwX1xcY3REIl0sWzAsMSwicF9cXGN0QyIsMl1d
	\[\begin{tikzcd}
		\ctC & {\ctC\times\ctD} & \ctD
		\arrow["{p_\ctC}"', from=1-2, to=1-1]
		\arrow["{p_\ctD}", from=1-2, to=1-3]
	\end{tikzcd}\]
	che agiscono come $p_\ctC(C,D)=C$ e $p_\ctD(C,D)=D$ (e similmente sui morfismi $(C\to C', D\to D')$).
	\item Verso la somma $\ctC+\ctD$ si possono definire le inclusioni
	% https://q.uiver.app/#q=WzAsMyxbMSwwLCJcXGN0QytcXGN0RCJdLFswLDAsIlxcY3RDIl0sWzIsMCwiXFxjdEQiXSxbMiwwLCJpX1xcY3REIiwyXSxbMSwwLCJpX1xcY3RDIl1d
\[\begin{tikzcd}
	\ctC & {\ctC+\ctD} & \ctD
	\arrow["{i_\ctC}", from=1-1, to=1-2]
	\arrow["{i_\ctD}"', from=1-3, to=1-2]
\end{tikzcd}\]
che agiscono sugli oggetti immergendo $\ctC_0,\ctD_0$ nell'unione disgiunta $\ctC_0+\ctD_0$, e analogamente sui morfismi.
	\end{itemize}
%
	% \Todo{Proiezioni da \(\ctC\times\ctD\); inclusioni in \(\ctC+\ctD\); inclusioni in \(\ctC\star\ctD\).}
\end{example}
\begin{example}\index{Funtore!--- tra spazi affini e proiettivi}
	\Todo{Da spazi affini a spazi vettoriali, a spazi proiettivi, et cetera.}
\end{example}
\subsubsection*{Esercizi}
\begin{enumerate}
\item
\item
\item
\end{enumerate}
\Todo{Due parole di introduzione, dato che qui cambia l'argomento; non credo che serva introdurre una nuova subsection.}
\begin{definition}\label{def_diagramma_comm}
	In teoria delle categorie, la parola \emph{diagramma} (di \emph{forma} \(\ctJ\)) è sinonimo di \emph{funtore} (di \emph{dominio} \(\ctJ\)).

	Più formalmente, se \(\ctJ\) è una categoria \emph{piccola} e \(\ctC\) una categoria, un diagramma in \(\ctC\) di forma \(\ctJ\) è precisamente un funtore
	\[\begin{tikzcd}
		D : \ctJ \ar[r] & \ctC.
	\end{tikzcd}
	\]
\end{definition}
\begin{remark}\label{tante_cose_sono_diag}
	Come è evidente, gli esempi di diagrammi abbondano tra gli esempi fatti in precedenza: fissata una categoria \(\ctC\), una spanna in \(\ctC\) come in \ref{def_span_e_cospan} è un diagramma di forma \(\Lambda^2_0\) e una cospanna è un diagramma di forma \(\Lambda^2_2\). Un quadrato commutativo in \(\ctC\) è un diagramma di forma \(P[2]\), e un cubo \(n\)-dimensionale (le cui facce commutano tutte) uno di forma \(P[n]\). Un singolo oggetto di \(\ctC\) si può vedere come un diagramma di forma \(\Delta[0]=\ctTerm\), e più in generale un insieme di cardinalità $|A|$ di oggetti di $\ctC$ è un diagramma di forma $A^\delta$, come in \ref{ex_cat_discreta}; una singola freccia \(f : X\to Y\) in \(\ctC\) si può vedere come un diagramma di tipo \(\Delta[1]\), e più in generale una catena
	\[\begin{tikzcd}
		A_0 \ar[r, "f_1"] & A_1 \ar[r, "f_2"] & \dots \ar[r] & A_{n-1} \ar[r, "f_n"] & A_n
	\end{tikzcd}
	\]
	di morfismi contigui in \(\ctC\) è un diagramma di tipo \(\Delta[n]\).

	Questi esempi giustificano i nomi che abbiamo dato in \ref{ex_cat_freccia}, \ref{ex_cat_doppiafreccia}, \ref{ex_spancospan}, perché le categorie \(\Lambda^2_0,\Lambda^2_2,\Delta[n], P[n], \dots\)  sono astrazioni o `forme generiche' per diagrammi di un certo tipo: ecco che allora possiamo adottare un lieve abuso di notazione, nel chiamare, per una qualche categoria $\ctC$ fissata, \emph{cospanna in $\ctC$} un diagramma della forma
	\[\dmFun C{\Lambda^2_2}\ctC\]
	(e dualmente una spanna in $\ctC$) o catena (infinita, di lunghezza $\alpha$) un diagramma della forma
	\[\dmFun K\alpha\ctC\]
	se $\alpha$ è un numero ordinale, guardato come categoria rispetto alla sua relazione d'ordine, e così via per ogni altro genere di forma. Questo abuso di notazione è, ovviamente, molto conveniente quando ci si debba riferire a insiemi di oggetti e morfismi di $\ctC$ connessi a una certa maniera.
\end{remark}
\begin{remark}
	Il termine `diagramma' è di solito riservato a funtori il cui dominio è una categoria piccola, e il cui codominio può essere una categoria larga, per suggerire il principio generale cui abbiamo già accennato in \ref{ssec:categorie_forme}, ossia la tensione tra categorie come forme e come universi: un diagramma di forma piccola \(\ctJ\) è `interpretato' in una categoria \(\ctC\), possibilmente larga.
\end{remark}
\begin{lemma}\label{lem_funtori_preservano_comm}
	\Todo{Funtori preservano i diagrammi commutativi} in particolare, preservano gli isomorfismi.
\end{lemma}

\Todo{Un controesempio: l'immagine (stretta) di un funtore $F : \ctC\fun\ctD$ può non essere una sottocategoria (la composizione può non stare nell'immagine).}
\begin{definition}\label{def_cat_cocomma}
	Consideriamo una cospanna di funtori
	\[\begin{tikzcd}
		\ctC \ar[r, "F"'] & \ctE &\ar[l, "G"] \ctD
	\end{tikzcd}\]
	e definiamo la \emph{categoria comma} $(F/G)$ come segue:
	\begin{itemize}
		\item gli oggetti di $(F/G)$ sono terne $(C,D,f)$ dove $C\in\ctC_0,D\in\ctD_0$ e $f : FC\to GD$ è una freccia di $\ctE$;
		\item una freccia $(C,D,f)\to (C',D',g)$ consiste di una coppia $(u : C\to C', v : D\to D')$ tale che il quadrato
		\[\begin{tikzcd}
			FC \ar[r, "f"]\ar[d, "Fu"'] & GD\ar[d, "Gv"] \\
			FC' \ar[r, "g"'] & GD'
		\end{tikzcd}\]
		sia commutativo.
	\end{itemize}
	L'identità e la composizione si fanno come in $\ctD$, cioè l'identità di $(C,D,f)$ è $\id_C,\id_D$ e la composizione è definita da
	\[\begin{tikzcd}
		(C,D,f) \ar[r, "{(u,v)}"] & (C',D',g) \ar[r, "{(u',v')}"] & (C'',D'',h)
	\end{tikzcd}\]
\end{definition}
% C -> Sk(C) "è un'equivalenza"
% altri esempi?


\subsubsection*{Esercizi}
\begin{enumerate}
	\item Mostrare che un funtore $\ctTerm \fun\ctC$ (un `diagramma di tipo $\ctTerm = \Delta[0]$') ammonta precisamente alla scelta di un oggetto di $\ctC$, e che un diagramma di tipo $\Delta[1] = \{0\to 1\}$ ammonta esattamente alla scelta di una freccia tra due oggetti di $\ctC$.
	\item Mostrare che le seguenti condizioni sono equivalenti, nella notazione di \ref{klext_delle_relazioni} per le funzioni \(R^*,R_*\):
	\begin{itemize}
		\item la condizione in \ref{klext_delle_relazioni},
		\[V\subseteq R^*U\iff U\subseteq R_*V\]
		\item il fatto che per ogni \(U\subseteq B,V\subseteq A\) si abbia
		\[V\subseteq R^*R_*V\qquad\qquad U\subseteq R_*R^*U\]
	\end{itemize}
	Mostrare che da una qualunque di queste condizioni equivalenti segue che \(R^*,R_*\) sono una coppia di funtori controvarianti, in direzioni opposte:
	\[\begin{tikzcd}
		R^* : (2^B,\subseteq)^\op \ar[r, shift left] & (2^A,\subseteq) : R_* \ar[l, shift left]
	\end{tikzcd}\]
	\item In cosa consiste un funtore
	\[\dmFun F {\act G}\ctSet,\]
	quando $\act G$ è il gruppoide d'azione di \ref{action_groupoid}? Farsi degli esempi (e dei disegni) quando $G=C_n$ è il gruppo ciclico con $n$ elementi, quando $G=\bbZ$ è il gruppo additivo degli interi, e quando $G=S_3$ è il gruppo simmetrico delle biiezioni dell'insieme $\{1,2,3\}$.
	\item Si costruisca, tramite il differenziale, un funtore simile a quello di \ref{exa_derivata_funtore}, ma sulla categoria \(\cate{Mfd}\) delle varietà e funzioni lisce, che sugli oggetti assegna ad una varietà il suo fibrato tangente.
	\item Determinare la categoria comma $(F/G)$ nelle varie combinazioni in cui: $F$ è il funtore identità; $G$ è il funtore identità; $F$ è un funtore costante in un oggetto $E\in\ctE_0$; $G$ è un funtore costante in un oggetto $E\in\ctE_0$. Chi è $(E_1/E_2)$ se $E_1,E_2$ sono due oggetti, guardati come funtori $\ctTerm \fun\ctE$ (cf. il primo esercizio di questa sezione)?
\end{enumerate}

\section{Trasformazioni naturali}\label{sec_tnat}
In \ref{tante_cose_sono_diag} abbiamo osservato che le spanne e cospanne in $\ctC$ si possono vedere come funtori; del resto, in \ref{def_span_e_cospan} abbiamo costruito una \emph{categoria} di spanne in $\ctC$. Un morfismo di spanne consiste, secondo quella definizione, di una famiglia di tre morfismi di $\ctC$ tra i vertici omonimi delle due spanne $(X_1\overset l\leftarrow X_0\overset r\to X_2)$ e $(Y_1\overset{l'}\leftarrow Y_0\overset{r'}\to Y_2)$:
\[\alpha_0 : X_0\to Y_0,\quad \alpha_1 : X_1\to Y_1,\quad \alpha_2 : X_2\to Y_2\]
che rendono commutativi i diagrammi in \ref{mor_spanne}. Riguardando le spanne $X_\bullet,Y_\bullet$ come diagrammi di forma $\Lambda^2_0 \to\ctC$, la terna $\underline\alpha = (\alpha_0,\alpha_1,\alpha_2)$ si può vedere come una freccia $X_\bullet \nat Y_\bullet$, nel senso seguente:
\begin{itemize}
    \item per ogni spanna $(X_1\overset l\leftarrow X_0\overset r\to X_2)$ possiamo considerare la terna $\underline{\id}=(\id_0 : X_0\to X_0,\id_1 : X_1\to X_1,\id_2 : X_2\to X_2)$;
    \item date $\underline\alpha=(\alpha_0,\alpha_1,\alpha_2),\underline\beta=(\beta_0,\beta_1,\beta_2)$ che formano due distinti morfismi tra spanne, ne esiste una composta $\underline\beta\cmp\underline\alpha=(\beta_0\cmp\alpha_0,\beta_1\cmp\alpha_1,\beta_2\cmp\alpha_2)$ che è a sua volta un morfismo di spanne, dato che l'esterno del diagramma
    % https://q.uiver.app/#q=WzAsMTIsWzEsMCwiWF8xIl0sWzIsMCwiWF8wIl0sWzMsMCwiWF8yIl0sWzEsMSwiWV8xIl0sWzIsMSwiWV8wIl0sWzMsMSwiWV8yIl0sWzEsMiwiWl8xIl0sWzIsMiwiWl8wIl0sWzMsMiwiWl8yIl0sWzAsMCwiWDoiXSxbMCwxLCJZOiJdLFswLDIsIlo6Il0sWzEsMCwibCIsMl0sWzEsMiwiciJdLFs0LDUsInInIiwyXSxbNCwzLCJsJyJdLFs3LDYsImwnJyJdLFs3LDgsInInJyIsMl0sWzMsNiwiXFxiZXRhXzEiLDJdLFs0LDcsIlxcYmV0YV8wIiwyXSxbNSw4LCJcXGJldGFfMiJdLFswLDMsIlxcYWxwaGFfMSIsMl0sWzEsNCwiXFxhbHBoYV8wIiwyXSxbMiw1LCJcXGFscGhhXzIiXSxbOSwxMCwiXFx1bmRlcmxpbmVcXGFscGhhIiwyLHsib2Zmc2V0IjoxLCJsZXZlbCI6Mn1dLFsxMCwxMSwiXFx1bmRlcmxpbmVcXGJldGEiLDIseyJvZmZzZXQiOjEsImxldmVsIjoyfV1d
\[\begin{tikzcd}
	{X:} & {X_1} & {X_0} & {X_2} \\
	{Y:} & {Y_1} & {Y_0} & {Y_2} \\
	{Z:} & {Z_1} & {Z_0} & {Z_2}
	\arrow["{\underline\alpha}"', shift right, Rightarrow, from=1-1, to=2-1]
	\arrow["{\alpha_1}"', from=1-2, to=2-2]
	\arrow["l"', from=1-3, to=1-2]
	\arrow["r", from=1-3, to=1-4]
	\arrow["{\alpha_0}"', from=1-3, to=2-3]
	\arrow["{\alpha_2}", from=1-4, to=2-4]
	\arrow["{\underline\beta}"', shift right, Rightarrow, from=2-1, to=3-1]
	\arrow["{\beta_1}"', from=2-2, to=3-2]
	\arrow["{l'}", from=2-3, to=2-2]
	\arrow["{r'}"', from=2-3, to=2-4]
	\arrow["{\beta_0}"', from=2-3, to=3-3]
	\arrow["{\beta_2}", from=2-4, to=3-4]
	\arrow["{l''}", from=3-3, to=3-2]
	\arrow["{r''}"', from=3-3, to=3-4]
\end{tikzcd}\]
è commutativo.
\end{itemize}
Ciò significa che, per ogni categoria $\ctC$, esiste sulla classe dei funtori $\Lambda^2_0\to\ctC$ una struttura di categoria.
% Ciò significa che c'è una qualche nozione di morfismo tra funtori, almeno in alcuni contesti.

La nozione di \emph{trasformazione naturale} tra funtori rende precisa questa idea.
\begin{definition}[Trasformazione naturale]\label{def_nat}\index{Trasformazione naturale}\index{Naturale!trasformazione}\index{Naturalità}
	Date due categorie \(\ctC\) e \(\ctD\) e dati due funtori \(F,G:\ctC\to\ctD\), una \emph{trasformazione naturale} \(\alpha:F\Rightarrow G\) consiste dei seguenti dati:
	\begin{itemize}
		\item Per ogni oggetto \(X\) di \(\ctC\), un morfismo \(\alpha_X:FX\to GX\) in \(\ctD\) detto la \emph{componente di \(\alpha\) ad \(X\)};
		\item Per ogni morfismo \(f:X\to Y\) di \(\ctD\), il seguente diagramma deve commutare (\emph{condizione di naturalità}):
		\[
		\begin{tikzcd}
			FX \ar{d}{Ff} \ar{r}{\alpha_X} & GX \ar{d}{Gf} \\
			FY \ar{r}{\alpha_Y} & GY.
		\end{tikzcd}
		\]
	\end{itemize}
\end{definition}
\begin{remark}
	I funtori sono i morfismi di una categoria $\ctCat$ delle categorie (piccole); le trasformazioni naturali tra funtori rendono l'insieme $\ctCat(\ctC,\ctD)$ dei funtori $F : \ctC\funto\ctD$ a sua volta una categoria, dove le trasformazioni naturali si pensano come ``frecce tra frecce'', o ``frecce di secondo ordine''. La definizione \ref{def_nat} ha introdotto una notazione per le trasformazioni naturali: è comune rappresentarle con delle frecce del tipo $\To$, a riempire un diagramma di funtori come segue:
	%\Todo{Che si fa quando vogliamo considerare }
	% si possono vedere come ``frecce tra frecce'', o ``frecce di secondo ordine''. È comune rappresentarle con delle doppie frecce, come segue:
	\[
	\begin{tikzcd}[sep=large]
		\ctC \ar[bend left, ""{name=F,below}]{r}{F} \ar[bend right, ""{name=G,above}]{r}[swap]{G} & \ctD.
		\ar[Rightarrow, from=F, to=G, "\alpha"]
	\end{tikzcd}
	\]
	In questa rappresentazione, $\alpha$ è un morfismo di dominio $F$ e codominio $G$, ed $F$ e $G$ hanno a loro volta un dominio e un codominio.

	La struttura che ha per oggetti le categorie piccole, per frecce i funtori tra esse, e per frecce tra frecce le trasformazioni naturali è un esempio di \emph{2-categoria} (di cui non diamo la definizione qui, si veda \cite{Kelly2005b}).
\end{remark}
\begin{remark}
	La definizione della categoria $\ctCat(\ctC,\ctD)$ pone un problema di teoria degli insiemi; infatti, quando $\ctC$ non è una categoria piccola, la classe delle trasformazioni naturali tra due funtori $F,G:\ctC\funto\ctD$ è una sottoclasse di \(\prod_{C\in\ctC_0}\ctD(FC,GC)\), che in generale può non essere un insieme (per esempio, può coincidere con \(\prod_{C\in\ctC_0}\ctD(FC,GC)\), quando succede?).
\end{remark}
\begin{example}
	Abbiamo visto nell'Esempio~\ref{exa_monotone_funtori} che una funzione monotona \(f:(X,\le)\to(Y,\le)\) si può vedere come un funtore. In questo contesto, date due funzioni monotone \(f,g:(X,\le)\to(Y,\le)\), si ha un'unica trasformazione naturale \(f\Rightarrow g\), o \(f\le g\), se e solo se per ogni \(x\in X\), \(f(x)\le g(x)\). (Quest'ultima disuguaglianza rappresenta la componente ad \(x\).)
\end{example}

\begin{example}\index{Equivarianza}
	Abbiamo visto nell'Esempio~\ref{exa_azioni_funtori} che dato un gruppo \(G\), un funtore \(\susp G\to\ctSet\) è un insieme \(X\) con un'azione di \(G\) su \(X\). Dati due funtori \(\susp G\to\ctSet\), i.e.\ due insiemi \(X\) e \(Y\) con un'azione di \(G\), una trasformazione naturale tra questi due funtori è una funzione \(f:X\to Y\) che commuta con l'azione di \(G\), nel senso che per ogni \(g\in G\), il seguente diagramma commuta:
	\[
	\begin{tikzcd}
		X \ar{d}{f} \ar{r}{g\cdot\_} & X \ar{d}{f} \\
		Y \ar{r}{g\cdot\_} & Y
	\end{tikzcd}
	\]
	In teoria delle rappresentazioni, la condizione su \(f\)
 \[\text{per ogni } g\in G,\, f(g\cdot x)=g\cdot f(x)\]
 si chiama \emph{equivarianza}, ed è esattamente la condizione di naturalità istanziata in questo caso. Una conseguenza immediata della condizione è che $f$ si restringe all'insieme \(X^G:=\{x\in X\mid \forall g\in G . g\cdot x = x\}\) dei punti fissi dell'azione di $G$ su $X$; infatti, per ogni $x\in X^G$ si ha $g\cdot f(x) = f(g\cdot x) = f(x)$.
\end{example}

\begin{example}\Todo{Doppio duale}
\end{example}
\begin{warning}
    \Todo{Il duale singolo no}
\end{warning}
\begin{example}\Todo{Mappa di Hurewicz}
\end{example}
\begin{example}\Todo{il determinante}
Sia $n\ge 1$ un numero intero; si può definire un funtore
\[\dmFun{\text{GL}_n}{\ctcRing}{\ctGrp}\]
come in \ref{ex_fun_GLn}, e un funtore
\[\dmFun{(-)^\times}{\ctcRing}{\ctGrp}\]
che manda un anello commutativo nel suo gruppo delle unità (La notazione in tal senso è stata fissata da \ref{def_cat_anelli}, \ref{def_anelli_commu}).

Il determinante fornisce un esempio di trasformazione naturale $\det : \text{GL}_n\natto (-)^\times$ di componenti
\[\dmFun{\det_R}{\text{GL}_n(R)}{R^\times}\]
\end{example}
\begin{example}\Todo{un paio di esempi di funtori puntati e copuntati}
\end{example}
\begin{example}\Todo{un paio di esempi di moltiplicazioni e comoltiplicazioni}
\end{example}
\begin{proposition}
    \Todo{rappresentabilità del determinante}
\end{proposition}
\begin{definition}[Composizione verticale di trasformazioni naturali]\label{def_vcomp}\index{Composizione verticale!di trasformazioni naturali}
	Si considerino tre funtori \(F,G,H:\ctC\to\ctD\) e due trasformazioni naturali \(\alpha:F\Rightarrow G\) e \(\beta:G\Rightarrow H\).
	La \emph{composizione verticale} \(\beta\circ\alpha:F\Rightarrow H\) delle transformazioni naturali $\beta,\alpha$, rappresentate avendo il bordo $G$ in comune,
	\[
	\begin{tikzcd}[sep=large]
		\ctC \ar[bend left=50, ""{name=F,below}]{r}{F}
		\ar[""{name=Gup,above}, ""{name=Gdown,below}]{r}[near start]{G}
		\ar[bend right=50, ""{name=H,above}]{r}[swap]{H} & \ctD
		\ar[Rightarrow, from=F, to=Gup, "\alpha"]
		\ar[Rightarrow, from=Gdown, to=H, "\beta"]
	\end{tikzcd}
	\]
	è definita dalla composizione $\beta_X\cmp\alpha_X : FX\to GX\to HX$.
\end{definition}
Si noti che la condizione di naturalità di \(\beta\circ\alpha\) si ottiene componendo quelle di \(\alpha\) e \(\beta\):
\[
\begin{tikzcd}
	FX \ar{d}{Ff} \ar{r}{\alpha_X} & GX \ar{d}{Gf} \ar{r}{\beta_X} & HX \ar{d}{Hf} \\
	FY \ar{r}{\alpha_Y} & GY \ar{r}{\beta_Y} & HY.
\end{tikzcd}
\]
 perché evidentemente, si ha
 \begin{align*}
     Hf\cmp (\beta_X\cmp \alpha_X)&= (Hf\cmp \beta_X)\cmp \alpha_X\\
     &=(\beta_Y\cmp Gf)\cmp \alpha_X \\
     &=\beta_Y\cmp (Gf\cmp \alpha_X) \\
     &=\beta_Y\cmp (\alpha_Y\cmp Ff) \\
     &=(\beta_Y\cmp \alpha_Y)\cmp Ff.
 \end{align*}
\begin{definition}[Composizione orizzontale di trasformazioni naturali]\label{def_hcomp}\index{Composizione orizzontale!di trasformazioni naturali}
	Si considerino tre categorie \(\ctC,\ctD,\ctE\), due funtori \(F,G:\ctC\to\ctD\) e due funtori \(F',G':\ctD\to\ctE\). Date tue trasformazioni naturali \(\alpha:F\Rightarrow G\) e \(\alpha':F'\Rightarrow G'\), la \emph{trasformazione naturale composta orizzontalmente} \(\alpha'\horcomp\alpha:F'\circ F\Rightarrow G'\circ G\), rappresentata come segue,
	\[
	\begin{tikzcd}[sep=large]
		\ctC \ar[bend left, ""{name=F,below}]{r}{F} \ar[bend right, ""{name=G,above}]{r}[swap]{G}
		& \ctD \ar[bend left, ""{name=FP,below}]{r}{F'} \ar[bend right, ""{name=GP,above}]{r}[swap]{G'}
		& \ctE
		\ar[Rightarrow, from=F, to=G, "\alpha"]
		\ar[Rightarrow, from=FP, to=GP, "\alpha'"]
	\end{tikzcd}
	\]
	è definita in componenti dalla diagonale comune del seguente diagramma in \(\ctE\),
	\[
	\begin{tikzcd}
		F'FX \ar{r}{F'\alpha_X} \ar{d}{\alpha'_{FX}} & F'GX \ar{d}{\alpha'_{GX}} \\
		G'FX \ar{r}{G'\alpha_X} & G'GX
	\end{tikzcd}
	\]
	che commuta per via della naturalità di \(\alpha'\).
\end{definition}
\begin{definition}[\Whisk di un funtore e una trasformazione naturale]
Date tre categorie $\ctA,\ctB,\ctC$ e un diagramma di funtori e trasformazioni naturali
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXGN0QSJdLFsxLDAsIlxcY3RCIl0sWzMsMCwiXFxjdEMiXSxbNCwwLCJcXGN0RCJdLFswLDEsIksiXSxbMSwyLCIiLDAseyJjdXJ2ZSI6LTJ9XSxbMiwzLCJIIl0sWzEsMiwiIiwxLHsiY3VydmUiOjJ9XSxbNSw3LCJcXGFscGhhIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dXQ==
\[\begin{tikzcd}
	\ctA & \ctB && \ctC & \ctD
	\arrow["K", from=1-1, to=1-2]
	\arrow[""{name=0, anchor=center, inner sep=0}, curve={height=-12pt}, from=1-2, to=1-4, "F"]
	\arrow[""{name=1, anchor=center, inner sep=0}, curve={height=12pt}, from=1-2, to=1-4, "G"']
	\arrow["H", from=1-4, to=1-5]
	\arrow["\alpha", shorten <=3pt, shorten >=3pt, Rightarrow, from=0, to=1]
\end{tikzcd}\]
definiamo \emph{\whisk} sinistro tra il funtore $H$ e la trasformazione naturale $\alpha$, denotato $H * \alpha$, la trasformazione naturale di componenti
\[(H*\alpha)_X = H(\alpha_X) : H(FX) \to H(GX)\]
Dualmente, definiamo \emph{\whisk} destro tra il funtore $K$ e la trasformazione naturale $\alpha$, denotato $\alpha * K$, la trasformazione naturale di componenti
\[(\alpha * K)_Y = \alpha_{KA} : FKA \to GKA.\]
\`E facile verificare che queste due definizioni dànno trasformazioni naturali (in un caso, $H$ applicato a ciascun quadrato di naturalità per $\alpha$ ne preserva la commutatività; nell'altro, stiamo restringendo $\alpha$ alle sole componenti della forma $X=KA$).
    % \Todo{Come traduciamo `whiskering'? La questione è delicata: dovremmo evitare un nome buffo, ma allo stesso tempo non creare un termine troppo distante dall'idea della parola whiskering. L'italiano non ha una regola simile all'inglese per la derivazione verbale (whisker significa `baffo' o più propriamente `vibrissa', e `baffare', `vibrissare' sono derivazioni verbali grammaticali in italiano, ma ridicole). Le uniche proposte intelligenti che riesco a immaginare sono:
    % \begin{itemize}
    %     \item \emph{innesto destro} di $H$ e $\alpha$, per $\alpha *H$, e \emph{innesto sinistro} per $H * \alpha$;
    %     \item \emph{visco destro} di $H$ e $\alpha$ per $\alpha*H$, e sinistro per $H*\alpha$ (`visco' è una lettura arcaica di `vischio' che è legato etimologicamente alla stessa radice di `whisker');
    %     \item vibrissa destra / sinistra o simili, se vogliamo essere attinenti all'etimologia -come fanno gli anglofoni a non ridere?!-
    % \end{itemize}}
\end{definition}
Chi legge può facilmente verificare che (nelle stesse notazioni di sopra) vale l'uguaglianza
\[(H*\alpha)*K=H*(\alpha*K)\]
la quale rende la scrittura $H * \alpha * K$ univocamente definita.
\begin{definition}
    \Todo{Legge di interscambio}
    \Todo{Identità di Godement}
\end{definition}
\begin{remark}
    L'\whisk tra un funtore e una trasformazione naturale si può definire in termini della composizione orizzontale: infatti, si verifica facilmente che
    \[\alpha * K = \alpha\horcomp\id_K\qquad\qquad H * \alpha = \id_H \horcomp\alpha\]
    (cosa che spiega la stessa notazione utilizzata per la composizione orizzontale e per l'\whisk).
\end{remark}
\subsubsection*{Esercizi}
\begin{enumerate}
	\item Per risolvere questo esercizio è necessario ricordare la definizione di una \emph{successione esatta} di omomorfismi di gruppo: se $H,G,G',K$ sono gruppi abeliani, una successione esatta corta è una sequenza di mappe componibili
    % https://q.uiver.app/#q=WzAsNixbMCwwLCIwIl0sWzEsMCwiSyJdLFsyLDAsIkciXSxbMywwLCJHJyJdLFs1LDAsIjAiXSxbNCwwLCJIIl0sWzAsMV0sWzEsMiwiaCJdLFsyLDMsImYiXSxbMyw1LCJnIl0sWzUsNF1d
\[\begin{tikzcd}
	0 & K & G & {G'} & H & 0
	\arrow[from=1-1, to=1-2]
	\arrow["g", from=1-2, to=1-3]
	\arrow["f", from=1-3, to=1-4]
	\arrow["h", from=1-4, to=1-5]
	\arrow[from=1-5, to=1-6]
\end{tikzcd}\]
    tale che $\ker f=\im g$, $\ker h=\im f$, $\ker g=(0)$ e $\im h = H$. Chi non ha mai visto questo risultato, dimostri che ogni omomorfismo $f : G\to G'$ tra due gruppi abeliani induce una successione esatta come questa, se $K=\ker f$ e $H=G'/\im f$, quando $g : \ker f \mono G$ è l'inclusione ovvia, e $h$ la proiezione al quoziente sul conucleo (si veda \ref{}) di $f$.

    Sia ora $\ctC$ una categoria piccola e consideriamo la categoria dei funtori $F : \ctC\funto\ctAb$ di codominio la categoria dei gruppi abeliani. Questo esercizio chiede di definire e studiare una nozione di nucleo associato a una trasformazione naturale:
    \begin{itemize}
        \item Definire $\ker\alpha$ come la trasformazione naturale associata ad $\alpha : F \natto G$ e avente per componenti
        \[(\ker\alpha)_C := \ker(\alpha_C : FC\to GC) \to FC.\]
        \item Mostrare che $X\mapsto\ker(\alpha_X)$ definisce un funtore $K : \ctC\funto\ctAb$, e che $\kappa_X : \ker(\alpha_X) \to FX$ è naturale, e un monomorfismo in $[\ctC,\ctAb]$ (si veda \ref{}); a questa maniera, esiste una successione esatta \emph{di trasformazioni naturali} (cioè una successione di trasformazioni naturali, esatta quando saturata in ogni componente) della forma
        \[0\natto\ker\alpha \overset\kappa\natto F \overset\alpha\natto G\]
        dove chiaramente `$0$' è il funtore costante nel gruppo abeliano nullo.
        \item Dualizzare e definire il \emph{conucleo} di una trasformazione naturale; costruire la successione esatta
        \[\begin{tikzcd}
	0 & \ker\alpha & F & G & \coker\,\alpha & 0.
	\arrow[from=1-1, to=1-2, Rightarrow]
	\arrow["\kappa", from=1-2, to=1-3, Rightarrow]
	\arrow["\alpha", from=1-3, to=1-4, Rightarrow]
	\arrow["\pi", from=1-4, to=1-5, Rightarrow]
	\arrow[from=1-5, to=1-6, Rightarrow]
\end{tikzcd}\]
\item Mostrare, o trovare un controesempio, al seguente enunciato: per ogni funtore $H : \ctB\fun\ctC$ come nel diagramma
% https://q.uiver.app/#q=WzAsMyxbMiwwLCJcXGN0QyJdLFs0LDAsIlxcY3REIl0sWzAsMCwiXFxjdEIiXSxbMiwwLCJIIl0sWzAsMSwiRiIsMCx7ImxhYmVsX3Bvc2l0aW9uIjozMH1dLFswLDEsIksiLDAseyJjdXJ2ZSI6LTN9XSxbMCwxLCJHIiwyLHsiY3VydmUiOjN9XSxbNSw0LCJcXGtlclxcYWxwaGEiLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV0sWzQsNiwiXFxhbHBoYSIsMCx7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH19XV0=
\[\begin{tikzcd}
	\ctB && \ctC && \ctD
	\arrow["H", from=1-1, to=1-3]
	\arrow[""{name=0, anchor=center, inner sep=0}, "F"{pos=0.3}, from=1-3, to=1-5]
	\arrow[""{name=1, anchor=center, inner sep=0}, "K", curve={height=-18pt}, from=1-3, to=1-5]
	\arrow[""{name=2, anchor=center, inner sep=0}, "G"', curve={height=18pt}, from=1-3, to=1-5]
	\arrow["{\ker\alpha}", shorten <=2pt, shorten >=2pt, Rightarrow, from=1, to=0]
	\arrow["\alpha", shorten <=2pt, shorten >=2pt, Rightarrow, from=0, to=2]
\end{tikzcd}\]
esiste una successione esatta
        \[\begin{tikzcd}
	0 & \ker\alpha H & F H & G H & \coker\,\alpha H & 0.
	\arrow[from=1-1, to=1-2, Rightarrow]
	\arrow["\kappa*H", from=1-2, to=1-3, Rightarrow]
	\arrow["\alpha*H", from=1-3, to=1-4, Rightarrow]
	\arrow["\pi*H", from=1-4, to=1-5, Rightarrow]
	\arrow[from=1-5, to=1-6, Rightarrow]
\end{tikzcd}\]
    \end{itemize}
	\item
	\item
	\item
	\item
\end{enumerate}

\section{Monomorfismi ed epimorfismi}\label{sec_monoepi}

Come visto nell'esempio \ref{mon_sonocat}, i monoidi corrispondono precisamente alle categorie con un solo oggetto; allora,
la definizione di elemento \emph{cancellabile a sinistra} (o a destra) in un monoide \(M\) si può applicare direttamente ai morfismi della categoria \(\susp M\).

Ricordiamo che un elemento \(x\) di un monoide \((M, \cdot, 1)\) si dice cancellabile a sinistra (rispettivamente, destra) se,
per ogni coppia di elementi \(y_0\) e \(y_1\) in \(M\) tali che \(x \cdot y_0 = x \cdot y_1\) (rispettivamente, \(y_0 \cdot x = y_1 \cdot x\)), si ha che \(y_0 = y_1\).

Se però vogliamo estendere tale definizione ad una categoria generica,
la cui composizione è dunque un'operazione parziale,
è necessario considerare solo le composizioni ben definite, ovvero tra frecce consecutive.
Si arriva così alle seguenti definizioni.

\begin{definition}[Monomorfismo]\label{def_Mono}\index{Monomorfismo}\index{Morfismo!mono---}
	Un morfismo \(m \colon B \to X\) in una categoria \(\ctC\) è un \emph{monomorfismo} (o \emph{mono}) se,
	per ogni coppia di frecce parallele \(f, g \colon A \to B\) in \(\ctC\) tali che \(m \cmp f = m \cmp g\), si ha che \(f = g\).
\end{definition}

\begin{definition}[Epimorfismo]\label{def_Epi}\index{Epimorfismo}\index{Morfismo!epi---}
	Un morfismo \(e \colon X \to A\) in una categoria \(\ctC\) è un \emph{epimorfismo} (o \emph{epi}) se,
	per ogni coppia di frecce parallele \(f, g \colon A \to B\) in \(\ctC\) tali che \(f \cmp e = g \cmp e\), si ha che \(f = g\).
\end{definition}
\begin{terminology}
	Il prefisso greco \emph{mono-} significa `uno, singolo' (il prefisso greco \(\mu\acute{o}\nu o\varsigma\)- è imparentato al latino \emph{moenia}, un muro fatto di un solo pezzo); la scelta del nome `monomorfismo' si motiva quindi notando che una funzione \(f : A\to B\) è un monomorfismo se ogni valore \(b=f(a) \in B\) viene assunto per al più un \(a\in A\). Il prefisso \emph{epi-} significa invece `sopra, presso' (il prefisso greco \(\overset,\varepsilon\pi\acute{\iota}\)- è imparentato al latino \emph{apud}); la scelta del nome `epimorfismo' si motiva quindi pensando che una funzione \(f : A\to B\) che è un epimorfismo `stia sopra' il suo dominio coprendolo completamente, nel senso che ogni valore \(b=f(a)\) è assunto almeno una volta.
\end{terminology}
Dato che le definizioni categoriali di mono ed epi generalizzano, rispettivamente, quelle, algebriche, di elementi cancellabili a sinistra e a destra, otteniamo immediatamente il seguente esempio.
\begin{example}
	Nella categoria \(\susp(M,\cdot,1)\) indotta da un monoide come in \ref{mon_sonocat}, i mono sono gli elementi cancellabili a sinistra,
	e gli epi sono gli elementi cancellabili a destra.
\end{example}

Vediamo ora invece esempi in categorie non indotte da monoidi.
Il primo caso, alquanto degenere, è dato dai preordini.

\begin{example}\label{ex:mono-epi-preord}
	Nella categoria indotta da un preordine, come visto nell'esempio~\ref{ord_sonocat},
	tutti i morfismi sono sia epi che mono.
	Infatti, la definizione di epi e mono è sempre soddisfatta banalmente,
	dato che, in un preordine, due frecce parallele sono necessariamente uguali.
\end{example}

Gli esempi precedenti mostrano come
un morfismo possa essere sia epi che mono, e comunque non essere un isomorfismo.
Il prossimo esempio, rispetto ai precedenti, è più complesso.

% TODO: Lo svolgimento dell'esempio dovrebbe invece essere un esercizio svolto? Come lo formattiamo?
\begin{example}\label{monoepi_in_set}
	Nella categoria \(\ctSet\) di insiemi e funzioni, i monomorfismi sono precisamente le funzioni iniettive
	e gli epimorfismi sono precisamente le funzioni surgettive.

	Consideriamo il caso delle funzioni surgettive.
	Se \(e \colon X \to A\) è una funzione surgettiva e \(f, g \colon A \to B\) sono funzioni tali che \(f \cmp e = g \cmp e\),
	allora per ogni elemento \(a \in A\) esiste un \(x \in X\) tale che \(e(x) = a\), per la surgettività di \(e\).
	Osserviamo che \((f \cmp e)(x) = (g \cmp e)(x)\), ovvero \(f(e(x)) = g(e(x))\),
	ma allora \(f(a) = g(a)\).
	Per la genericità di \(a\) concludiamo che \(f = g\), e dunque \(e\) è epi.

	Nel caso opposto, in cui \(e \colon X \to A\) è epi, sia \(a \in A\).
	Assumiamo per assurdo che non esista \(x \in X\) tale che \(f(x) = a\).
	Allora siano \(k_0 \colon A \to \{0, 1\}\) la funzione costante in \(0\),
	e \(\delta_a \colon A \to \{0, 1\}\) la funzione caratteristica di \(a\) in \(A\).
	Siccome \(a\) non appartiene all'immagine di \(e\), abbiamo che \(k_0 \cmp e = \delta_a \cmp e\)
	in quanto entrambe le composizioni assumono costantemente il valore \(0\) su tutto il dominio \(X\).
	Dunque, \(k_0 = \delta_a\), il che è assurdo.
	Dalla negazione dell'ipotesi per assurdo, concludiamo che \(e\) è surgettiva.
\end{example}

Si noti che la dimostrazione che le funzioni surgettive sono epi sarebbe immediata
se usassimo il fatto che ogni funzione surgettiva ha un'inversa destra.
L'esistenza dell'inversa destra, però, è una conseguenza dell'assioma di scelta,
che invece non viene impiegato nella dimostrazione di cui sopra.

\begin{exercise}
	Dimostrare che una funzione è iniettiva se e solo se è un mono in \(\ctSet\),
	ma senza utilizzare il fatto che le funzioni iniettive hanno inversa sinistra.
\end{exercise}

Per ragioni che saranno evidenti nella prossima sezione,
abbiamo evidenziato come l'equivalenza tra funzioni surgettive (iniettive)
e epi (mono) in \(\ctSet\) sia indipendente dall'esistenza di un'inversa destra (sinistra).

\begin{remark}
	\label{rmk:mono-epi-duality}
	Le nozioni di monomorfismo ed epimorfismo sono duali:
	un morfismo in una categoria \(\ctC\) è mono (epi) se e solo se è epi (mono) in \(\ctC^{\op}\) (si veda \ref{def_cat_opp}).
\end{remark}

Dimostriamo ora alcuni risultati che rendono più agevole lavorare con mono ed epi,
sfruttando la dualità a nostro vantaggio.

\begin{proposition}
	Siano \(f \colon A \to B\) e \(g \colon B \to C\) due frecce consecutive in una qualche categoria.
	Allora:
	\begin{enumerate}
		\item Se \(f\) e \(g\) sono entrambe mono (epi), allora anche \(g \cmp f\) è mono (epi).
		\item Se \(g \cmp f\) è mono, allora anche \(f\) è mono.
		\item Se \(g \cmp f\) è epi, allora anche \(g\) è epi.
	\end{enumerate}
\end{proposition}
\begin{proof}
	Grazie all'osservazione~\ref{rmk:mono-epi-duality},
	ci basta dimostrare il risultato per i mono,
	e il risultato per gli epi segue per dualità.
	\begin{enumerate}
		\item Siano \(f\) e \(g\) mono.
		Per dimostrare che \(g \cmp f\) è mono,
		consideriamo una coppia di frecce parallele \(h\) e \(k\) tali che \((g \cmp f) \cmp h = (g \cmp f) \cmp k\).
		Per associatività della composizione, \(g \cmp (f \cmp h) = g \cmp (f \cmp k)\).
		Allora, siccome \(g\) per ipotesi è mono, si ha che \(f \cmp h = f \cmp k\).
		Inoltre, siccome \(f\) per ipotesi è mono, si ha che \(h = k\).
		Quindi, per la generalità di \(h\) e \(k\), si ha che anche \(g \cmp f\) è mono.
		\item Assumiamo che \(g \cmp f\) sia mono.
		Per dimostrare che \(f\) è mono,
		consideriamo una coppia di frecce parallele \(h\) e \(k\) tali che \(f \cmp h = f \cmp h\).
		Allora, post-componendo con \(g\) su ambo i lati e sfruttando la associatività della composizione,
		otteniamo che \((g \cmp f) \cmp h = (g \cmp f) \cmp k\).
		Siccome per ipotesi \(g \cmp f\) è mono, si ha che \(h = k\).
		Quindi, per la generalità di \(h\) e \(k\), si ha che anche \(f\) è mono. \qedhere
	\end{enumerate}
\end{proof}

\begin{proposition}\label{mono_epi_ort}[Una proprietà di mono ed epi in \(\ctSet\)]
	Dato un quadrato commutativo di funzioni
	\[\begin{tikzcd}
		E \ar[r,"f"]\ar[d, "e"']& A\ar[d, "m"] \\
		B \ar[r, "g"']\ar[ur,dashed,"u"] & X
	\end{tikzcd}\]
	dove \(e : E\to B\) è un epi e \(m : A \to X\) un mono, esiste un unica funzione \(u : B\to A\) (indicata con una freccia tratteggiata) con la proprietà di `spezzare il quadrato', cioè tale che \(u\cmp e=f\) e \(m\cmp u=g\).
\end{proposition}
\begin{proof}
	Costruiamo \(u\) esplicitamente: ad un elemento \(b\in B\), che sappiamo essere della forma \(e(a)\) per qualche \(a\in A\), associamo l'elemento \(u(b)=f(a)\). Questa definizione è ben posta, perché se \(a,a'\) sono entrambi tali che \(e(a)=e(a')=b\), allora \(mu(b)=mf(a)=mf(a')\), così che \(f(a)=f(a')\), perché \(m\) è un mono. \`E evidente ora che \(u\cmp e= f\), per costruzione, ed \((m\cmp u)(b)=m(f(a))=g(e(a))=g(b)\); l'unicità segue ancora dal fatto che \(m\) è mono.
\end{proof}
Concludiamo la sezione enunciando un risultato che nel capitolo \ref{cap:fattorizzazione} avremo gli strumenti per dimostrare in modo elegante (chi legge interpreti così la situazione: dimostrare in maniera elementare il seguente risultato è possibile, ma va considerato un esercizio laborioso. Una parte dell'esercizio è però del tutto elementare e invitiamo chi legge a scoprire quale---e a cimentarvisi).
\begin{proposition}\label{caratt_epi_con_ort}
	Sia \(p : E \to B\) una funzione tra insiemi; le seguenti condizioni sono equivalenti:
	\begin{itemize}
		\item \(p\) è un epimorfismo (si veda \ref{def_Mono})
		\item in ogni diagramma di insiemi e funzioni come il seguente:
		\[\begin{tikzcd}
			E \ar[r, "f"]\ar[d, "p"']& X \ar[d, "m"]\\
			B \ar[r, "g"'] \ar[ur, dashed, "u"]& Y
		\end{tikzcd}\]
		dove \(m : X\to Y\) è un monomorfismo, esiste un unico \(u : B\to X\) tale che \(u\cmp p = f\) e \(m\cmp u = g\).
	\end{itemize}
\end{proposition}
Il duale di \ref{caratt_epi_con_ort} è la seguente proposizione, che ammette una condizione equivalente in più, e dunque una formulazione più semplice:
\begin{proposition}\label{caratt_epi_con_ort_duale}
	Sia \(m : X\to Y\) una funzione tra insiemi; le seguenti condizioni sono equivalenti:
	\begin{enumerate}
		\item\label{caratt_epi_con_ort_duale:itm1} \(m\) è un monomorfismo (si veda \ref{def_Epi});
		\item\label{caratt_epi_con_ort_duale:itm2} in ogni diagramma di insiemi e funzioni come il seguente:
		\[\begin{tikzcd}
			E \ar[r, "f"]\ar[d, "p"']& X \ar[d, "m"]\\
			B \ar[r, "g"'] \ar[ur, dashed, "u"]& Y
		\end{tikzcd}\]
		dove \(p : E\to B\) è un epimorfismo, esiste un unico \(u : B\to X\) tale che \(u\cmp p = f\) e \(m\cmp u = g\);
		\item\label{caratt_epi_con_ort_duale:itm3} la condizione del punto precedente vale per \(p : \{0,1\} \to \{\bullet\}\) (l'unica funzione \(0\mapsto\bullet, 1\mapsto\bullet\)).
	\end{enumerate}
\end{proposition}
\begin{proof}
	Delle condizioni dell'enunciato, \ref{caratt_epi_con_ort_duale:itm2} segue da \ref{caratt_epi_con_ort_duale:itm1} per la proposizione \ref{mono_epi_ort}.
	Inoltre, \ref{caratt_epi_con_ort_duale:itm3} \`e un caso particolare di \ref{caratt_epi_con_ort_duale:itm2}.
	Dunque, rimane da dimostrare che \ref{caratt_epi_con_ort_duale:itm1} segue da \ref{caratt_epi_con_ort_duale:itm3} .
	Siano \(x, x' \in X\) tali che \(m(x) = m(x')\).
	Allora, consideriamo la funzione \(f \colon \{0, 1\} \to X\) per cui \(0 \mapsto x\) e \(1 \mapsto x'\),
	e la funzione \(g \colon \{\bullet\} \to Y\) per cui \(\bullet \mapsto m(x)\).
	Per costruzione \(m \cmp f = g \cmp p\) e dunque, per l'ipotesi \ref{caratt_epi_con_ort_duale:itm3}, esiste un unico \(u : B\to X\) tale che \(u\cmp p = f\) (e \(m\cmp u = g\)).
	Allora, \(x = f(0) = u(p(0)) = u(\bullet) = u(p(1)) = f(1) = x'\).
	Per la genericit\`a di \(x\) e \(x'\), abbiamo che \(f\) \`e iniettiva,
	e dunque un monomorfismo in \(\ctSet\).
\end{proof}

\subsection{Sezioni e retrazioni}\label{sec_sezretraz}\index{Sezione}
Così come l'algebra ci ha suggerito di generalizzare all'ambito categoriale la nozione di elemento di un monoide cancellabile a sinistra/destra,
similmente possiamo considerare la nozione di elemento invertibile a sinistra/destra.

\begin{definition}[Sezione e retrazione]\index{Sezione}\index{Retrazione|see {Sezione}}
	Sia \(f \colon A \to B\) un morfismo in una categoria.
	Allora chiamiamo:
	\begin{itemize}
		\item \emph{sezione} di \(f\) una sua inversa destra, ovvero un morfismo \(s \colon B \to A\) tale che \(f \cmp s = \id_{B}\).
		\item \emph{retrazione} di \(f\) una sua inversa sinistra, ovvero un morfismo \(r \colon B \to A\) tale che \(r \cmp f = \id_{A}\).
	\end{itemize}
\end{definition}
\begin{remark}
	Una sezione di un qualche morfismo, essendo invertibile a sinistra, è anche cancellabile a sinistra.
	Dunque, ogni sezione è, in particolare, un monomorfismo.
	\index{Monomorfismo!--- spezzante}Un monomorfismo che è anche una sezione si dice \emph{mono spezzante}.
	Dualmente, ogni retrazione è cancellabile a destra e dunque un epimorfismo.
	\index{Epimorfismo!--- spezzante}Un epimorfismo che è anche una retrazione si dice \emph{epi spezzante}.
	Inoltre, le nozioni di sezione e retrazione sono ovviamente dipendenti una dall'altra:
	un morfismo \(f : A \to B\) che ha una sezione \(s : B\to A\) è una retrazione di \(s\),
	e viceversa \(f\) è una sezione di ogni sua retrazione.
\end{remark}
\Todo{dualità}

\begin{definition}[Retratto]
	Dati due oggetti \(A\) e \(B\) in una categoria,
	diciamo che \(A\) è un \emph{retratto} di \(B\) se ci sono una coppia di morfismi detti \emph{sezione} e \emph{retrazione}, raffigurabili come
	\begin{equation}
		\begin{tikzcd}
			A \ar[r, bend left, "s"] &B \ar[l, bend left, "r"]
		\end{tikzcd}
	\end{equation}
	tali che \(r \cmp s = \id_A\).
	In tal caso, diciamo che \(r\), che è un epi spezzante (dato che ha \(s\) come inversa destra), è un \emph{retratto} di \(B\) su \(A\), mentre \(s\) è un mono spezzante (perché ha \(r\) come inversa sinistra).
\end{definition}
\begin{remark}
	Un endomorfismo \(e : X\to X\) si dice \emph{idempotente} se \(e\cmp e=e\); si osservi che, se \(s \colon A \to B\) e \(r \colon B \to A\) sono una coppia di sezione e retrazione,
	allora il morfismo
	\begin{equation}
		\begin{tikzcd}
			B \ar[r, "r"] & A \ar[r, "s"] &B
		\end{tikzcd}
	\end{equation}
	è un morfismo idempotente, dato che
	\[(s\cmp r)\cmp (s\cmp r) = s\cmp (r\cmp s)\cmp r = s\cmp 1\cmp r=s\cmp r.\]
\end{remark}

\begin{example}
	\label{exm:set-sezioni-retrazioni}
	In \(\ctSet\), una funzione ha una retrazione se e solo se è iniettiva.
	Inoltre, le funzioni che hanno una sezione sono surgettive,
	mentre l'implicazione inversa vale soltanto se assumiamo l'Assioma di Scelta.
	% TODO: questo è il teorema di Cantor? Riferimento necessario?
	% Questo esempio, inoltre, dimostra che sezioni e retrazioni non sono uniche:
	% una funzione surgettiva può avere più inverse destre (sezioni).
\end{example}
\Todo{Tempo fa vidi una dimostrazione molto eloquente di questo fatto, mi piacerebee aggiungerla.}
\begin{figure}[h]
  \begin{center}
    \begin{tikzpicture}[
        x=1em, y=1em,
        dot/.style={
          circle,
          fill=#1,
          inner sep=0pt,
          outer sep=2pt,
          minimum size=4pt,
          draw=none,
        },
        wrap/.style={
          fill=black!5,
          rounded corners,
          inner sep=.5em,
        },
      ]

      \def\sizeX{5}
      \def\seedX{1}
      \def\seedXS{
        3/2,
        1/3,
        4/4,
        1/5,
        5/9%
      }

      \begin{scope}[local bounding box=X]
        \GimmeBounds{\seedX}{\sizeX}
        \let\xminC\xmin\let\xmidC\xmid\let\xmaxC\xmax
        \let\yminC\ymin\let\ymidC\ymid\let\ymaxC\ymax

        \pgfmathsetseed{\seedX}
        \foreach \count/\seed [count=\n] in \seedXS {
          \begin{scope}[xshift=(\n-\sizeX/2)*5em,local bounding box=X\n]
            \pgfmathsetmacro{\dx}{(rnd-\xmidC)/(\xmaxC-\xminC)}
            \pgfmathsetmacro{\dy}{(rnd-\ymidC)/(\ymaxC-\yminC)}

            \GimmeBounds{\seed}{\count}
            \pgfmathsetseed{\seed}
            \foreach \i in {1,...,\count} {
              \pgfmathsetmacro{\x}{\dx + 2*(rnd-\xmid)/ifthenelse(\xmax==\xmin,1,\xmax-\xmin)}
              \pgfmathsetmacro{\y}{\dy + 2*(rnd-\ymid)/ifthenelse(\ymax==\ymin,1,\ymax-\ymin)}
              \path node[dot=black] (X\n\i) at (\x,\y) {};
            }

            \pgfmathsetseed{\seedX}
            \foreach \k in {1,...,\n} \pgfmathparse{rnd+rnd};

          \end{scope}
        }
      \end{scope}

      \begin{scope}[yshift=-8em,local bounding box=Y]
        \GimmeBounds{\seedX}{\sizeX}
        \pgfmathsetseed{\seedX}
        \foreach \i/\c in {
          1/ibmBlue,
          2/ibmPurple,
          3/ibmMagenta,
          4/ibmOrange,
          5/ibmYellow%
        } {
          \pgfmathsetmacro{\x}{(\i-\sizeX/2)*5+(rnd-\xmid)/ifthenelse(\xmax==\xmin,1,\xmax-\xmin)}
          \pgfmathsetmacro{\y}{(rnd-\ymid)/ifthenelse(\ymax==\ymin,1,\ymax-\ymin)}
          \path node[dot=\c] (Y\i) at (\x,\y) {};
        }
      \end{scope}

      \begin{scope}[on background layer]
        \path node[wrap, draw=gray, inner sep=2em, fit=(X)] (D) {};
        \path node[wrap, draw=gray, inner sep=2em, fit=(Y)] (C) {};
        \foreach \n/\c in {
          1/ibmBlue,
          2/ibmPurple,
          3/ibmMagenta,
          4/ibmOrange,
          5/ibmYellow%
        } {
          \path node[wrap, shape=circle, fill=\c!20, draw=\c, fit=(X\n)] (W\n) {};
          \draw [-latex, \c] (W\n) to[bend right=15] (Y\n);
        }
      \end{scope}

      \foreach \s/\t in {
        Y1/X11,
        Y2/X21,
        Y3/X31,
        Y4/X41,
        Y5/X51%
      } \draw (\s) edge[-latex, bend right=15] (\t);
    \end{tikzpicture}
  \end{center}
  \caption{}
  \label{fig_assioma_scelta}
\end{figure}

I funtori preservano sezioni e retrazioni,
nel senso precisato dal seguente teorema:

\begin{theorem}%
	\label{thm:fun-sezioni-retrazioni}
	Dato un funtore \(F \colon \ctC \to \ctD\) ed una coppia di sezione e retrazione \(s \colon A \to B\) e \(r \colon B \to A\),
	allora \(F(s) \colon F(A) \to F(B)\) e \(F(r) \colon F(B) \to F(A)\) è una coppia di sezione e retrazione.
\end{theorem}
\begin{proof}
	La coppia di sezione e retrazione \(s\) e \(r\),
	per definizione, è tale che \(r \cmp_{\ctC} s = \id_A\).
	Dunque, applicando il funtore \(F\), abbiamo che \(F(r \cmp_{\ctC} s) = F(\id_A)\).
	Siccome i funtori, per definizione, preservano composizione e identità,
	otteniamo che \(F(r) \cmp_{\ctD} F(s) = \id_{F(A)}\),
	ovvero che \(F(A)\) e \(F(B)\) sono una coppia di sezione/retrazione.
\end{proof}

Di conseguenza, abbiamo i seguente corollari:

\begin{corollary}%
	\label{cor:fun-sezioni-retrazioni}
	Sia \(F \colon \ctC \to \ctD\) un funtore.
	Allora:
	\begin{enumerate}
		\item Se \(r \colon B \to A\) è un retratto di \(B\) su \(A\),
		allora \(F(r)\) è un retratto di \(F(B)\) su \(F(A)\).
		\item Se \(A\) è un retratto di \(B\),
		allora \(F(A)\) è un retratto di \(F(B)\).
		\item Se \(m \colon A \to B\) è un mono spezzante,
		allora \(F(m)\) è un mono spezzante.
		\item Se \(e \colon B \to A\) è un epi spezzante,
		allora \(F(e)\) è un epi spezzante.
	\end{enumerate}
	Ovvero, i funtori preservano i retratti (sia nel senso di oggetti che di morfismi),
	i mono spezzanti e gli epi spezzanti.
\end{corollary}

Questo risultato, per quanto banale nella sua dimostrazione, ha conseguenze profonde:
ci dice infatti che, sebbene abbiano proprietà simili,
mono (risp., epi) e mono spezzanti (risp., epi spezzanti)
sono distinti da una differenza fondamentale:
l'essere o meno preservati dai funtori.

\begin{example}
	% Si consideri \(\ctMon\), la categoria dei monoidi e omomorfismi di monoide.
	% L'immersione \(\iota \colon \bbN \mono \bbZ\) è un mono,
	% ma è anche epi.
	Si consideri l'immersione \(\iota \colon \bbN \mono \bbZ\)
	nella categoria \(\ctMon\) dei monoidi e omomorfismi di monoide.
	Questa è mono in quanto la sua funzione sottogiacente è iniettiva,
	ma non è spezzante.
	Infatti, se avesse una retrazione,
	questa sarebbe preservata dal funtore dimenticante \(U \colon \ctMon \to \ctSet\),
	per il \autoref{thm:fun-sezioni-retrazioni},
	e dunque sarebbe un'inversa sinistra della funzione \(\iota\).
	Come omomorfismo di monoidi, però, tale inversa sinistra dovrebbe preservare gli elementi inversi,
	e ciò non è possibile.

	Inoltre, e più sorprendentemente, \(\iota\) è anche epi,
	nonostante la sua funzione sottogiacente non sia surgettiva.
	Infatti, se \(f, g \colon \bbZ \to M\) sono morfismi di monoidi tali che \(f \iota = g \iota\),
	allora, per ogni \(n \in \bbZ\),
	abbiamo due possibilità:
	\begin{itemize}
		\item Se \(n \in \bbZ_{\geq 0}\), allora \(n\) sta nell'immagine di \(\iota\),
		ovvero esiste \(n_0 \in \bbN\) tale che \(n = \iota(n_0)\).
		Per ipotesi abbiamo che \(f \iota (n_0) = g \iota (n_0)\),
		ovvero \(f (n) = g (n)\).
		Ne concludiamo che \(f\) e \(g\) coincidono sugli interi non-negativi.
		\item Se \(n \in \bbZ_{< 0}\), allora \(-n \in \bbZ_{\geq 0}\).
		Analogamente al caso precedente, esiste \(n_0 \in \bbN\) tale che
		\(-n = \iota(n_0)\) e \(f \iota (-n) = g \iota (-n)\).
		Siccome gli omomorfismi di monoide preservano le inverse,
		\({(f (n))}^{-1} = f \iota {(-n)} = g \iota {(-n)} = {(g (n))}^{-1}\).
		Per l'unicità dell'inversa, concludiamo che \(f (n) = g (n)\),
		ovvero che \(f\) e \(g\) coincidono sugli interi negativi.
	\end{itemize}
	Dunque, possiamo concludere che \(f = g\)
	e che, per l'arbitrarietà di \(f\) e \(g\),
	l'immersione \(\iota\) è un epi.
	Tuttavia, \(\iota\) non è un epi spezzante.
	Infatti, se esistesse, la sua sezione dovrebbe essere preservata dal funtore dimenticante \(U \colon \ctMon \to \ctSet\),
	per il \autoref{thm:fun-sezioni-retrazioni}.
	Tuttavia, \(U(\iota)\) non è una funzione surgettiva,
	e dunque non può avere una sezione, per l'\autoref{exm:set-sezioni-retrazioni}.

	Questa discussione fornisce alcuni utili controesempi:
	un morfismo può essere sia epi che mono senza necessariamente essere epi spezzante o mono spezzante,
	e, in particolare, senza essere un isomorfismo.
\end{example}
\begin{example}[La categoria dei punti]\label{ex_cat_punti}\index{Categoria!--- dei punti su un oggetto}
	Sia \(\ctC\) una categoria. Per ogni oggetto \(X\in\ctC_0\) definiamo la categoria \(\cate{Pt}_X(\ctC)\) dei \emph{punti su \(X\)} come segue:
	\begin{itemize}
		\item gli oggetti \(\var [p]EX[\downuparrows]\) di \(\cate{Pt}_X(\ctC)\) sono epi spezzanti di codominio \(X\), cioè morfismi \(p : E \to X\) che ammettono una sezione \(\bar p : X\to E\) tale che \(p\cmp \bar p = \id_X\);
		\item i morfismi \(f : \var [p] EX[\downuparrows]\to \var[q] FX[\downuparrows]\) sono morfismi \(f : E \to F\) tali che
		\[q\cmp f = p \qquad \qquad f\cmp \bar q = \bar p.\]
	\end{itemize}
\end{example}

Abbiamo visto in precedenza che, in generale, un morfismo pu\`o essere sia epi che mono senza essere un isomorfismo (vedasi esempio~\ref{ex:mono-epi-preord}).
Possiamo per\`o caratterizzare gli isomorfismi in termini di mono o epi spezzanti.

\begin{proposition}\label{prop:iso-epi-mono}
	Sia \(f \colon A \to B\) un morfismo. Le seguenti condizioni sono equivalenti:
	\begin{enumerate}
    	\item\label{prop:iso-epi-mono:item1} \(f\) \`e un isomorfismo.
		\item\label{prop:iso-epi-mono:item2} \(f\) \`e mono ed epi spezzante.
		\item\label{prop:iso-epi-mono:item3} \(f\) \`e mono spezzante ed epi.
    \end{enumerate}
\end{proposition}
\begin{proof}
	Ogni isomorfismo \`e, in particolare, epi spezzante e mono spezzante, dunque il punto~\ref{prop:iso-epi-mono:item1} implica i punti~\ref{prop:iso-epi-mono:item2} e~\ref{prop:iso-epi-mono:item3}.
	Dimostriamo che il punto~\ref{prop:iso-epi-mono:item2} implica il punto~\ref{prop:iso-epi-mono:item1}.
	Siccome \(f\) \`e epi spezzante, esiste una sua inversa destra \(g\), ovvero tale che \(f \cmp g = \id_{B}\).
	Dimostriamo che \(g\) \`e anche inversa sinistra di \(f\), ovvero che \(g \cmp f = \id_{A}\).
	Osserviamo infatti che \(f \cmp (g \cmp f) = (f \cmp g) \cmp f = \id_{B} \cmp f = f = f \cmp \id_{A}\).
	Siccome per ipotesi \(f\) \`e mono, dalla osservazione precedente segue che \(g \cmp f = \id_{A}\).
	Dunque \(f\) \`e un isomorfismo con inversa \(g\).
	Dualmente, abbiamo che il punto~\ref{prop:iso-epi-mono:item3} implica il punto~\ref{prop:iso-epi-mono:item1}.
\end{proof}

\subsubsection*{Esercizi}
\begin{enumerate}
	\item
	\item
	\item
	\item
	\item
\end{enumerate}
